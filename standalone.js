!function(){var e,t,n,i,r={8971:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(8578));function o(e,t){return function(){var n=this.traits(),i=this.properties?this.properties():{};return r.default(n,"address."+e)||r.default(n,e)||(t?r.default(n,"address."+t):null)||(t?r.default(n,t):null)||r.default(i,"address."+e)||r.default(i,e)||(t?r.default(i,"address."+t):null)||(t?r.default(i,t):null)}}t.default=function(e){e.zip=o("postalCode","zip"),e.country=o("country"),e.street=o("street"),e.state=o("state"),e.city=o("city"),e.region=o("region")}},7663:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Alias=void 0;var r=i(n(5615)),o=n(2265);function s(e,t){o.Facade.call(this,e,t)}t.Alias=s,r.default(s,o.Facade),s.prototype.action=function(){return"alias"},s.prototype.type=s.prototype.action,s.prototype.previousId=function(){return this.field("previousId")||this.field("from")},s.prototype.from=s.prototype.previousId,s.prototype.userId=function(){return this.field("userId")||this.field("to")},s.prototype.to=s.prototype.userId},3194:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t){if("object"!=typeof t)return t;if("[object Object]"===Object.prototype.toString.call(t)){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e(t[i]));return n}return Array.isArray(t)?t.map(e):t}},7532:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=void 0;var r=i(n(5615)),o=n(2265);function s(e,t){o.Facade.call(this,e,t)}t.Delete=s,r.default(s,o.Facade),s.prototype.type=function(){return"delete"}},2265:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Facade=void 0;var r=i(n(8971)),o=n(3194),s=i(n(7751)),a=i(n(7639)),l=i(n(8578)),c=i(n(518));function u(e,t){t=t||{},this.raw=o.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=o.clone(e)),"traverse"in t||(t.traverse=!0),e.timestamp="timestamp"in e?a.default(e.timestamp):new Date,t.traverse&&c.default(e),this.opts=t,this.obj=e}t.Facade=u;var d=u.prototype;function p(e){return o.clone(e)}d.proxy=function(e){var t=e.split("."),n=this[e=t.shift()]||this.obj[e];return n?("function"==typeof n&&(n=n.call(this)||{}),0===t.length||(n=l.default(n,t.join("."))),this.opts.clone?p(n):n):n},d.field=function(e){var t=this.obj[e];return this.opts.clone?p(t):t},u.proxy=function(e){return function(){return this.proxy(e)}},u.field=function(e){return function(){return this.field(e)}},u.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var n=this.proxy(e);return n&&(n=[this.opts.clone?o.clone(n):n]),n||[]}},u.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var n=this.proxy(e+"s");return Array.isArray(n)?n[0]:void 0}},d.json=function(){var e=this.opts.clone?o.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e},d.rawEvent=function(){return this.raw},d.options=function(e){var t=this.obj.options||this.obj.context||{},n=this.opts.clone?o.clone(t):t;if(!e)return n;if(this.enabled(e)){var i=this.integrations(),r=i[e]||l.default(i,e);return"object"!=typeof r&&(r=l.default(this.options(),e)),"object"==typeof r?r:{}}},d.context=d.options,d.enabled=function(e){var t=this.proxy("options.providers.all");"boolean"!=typeof t&&(t=this.proxy("options.all")),"boolean"!=typeof t&&(t=this.proxy("integrations.all")),"boolean"!=typeof t&&(t=!0);var n=t&&s.default(e),i=this.integrations();if(i.providers&&i.providers.hasOwnProperty(e)&&(n=i.providers[e]),i.hasOwnProperty(e)){var r=i[e];n="boolean"!=typeof r||r}return!!n},d.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},d.active=function(){var e=this.proxy("options.active");return null==e&&(e=!0),e},d.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},d.sessionId=d.anonymousId,d.groupId=u.proxy("options.groupId"),d.traits=function(e){var t=this.proxy("options.traits")||{},n=this.userId();for(var i in e=e||{},n&&(t.id=n),e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=null==this[i]?this.proxy("options.traits."+i):this[i]();if(null==r)continue;t[e[i]]=r,delete t[i]}return t},d.library=function(){var e=this.proxy("options.library");return e?"string"==typeof e?{name:e,version:null}:e:{name:"unknown",version:null}},d.device=function(){var e=this.proxy("context.device");"object"==typeof e&&null!==e||(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e},d.userAgent=u.proxy("context.userAgent"),d.timezone=u.proxy("context.timezone"),d.timestamp=u.field("timestamp"),d.channel=u.field("channel"),d.ip=u.proxy("context.ip"),d.userId=u.field("userId"),r.default(d)},7748:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var r=i(n(5615)),o=i(n(6362)),s=i(n(7639)),a=n(2265);function l(e,t){a.Facade.call(this,e,t)}t.Group=l,r.default(l,a.Facade);var c=l.prototype;c.action=function(){return"group"},c.type=c.action,c.groupId=a.Facade.field("groupId"),c.created=function(){var e=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(e)return s.default(e)},c.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.groupId();return o.default(t)?t:void 0},c.traits=function(e){var t=this.properties(),n=this.groupId();for(var i in e=e||{},n&&(t.id=n),e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=null==this[i]?this.proxy("traits."+i):this[i]();if(null==r)continue;t[e[i]]=r,delete t[i]}return t},c.name=a.Facade.proxy("traits.name"),c.industry=a.Facade.proxy("traits.industry"),c.employees=a.Facade.proxy("traits.employees"),c.properties=function(){return this.field("traits")||this.field("properties")||{}}},5543:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Identify=void 0;var r=n(2265),o=i(n(8578)),s=i(n(5615)),a=i(n(6362)),l=i(n(7639)),c=function(e){return e.trim()};function u(e,t){r.Facade.call(this,e,t)}t.Identify=u,s.default(u,r.Facade);var d=u.prototype;d.action=function(){return"identify"},d.type=d.action,d.traits=function(e){var t=this.field("traits")||{},n=this.userId();for(var i in e=e||{},n&&(t.id=n),e){var r=null==this[i]?this.proxy("traits."+i):this[i]();null!=r&&(t[e[i]]=r,i!==e[i]&&delete t[i])}return t},d.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();return a.default(t)?t:void 0},d.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return l.default(e)},d.companyCreated=function(){var e=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(e)return l.default(e)},d.companyName=function(){return this.proxy("traits.company.name")},d.name=function(){var e=this.proxy("traits.name");if("string"==typeof e)return c(e);var t=this.firstName(),n=this.lastName();return t&&n?c(t+" "+n):void 0},d.firstName=function(){var e=this.proxy("traits.firstName");if("string"==typeof e)return c(e);var t=this.proxy("traits.name");return"string"==typeof t?c(t).split(" ")[0]:void 0},d.lastName=function(){var e=this.proxy("traits.lastName");if("string"==typeof e)return c(e);var t=this.proxy("traits.name");if("string"==typeof t){var n=c(t).indexOf(" ");if(-1!==n)return c(t.substr(n+1))}},d.uid=function(){return this.userId()||this.username()||this.email()},d.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},d.age=function(){var e=this.birthday(),t=o.default(this.traits(),"age");return null!=t?t:e instanceof Date?(new Date).getFullYear()-e.getFullYear():void 0},d.avatar=function(){var e=this.traits();return o.default(e,"avatar")||o.default(e,"photoUrl")||o.default(e,"avatarUrl")},d.position=function(){var e=this.traits();return o.default(e,"position")||o.default(e,"jobTitle")},d.username=r.Facade.proxy("traits.username"),d.website=r.Facade.one("traits.website"),d.websites=r.Facade.multi("traits.website"),d.phone=r.Facade.one("traits.phone"),d.phones=r.Facade.multi("traits.phone"),d.address=r.Facade.proxy("traits.address"),d.gender=r.Facade.proxy("traits.gender"),d.birthday=r.Facade.proxy("traits.birthday")},4303:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=t.Screen=t.Page=t.Track=t.Identify=t.Group=t.Alias=t.Facade=void 0;var r=n(2265);Object.defineProperty(t,"Facade",{enumerable:!0,get:function(){return r.Facade}});var o=n(7663);Object.defineProperty(t,"Alias",{enumerable:!0,get:function(){return o.Alias}});var s=n(7748);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return s.Group}});var a=n(5543);Object.defineProperty(t,"Identify",{enumerable:!0,get:function(){return a.Identify}});var l=n(5616);Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return l.Track}});var c=n(3644);Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return c.Page}});var u=n(6871);Object.defineProperty(t,"Screen",{enumerable:!0,get:function(){return u.Screen}});var d=n(7532);Object.defineProperty(t,"Delete",{enumerable:!0,get:function(){return d.Delete}}),t.default=i(i({},r.Facade),{Alias:o.Alias,Group:s.Group,Identify:a.Identify,Track:l.Track,Page:c.Page,Screen:u.Screen,Delete:d.Delete})},6362:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/.+\@.+\..+/;t.default=function(e){return n.test(e)}},7751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Salesforce:!0};t.default=function(e){return!n[e]}},3644:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var r=i(n(5615)),o=n(2265),s=n(5616),a=i(n(6362));function l(e,t){o.Facade.call(this,e,t)}t.Page=l,r.default(l,o.Facade);var c=l.prototype;c.action=function(){return"page"},c.type=c.action,c.category=o.Facade.field("category"),c.name=o.Facade.field("name"),c.title=o.Facade.proxy("properties.title"),c.path=o.Facade.proxy("properties.path"),c.url=o.Facade.proxy("properties.url"),c.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},c.properties=function(e){var t=this.field("properties")||{},n=this.category(),i=this.name();for(var r in e=e||{},n&&(t.category=n),i&&(t.name=i),e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=null==this[r]?this.proxy("properties."+r):this[r]();if(null==o)continue;t[e[r]]=o,r!==e[r]&&delete t[r]}return t},c.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();return a.default(t)?t:void 0},c.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t},c.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"},c.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new s.Track(t,this.opts)}},6871:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0;var r=i(n(5615)),o=n(3644),s=n(5616);function a(e,t){o.Page.call(this,e,t)}t.Screen=a,r.default(a,o.Page),a.prototype.action=function(){return"screen"},a.prototype.type=a.prototype.action,a.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"},a.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new s.Track(t,this.opts)}},5616:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var r=i(n(5615)),o=n(2265),s=n(5543),a=i(n(6362)),l=i(n(8578));function c(e,t){o.Facade.call(this,e,t)}t.Track=c,r.default(c,o.Facade);var u=c.prototype;u.action=function(){return"track"},u.type=u.action,u.event=o.Facade.field("event"),u.value=o.Facade.proxy("properties.value"),u.category=o.Facade.proxy("properties.category"),u.id=o.Facade.proxy("properties.id"),u.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},u.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},u.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},u.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},u.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},u.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},u.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},u.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},u.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},u.sku=o.Facade.proxy("properties.sku"),u.tax=o.Facade.proxy("properties.tax"),u.name=o.Facade.proxy("properties.name"),u.price=o.Facade.proxy("properties.price"),u.total=o.Facade.proxy("properties.total"),u.repeat=o.Facade.proxy("properties.repeat"),u.coupon=o.Facade.proxy("properties.coupon"),u.shipping=o.Facade.proxy("properties.shipping"),u.discount=o.Facade.proxy("properties.discount"),u.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},u.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},u.description=o.Facade.proxy("properties.description"),u.plan=o.Facade.proxy("properties.plan"),u.subtotal=function(){var e=l.default(this.properties(),"subtotal"),t=this.total()||this.revenue();if(e)return e;if(!t)return 0;if(this.total()){var n=this.tax();n&&(t-=n),(n=this.shipping())&&(t-=n),(n=this.discount())&&(t+=n)}return t},u.products=function(){var e=this.properties(),t=l.default(e,"products");return Array.isArray(t)?t.filter((function(e){return null!==e})):[]},u.quantity=function(){return(this.obj.properties||{}).quantity||1},u.currency=function(){return(this.obj.properties||{}).currency||"USD"},u.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},u.query=o.Facade.proxy("options.query"),u.properties=function(e){var t=this.field("properties")||{};for(var n in e=e||{})if(Object.prototype.hasOwnProperty.call(e,n)){var i=null==this[n]?this.proxy("properties."+n):this[n]();if(null==i)continue;t[e[n]]=i,delete t[n]}return t},u.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},u.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();return a.default(t)?t:void 0},u.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event();return!e&&t&&t.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(e=this.proxy("properties.total")),function(e){if(!e)return;if("number"==typeof e)return e;if("string"!=typeof e)return;if(e=e.replace(/\$/g,""),e=parseFloat(e),!isNaN(e))return e}(e)},u.cents=function(){var e=this.revenue();return"number"!=typeof e?this.value()||0:100*e},u.identify=function(){var e=this.json();return e.traits=this.traits(),new s.Identify(e,this.opts)}},518:function(e,t,n){"use strict";var i=n(7237);function r(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(n){e[n]=r(e[n],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(n,i){e[i]=r(n,t)})),e}(e,t):i.is(e,t)?i.parse(e):e}e.exports=r},7237:function(e,t){"use strict";var n=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],i=n.exec(e),r=0;if(!i)return new Date(e);for(var o,s=0;o=t[s];s++)i[o]=parseInt(i[o],10)||0;i[2]=parseInt(i[2],10)||1,i[3]=parseInt(i[3],10)||1,i[2]--,i[8]=i[8]?(i[8]+"00").substring(0,3):0," "===i[4]?r=(new Date).getTimezoneOffset():"Z"!==i[9]&&i[10]&&(r=60*i[11]+i[12],"+"===i[10]&&(r=0-r));var a=Date.UTC(i[1],i[2],i[3],i[5],i[6]+r,i[7],i[8]);return new Date(a)},t.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&n.test(e))}},5615:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},7639:function(e,t,n){"use strict";var i=n(7237),r=n(8101),o=n(4834),s=Object.prototype.toString;e.exports=function(e){return t=e,"[object Date]"===s.call(t)?e:function(e){return"[object Number]"===s.call(e)}(e)?new Date((n=e)<315576e5?1e3*n:n):i.is(e)?i.parse(e):r.is(e)?r.parse(e):o.is(e)?o.parse(e):new Date(e);var t,n}},8101:function(e,t){"use strict";var n=/\d{13}/;t.is=function(e){return n.test(e)},t.parse=function(e){return e=parseInt(e,10),new Date(e)}},4834:function(e,t){"use strict";var n=/\d{10}/;t.is=function(e){return n.test(e)},t.parse=function(e){var t=1e3*parseInt(e,10);return new Date(t)}},8578:function(e){function t(e){return function(t,n,i,o){var s,a=o&&function(e){return"function"==typeof e}(o.normalizer)?o.normalizer:r;n=a(n);for(var l=!1;!l;)c();function c(){for(s in t){var e=a(s);if(0===n.indexOf(e)){var i=n.substr(e.length);if("."===i.charAt(0)||0===i.length){n=i.substr(1);var r=t[s];return null==r?void(l=!0):n.length?void(t=r):void(l=!0)}}}s=void 0,l=!0}if(s)return null==t?t:e(t,s,i)}}function n(e,t){return e.hasOwnProperty(t)&&delete e[t],e}function i(e,t,n){return e.hasOwnProperty(t)&&(e[t]=n),e}function r(e){return e.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}e.exports=t((function(e,t){if(e.hasOwnProperty(t))return e[t]})),e.exports.find=e.exports,e.exports.replace=function(e,n,r,o){return t(i).call(this,e,n,r,o),e},e.exports.del=function(e,i,r){return t(n).call(this,e,i,null,r),e}},6789:function(e,t,n){"use strict";n.d(t,{a:function(){return o},s:function(){return r}});var i=n(4082);function r(){return!(0,i.B)()||window.navigator.onLine}function o(){return!r()}},3858:function(e,t,n){"use strict";n.d(t,{BE:function(){return s},C1:function(){return a},Kz:function(){return r},m4:function(){return i},xL:function(){return o}});var i="cip-tag.aicactus.io/v1",r="cip-delivery.aicactus.io",o="https",s="aicatus",a="https://cip-api.aicactus.io/v1"},8456:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var i=n(5608),r=n(9752),o=n(8900),s=function(e){function t(t,n){return e.call(this,t,n,new o.U)||this}return(0,i.C6)(t,e),t.system=function(){return new this({type:"track",event:"system"})},t}(r.j)},4082:function(e,t,n){"use strict";function i(){return"undefined"!=typeof window}function r(){return!i()}n.d(t,{B:function(){return i},S:function(){return r}})},9059:function(e,t,n){"use strict";function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}n.d(t,{p:function(){return i}})},8900:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i,r=n(5608),o=n(4034),s=n(148),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.C6)(t,e),t.initRemoteMetrics=function(e){i=new s.w(e)},t.prototype.increment=function(t,n,r){e.prototype.increment.call(this,t,n,r),null==i||i.increment(t,null!=r?r:[])},t}(o.p)},2822:function(e,t,n){"use strict";function i(e,t){var n=t.methodName,i=t.integrationName,r=t.type,o=t.didError,s=void 0!==o&&o;e.stats.increment("aicactus_sdk.integration.invoke".concat(s?".error":""),1,["method:".concat(n),"integration_name:".concat(i),"type:".concat(r)])}n.d(t,{y:function(){return i}})},148:function(e,t,n){"use strict";n.d(t,{w:function(){return c}});var i=n(5608),r=n(8970),o=n(6452),s=n(3831),a=n(3858);function l(e){console.error("Error sending segment performance metrics",e)}var c=function(){function e(e){var t,n,i,r,o,s=this;if(this.host=null!==(t=null==e?void 0:e.host)&&void 0!==t?t:a.m4,this.sampleRate=null!==(n=null==e?void 0:e.sampleRate)&&void 0!==n?n:1,this.flushTimer=null!==(i=null==e?void 0:e.flushTimer)&&void 0!==i?i:3e4,this.maxQueueSize=null!==(r=null==e?void 0:e.maxQueueSize)&&void 0!==r?r:20,this.protocol=null!==(o=null==e?void 0:e.protocol)&&void 0!==o?o:"https",this.queue=[],this.sampleRate>0){var c=!1,u=function(){c||(c=!0,s.flush().catch(l),c=!1,setTimeout(u,s.flushTimer))};u()}}return e.prototype.increment=function(e,t){if(e.includes("aicactus_sdk.")&&0!==t.length&&!(Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize)){var n=function(e,t,n){var r=t.reduce((function(e,t){var n=t.split(":"),i=n[0],r=n[1];return e[i]=r,e}),{});return{type:"Counter",metric:e,value:1,tags:(0,i.Cl)((0,i.Cl)({},r),{library:"aicactus_sdk",library_version:"web"===n?"v2-".concat(o.r):"npm:v2-".concat(o.r)})}}(e,t,(0,s.X)());this.queue.push(n),e.includes("error")&&this.flush().catch(l)}},e.prototype.flush=function(){return(0,i.sH)(this,void 0,Promise,(function(){var e=this;return(0,i.YH)(this,(function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch((function(t){l(t),e.sampleRate=0}))];case 1:return t.sent(),[2]}}))}))},e.prototype.send=function(){return(0,i.sH)(this,void 0,Promise,(function(){var e,t,n;return(0,i.YH)(this,(function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,(0,r.h)(n,{headers:t,body:JSON.stringify(e),method:"POST"})]}))}))},e}()},6452:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var i="0.0.11"},8970:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(5120),r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.m)();if(!n)throw new Error("No global object found");return n.fetch.apply(n,e)}},5120:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var i=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:null}},6091:function(e,t,n){"use strict";n.d(t,{Ud:function(){return a},a5:function(){return o},kJ:function(){return r},rY:function(){return s}});var i="AicactusSDK";function r(){return window[i]}function o(){return window[i]}function s(e){i=e}function a(e){window[i]=e}},6238:function(e,t,n){"use strict";function i(e){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find((function(t){return t.src===e}))}function r(e,t){var n=i(e);if(void 0!==n){var r=null==n?void 0:n.getAttribute("status");if("loaded"===r)return Promise.resolve(n);if("loading"===r)return new Promise((function(e,t){n.addEventListener("load",(function(){return e(n)})),n.addEventListener("error",(function(e){return t(e)}))}))}return new Promise((function(n,i){var r,o=window.document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.setAttribute("status","loading");for(var s=0,a=Object.entries(null!=t?t:{});s<a.length;s++){var l=a[s],c=l[0],u=l[1];o.setAttribute(c,u)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),n(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),i(new Error("Failed to load ".concat(e)))};var d=window.document.querySelector("script");d?null===(r=d.parentElement)||void 0===r||r.insertBefore(o,d):window.document.head.appendChild(o)}))}function o(e){var t=i(e);return void 0!==t&&t.remove(),Promise.resolve()}n.d(t,{d:function(){return o},k:function(){return r}})},5835:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var i=n(5608);function r(e,t){var n,r=Object.entries(null!==(n=t.integrations)&&void 0!==n?n:{}).reduce((function(e,t){var n,r,o=t[0],s=t[1];return"object"==typeof s?(0,i.Cl)((0,i.Cl)({},e),((n={})[o]=s,n)):(0,i.Cl)((0,i.Cl)({},e),((r={})[o]={},r))}),{});return Object.entries(e.integrations).reduce((function(e,t){var n,o=t[0],s=t[1];return(0,i.Cl)((0,i.Cl)({},e),((n={})[o]=(0,i.Cl)((0,i.Cl)({},s),r[o]),n))}),{})}},7106:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var i=n(5608),r=function(e,t){return(0,i.sH)(void 0,void 0,Promise,(function(){var n;return(0,i.YH)(this,(function(r){return n=function(r){return(0,i.sH)(void 0,void 0,Promise,(function(){var o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return e(r)?(o=n,[4,t()]):[3,2];case 1:return[2,o.apply(void 0,[i.sent()])];case 2:return[2]}}))}))},[2,n(void 0)]}))}))}},2911:function(e,t,n){"use strict";n.d(t,{I2:function(){return a},NH:function(){return c},YM:function(){return l},qQ:function(){return s}});var i,r=n(6091),o=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,s=function(e){var t=(0,r.kJ)();t&&(t._cdn=e),i=e},a=function(){var e,t=null!=i?i:null===(e=(0,r.kJ)())||void 0===e?void 0:e._cdn;if(t)return t;var n,s=(Array.prototype.slice.call(document.querySelectorAll("script")).forEach((function(e){var t,i=null!==(t=e.getAttribute("src"))&&void 0!==t?t:"",r=o.exec(i);r&&r[1]&&(n=r[1])})),n);return s||"https://cdn.aicactus.io"},l=function(){var e=a();return"".concat(e,"/next-integrations")};function c(){for(var e,t=void 0,n=0,i=Array.prototype.slice.call(document.querySelectorAll("script"));n<i.length;n++){var r=null!==(e=i[n].getAttribute("src"))&&void 0!==e?e:"",s=o.exec(r);if(s&&s[1]){t=r;break}}return t?t.replace("cip-sdk.v2.min.js","cip-sdk.min.js"):"https://sdk.aicactus.io/cip/cip-sdk.min.js"}},9732:function(e,t,n){"use strict";n.d(t,{x:function(){return p}});var i=n(5608),r=n(2939),o=n(8456),s=n(4082),a={getItem:function(){},setItem:function(){},removeItem:function(){}};try{a=(0,s.B)()&&window.localStorage?window.localStorage:a}catch(e){console.warn("Unable to access localStorage",e)}function l(e){var t=a.getItem(e);return(t?JSON.parse(t):[]).map((function(e){return new o.o(e.event,e.id)}))}function c(e){var t=a.getItem(e);return t?JSON.parse(t):{}}function u(e){a.removeItem(e)}function d(e,t,n){void 0===n&&(n=0);var i="persisted-queue:v1:".concat(e,":lock"),r=a.getItem(i),o=r?JSON.parse(r):null,s=null===o||function(e){return(new Date).getTime()>e}(o);if(s)return a.setItem(i,JSON.stringify((new Date).getTime()+50)),t(),void a.removeItem(i);!s&&n<3?setTimeout((function(){d(e,t,n+1)}),50):console.error("Unable to retrieve lock")}var p=function(e){function t(t,n){var r=e.call(this,t,[])||this,o="persisted-queue:v1:".concat(n,":items"),s="persisted-queue:v1:".concat(n,":seen"),p=[],h={};return d(n,(function(){try{p=l(o),h=c(s),u(o),u(s),r.queue=(0,i.fX)((0,i.fX)([],p,!0),r.queue,!0),r.seen=(0,i.Cl)((0,i.Cl)({},h),r.seen)}catch(e){console.error(e)}})),window.addEventListener("pagehide",(function(){if(r.todo>0){var e=(0,i.fX)((0,i.fX)([],r.queue,!0),r.future,!0);try{d(n,(function(){!function(e,t){var n=l(e),r=(0,i.fX)((0,i.fX)([],t,!0),n,!0).reduce((function(e,t){var n;return(0,i.Cl)((0,i.Cl)({},e),((n={})[t.id]=t,n))}),{});a.setItem(e,JSON.stringify(Object.values(r)))}(o,e),function(e,t){var n=c(e);a.setItem(e,JSON.stringify((0,i.Cl)((0,i.Cl)({},n),t)))}(s,r.seen)}))}catch(e){console.error(e)}}})),r}return(0,i.C6)(t,e),t}(r.M)},7536:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var i=n(4303);function r(e,t){var n=new i.Facade(e,t);return"track"===e.type&&(n=new i.Track(e,t)),"identify"===e.type&&(n=new i.Identify(e,t)),"page"===e.type&&(n=new i.Page(e,t)),"alias"===e.type&&(n=new i.Alias(e,t)),"group"===e.type&&(n=new i.Group(e,t)),"screen"===e.type&&(n=new i.Screen(e,t)),Object.defineProperty(n,"obj",{value:e,writable:!0}),n}},3831:function(e,t,n){"use strict";n.d(t,{J:function(){return r},X:function(){return o}});var i="npm";function r(e){i=e}function o(){return i}},1418:function(e,t,n){"use strict";n.r(t),n.d(t,{applyDestinationMiddleware:function(){return s},sourceMiddlewarePlugin:function(){return a}});var i=n(5608),r=n(9752),o=n(7536);function s(e,t,n){return(0,i.sH)(this,void 0,Promise,(function(){function r(t,n){return(0,i.sH)(this,void 0,Promise,(function(){var r,s,a;return(0,i.YH)(this,(function(l){switch(l.label){case 0:return r=!1,s=null,[4,n({payload:(0,o.W)(t,{clone:!0,traverse:!1}),integration:e,next:function(e){r=!0,null===e&&(s=null),e&&(s=e.obj)}})];case 1:return l.sent(),r||null===s||(s.integrations=(0,i.Cl)((0,i.Cl)({},t.integrations),((a={})[e]=!1,a))),[2,s]}}))}))}var s,a,l,c,u;return(0,i.YH)(this,(function(e){switch(e.label){case 0:s=(0,o.W)(t,{clone:!0,traverse:!1}).rawEvent(),a=0,l=n,e.label=1;case 1:return a<l.length?(c=l[a],[4,r(s,c)]):[3,4];case 2:if(null===(u=e.sent()))return[2,null];s=u,e.label=3;case 3:return a++,[3,1];case 4:return[2,s]}}))}))}function a(e,t){function n(n){return(0,i.sH)(this,void 0,Promise,(function(){var s;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return s=!1,[4,e({payload:(0,o.W)(n.event,{clone:!0,traverse:!1}),integrations:null!=t?t:{},next:function(e){s=!0,e&&(n.event=e.obj)}})];case 1:if(i.sent(),!s)throw new r.d({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}}))}))}return{name:"Source Middleware ".concat(e.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(e){return Promise.resolve(e)},track:n,page:n,identify:n,alias:n,group:n}}},7764:function(e,t,n){"use strict";function i(e,t){return new Promise((function(n,i){var r=setTimeout((function(){i(Error("Promise timed out"))}),t);e.then((function(e){return clearTimeout(r),n(e)})).catch(i)}))}function r(e,t,n){var r;return(r=n,new Promise((function(e){return setTimeout(e,r)}))).then((function(){return i(function(){try{return Promise.resolve(t(e))}catch(e){return Promise.reject(e)}}(),1e3)})).catch((function(t){null==e||e.log("warn","Callback Error",{error:t}),null==e||e.stats.increment("callback_error")})).then((function(){return e}))}n.d(t,{s2:function(){return i},w_:function(){return r}})},9752:function(e,t,n){"use strict";n.d(t,{d:function(){return l},j:function(){return c}});var i=n(9659),r=n(3435),o=n(5608),s=function(){function e(){this._logs=[]}return e.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(e.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),e.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce((function(e,t){var n,i,r,s=(0,o.Cl)((0,o.Cl)({},t),{json:JSON.stringify(t.extras,null," "),extras:t.extras});delete s.time;var a=null!==(r=null===(i=t.time)||void 0===i?void 0:i.toISOString())&&void 0!==r?r:"";return e[a]&&(a="".concat(a,"-").concat(Math.random())),(0,o.Cl)((0,o.Cl)({},e),((n={})[a]=s,n))}),{});console.table&&console.table(e)}else this.logs.forEach((function(e){var t=e.level,n=e.message,i=e.extras;"info"===t||"debug"===t||console[t](n,null!=i?i:"")}));this._logs=[]},e}(),a=n(4034),l=function(e){var t,n,i;this.retry=null===(t=e.retry)||void 0===t||t,this.type=null!==(n=e.type)&&void 0!==n?n:"plugin Error",this.reason=null!==(i=e.reason)&&void 0!==i?i:""},c=function(){function e(e,t,n,r){void 0===t&&(t=(0,i.v4)()),void 0===n&&(n=new a.r),void 0===r&&(r=new s),this.attempts=0,this.event=e,this._id=t,this.logger=r,this.stats=n}return e.system=function(){},e.prototype.isSame=function(e){return e.id===this.id},e.prototype.cancel=function(e){if(e)throw e;throw new l({reason:"Context Cancel"})},e.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateEvent=function(e,t){var n;if("integrations"===e.split(".")[0]){var i=e.split(".")[1];if(!1===(null===(n=this.event.integrations)||void 0===n?void 0:n[i]))return this.event}return(0,r.J)(this.event,e,t),this.event},e.prototype.failedDelivery=function(){return this._failedDelivery},e.prototype.setFailedDelivery=function(e){this._failedDelivery=e},e.prototype.logs=function(){return this.logger.logs},e.prototype.flush=function(){this.logger.flush(),this.stats.flush()},e.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},e}()},2939:function(e,t,n){"use strict";n.d(t,{g:function(){return o},M:function(){return s}});var i=n(5608),r=n(3255);var o="onRemoveFromFuture",s=function(e){function t(t,n,i){var r=e.call(this)||this;return r.future=[],r.maxAttempts=t,r.queue=n,r.seen=null!=i?i:{},r}return(0,i.C6)(t,e),t.prototype.push=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.map((function(t){return!(e.updateAttempts(t)>e.maxAttempts||e.includes(t))&&(e.queue.push(t),!0)}));return this.queue=this.queue.sort((function(t,n){return e.getAttempts(t)-e.getAttempts(n)})),i},t.prototype.pushWithBackoff=function(e,t){var n=this;if(void 0===t&&(t=0),0==t&&0===this.getAttempts(e))return this.push(e)[0];var i=this.updateAttempts(e);if(i>this.maxAttempts||this.includes(e))return!1;var r=function(e){var t=Math.random()+1,n=e.minTimeout,i=void 0===n?500:n,r=e.factor,o=void 0===r?2:r,s=e.attempt,a=e.maxTimeout,l=void 0===a?1/0:a;return Math.min(t*i*Math.pow(o,s),l)}({attempt:i-1});return t>0&&r<t&&(r=t),setTimeout((function(){n.queue.push(e),n.future=n.future.filter((function(t){return t.id!==e.id})),n.emit(o)}),r),this.future.push(e),!0},t.prototype.getAttempts=function(e){var t;return null!==(t=this.seen[e.id])&&void 0!==t?t:0},t.prototype.updateAttempts=function(e){return this.seen[e.id]=this.getAttempts(e)+1,this.getAttempts(e)},t.prototype.includes=function(e){return this.queue.includes(e)||this.future.includes(e)||Boolean(this.queue.find((function(t){return t.id===e.id})))||Boolean(this.future.find((function(t){return t.id===e.id})))},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(r.v)},2620:function(e,t,n){"use strict";n.d(t,{C:function(){return o},D:function(){return s}});var i=n(5608),r=n(9752);function o(e,t){e.log("debug","plugin",{plugin:t.name});var n=(new Date).getTime(),o=t[e.event.type];return void 0===o?Promise.resolve(e):function(e){return(0,i.sH)(this,void 0,void 0,(function(){var t;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:return t=n.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))}((function(){return o.apply(t,[e])})).then((function(e){var i=(new Date).getTime()-n;return e.stats.gauge("plugin_time",i,["plugin:".concat(t.name)]),e})).catch((function(n){if(n instanceof r.d&&"middleware_cancellation"===n.type)throw n;return n instanceof r.d?(e.log("warn",n.type,{plugin:t.name,error:n}),n):(e.log("error","plugin Error",{plugin:t.name,error:n}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)]),n)}))}function s(e,t){return o(e,t).then((function(t){if(t instanceof r.j)return t;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(t)}))}},4034:function(e,t,n){"use strict";n.d(t,{p:function(){return r},r:function(){return o}});var i=n(5608),r=function(){function e(){this.metrics=[]}return e.prototype.increment=function(e,t,n){void 0===t&&(t=1),this.metrics.push({metric:e,value:t,tags:null!=n?n:[],type:"counter",timestamp:Date.now()})},e.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:null!=n?n:[],type:"gauge",timestamp:Date.now()})},e.prototype.flush=function(){var e=this.metrics.map((function(e){return(0,i.Cl)((0,i.Cl)({},e),{tags:e.tags.join(",")})}));console.table&&console.table(e),this.metrics=[]},e.prototype.serialize=function(){return this.metrics.map((function(e){return{m:e.metric,v:e.value,t:e.tags,k:(t=e.type,{gauge:"g",counter:"c"}[t]),e:e.timestamp};var t}))},e}(),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.C6)(t,e),t.prototype.gauge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.increment=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.flush=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.serialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[]},t}(r)},441:function(e,t,n){"use strict";function i(e){return"string"==typeof e}function r(e){return"number"==typeof e}function o(e){return"function"==typeof e}function s(e){return null!=e}function a(e){return"object"===Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}n.d(t,{Et:function(){return r},Kg:function(){return i},Qd:function(){return a},Tn:function(){return o},t2:function(){return s}})},8115:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var i=function(){var e,t,n=!1,i=new Promise((function(i,r){e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n=!0,i.apply(void 0,e)},t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n=!0,r.apply(void 0,e)}}));return{resolve:e,reject:t,promise:i,isSettled:function(){return n}}}},3255:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var i=function(){function e(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=null!==(t=null==e?void 0:e.maxListeners)&&void 0!==t?t:10}return e.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},e.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},e.prototype.once=function(e,t){var n=this,i=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.off(e,i),t.apply(n,r)};return this.on(e,i),this},e.prototype.off=function(e,t){var n,i=(null!==(n=this.callbacks[e])&&void 0!==n?n:[]).filter((function(e){return e!==t}));return this.callbacks[e]=i,this},e.prototype.emit=function(e){for(var t,n=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return(null!==(t=this.callbacks[e])&&void 0!==t?t:[]).forEach((function(e){e.apply(n,i)})),this},e}()},9659:function(e,t,n){"use strict";n.d(t,{v4:function(){return s}});for(var i,r=256,o=[];r--;)o[r]=(r+256).toString(16).substring(1);function s(){var e,t=0,n="";if(!i||r+16>256){for(i=Array(t=256);t--;)i[t]=256*Math.random()|0;t=r=0}for(;t<16;t++)e=i[r+t],n+=6==t?o[15&e|64]:8==t?o[63&e|128]:o[e],1&t&&t>1&&t<11&&(n+="-");return r++,n}},3435:function(e,t,n){"use strict";function i(e,t,n){t.split&&(t=t.split("."));for(var i,r,o=0,s=t.length,a=e;o<s&&"__proto__"!=(r=""+t[o++])&&"constructor"!==r&&"prototype"!==r;)a=a[r]=o===s?n:typeof(i=a[r])==typeof t?i:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}n.d(t,{J:function(){return i}})},5608:function(e,t,n){"use strict";n.d(t,{C6:function(){return r},Cl:function(){return o},Tt:function(){return s},YH:function(){return l},fX:function(){return c},sH:function(){return a}});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function l(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function c(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,s),n.exports}s.m=r,s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},s.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var r=Object.create(null);s.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},s.d(r,o),r},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,n){return s.f[n](e,t),t}),[]))},s.u=function(e){return({10:"tsub-middleware",50:"ajs-destination",104:"schemaFilter",248:"auto-track",521:"remoteMiddleware",538:"queryString",694:"legacyVideos"}[e]||e)+".bundle."+{10:"7a0090e58d9073263c26",50:"f557389d2fdad069e667",104:"2ca9185eab8c93fc938c",248:"9173d1840c6a6d34ca0e",407:"16d859df800fbcc8ab8d",521:"707da2ed4da4b3f2adf2",538:"5285cd94fb442b5135a9",694:"0d14c5b94333f5448a2a"}[e]+".js"},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},i="@nguyenquan241208/analytics-browser:",s.l=function(e,t,r,o){if(n[e])n[e].push(t);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+r){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",i+r),a.src=e),n[e]=[t];var p=function(t,i){a.onerror=a.onload=null,clearTimeout(h);var r=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(i)})),t)return t(i)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="",function(){var e={362:0};s.f.j=function(t,n){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(n,r){i=e[t]=[n,r]}));n.push(i[2]=r);var o=s.p+s.u(t),a=new Error;s.l(o,(function(n){if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var i,r,o=n[0],a=n[1],l=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(l)l(s)}for(t&&t(n);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunk_nguyenquan241208_analytics_browser=self.webpackChunk_nguyenquan241208_analytics_browser||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();!function(){"use strict";var e=s(5608),t=s(2911),n=s(3831);function i(){return"undefined"!=typeof process&&process.env?process.env:{}}var r=s(3858),o=s(441);function a(e,t,n,i){var r,s=[e,t,n,i],a=(0,o.Qd)(e)?e.event:e;if(!a||!(0,o.Kg)(a))throw new Error("Event missing");var l=(0,o.Qd)(e)?null!==(r=e.properties)&&void 0!==r?r:{}:(0,o.Qd)(t)?t:{},c={};return(0,o.Tn)(n)||(c=null!=n?n:{}),(0,o.Qd)(e)&&!(0,o.Tn)(t)&&(c=null!=t?t:{}),[a,l,c,s.find(o.Tn)]}function l(e,t,n,i,r){var s,a,l=null,c=null,u=[e,t,n,i,r],d=u.filter(o.Kg);void 0!==d[0]&&void 0!==d[1]&&(l=d[0],c=d[1]),1===d.length&&(l=null,c=d[0]);var p=u.find(o.Tn),h=u.filter((function(e){return null===c?(0,o.Qd)(e):(0,o.Qd)(e)||null===e})),f=null!==(s=h[0])&&void 0!==s?s:{},v=null!==(a=h[1])&&void 0!==a?a:{};return[l,c,f,v,p]}var c=function(e){return function(){for(var t,n,i,r,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];for(var l={},c=["callback","options","properties","traits","id"],u=0,d=s;u<d.length;u++){var p=d[u],h=c.pop();if("id"===h){if((0,o.Kg)(p)||(0,o.Et)(p)){l.id=p.toString();continue}if(null==p)continue;h=c.pop()}if("traits"!==h&&"options"!==h||null!=p&&!(0,o.Qd)(p)||(l[h]=p),"properties"!==h||null!==p&&!(0,o.Qd)(p)||(l.properties=p),(0,o.Tn)(p)){l.callback=p;break}}return[null!==(t=l.id)&&void 0!==t?t:e.id(),null!==(n=l.traits)&&void 0!==n?n:{},null!==(i=l.properties)&&void 0!==i?i:{},null!==(r=l.options)&&void 0!==r?r:{},l.callback]}};function u(e,t,n,i){(0,o.Et)(e)&&(e=e.toString()),(0,o.Et)(t)&&(t=t.toString());var r=[e,t,n,i],s=r.filter(o.Kg),a=s[0],l=void 0===a?e:a,c=s[1],u=void 0===c?null:c,d=r.filter(o.Qd)[0];return[l,u,void 0===d?{}:d,r.find(o.Tn)]}function d(e,t,n,i){var r=[e,n,i],s=r.filter(o.Kg),a=s[0],l=void 0===a?e:a,c=s[1],u=void 0===c?t:c,d=r.filter(o.Qd)[0];return[l,u,void 0===d?{}:d,r.find(o.Tn)]}var p=s(6789),h=s(8456),f=s(7764);function v(t,n,i,r){return(0,e.sH)(this,void 0,void 0,(function(){var o,s;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return i.emit("dispatch_start",t),o=Date.now(),n.isEmpty()?[4,n.dispatchSingle(t)]:[3,2];case 1:return s=e.sent(),[3,4];case 2:return[4,n.dispatch(t)];case 3:s=e.sent(),e.label=4;case 4:return(null==r?void 0:r.callback)?[4,(0,f.w_)(s,r.callback,(a=o,l=r.timeout,c=Date.now()-a,Math.max((null!=l?l:300)-c,0)))]:[3,6];case 5:s=e.sent(),e.label=6;case 6:return(null==r?void 0:r.debug)&&s.flush(),[2,s]}var a,l,c}))}))}var y=s(3255),m=s(9659);var g=function(e,t,n,i,r,o){return{__t:"bpc",c:t,p:i,u:e,s:n,t:r,r:o}},b=Object.keys(g("","","","","",""));var C=function(e){var t,n,i=e.c,r=e.p,o=e.s,s=e.u,a=e.r,l=e.t,c=i?function(e){try{return new URL(e).pathname}catch(t){return"/"===e[0]?e:"/"+e}}(i):r,u=i?function(e,t){return e.indexOf("?")>-1?e:e+t}(i,o):-1===(n=(t=s).indexOf("#"))?t:t.slice(0,n);return{path:c,referrer:a,search:o,title:l,url:u}},w=function(){var e=document.querySelector("link[rel='canonical']");return g(location.href,e&&e.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},I=function(t,n){void 0===n&&(n=C(w()));var i,r,o,s=t.context;"page"===t.type&&(i=t.properties&&(r=t.properties,o=Object.keys(n),Object.assign.apply(Object,(0,e.fX)([{}],o.map((function(e){var t;if(r&&Object.prototype.hasOwnProperty.call(r,e))return(t={})[e]=r[e],t})),!1))),t.properties=(0,e.Cl)((0,e.Cl)((0,e.Cl)({},n),t.properties),t.name?{name:t.name}:{})),s.page=(0,e.Cl)((0,e.Cl)((0,e.Cl)({},n),i),s.page)},S=s(3435),_=function(t){function n(e,n){var i=t.call(this,"".concat(e," ").concat(n))||this;return i.field=e,i}return(0,e.C6)(n,t),n}(Error),x="is not a string",A="is not an object",E="is nil";function P(e){!function(e){if(!(0,o.t2)(e))throw new _("Event",E);if("object"!=typeof e)throw new _("Event",A)}(e),function(e){if(!(0,o.Kg)(e.type))throw new _(".type",x)}(e),function(e){if(!(0,o.Kg)(e.messageId))throw new _(".messageId",x)}(e),"track"===e.type&&(function(e){if(!(0,o.Kg)(e.event))throw new _(".event",x)}(e),function(e){if(!(0,o.Qd)(e.properties))throw new _(".properties",A)}(e)),["group","identify"].includes(e.type)&&function(e){if(!(0,o.Qd)(e.traits))throw new _(".traits",A)}(e)}var k=function(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=null!==(t=e.onEventMethodCall)&&void 0!==t?t:function(){},this.onFinishedEvent=null!==(n=e.onFinishedEvent)&&void 0!==n?n:function(){}},B=function(){function t(e){this.settings=new k(e)}return t.prototype.track=function(t,n,i,r){return this.settings.onEventMethodCall({type:"track",options:i}),this.normalize((0,e.Cl)((0,e.Cl)({},this.baseEvent()),{event:t,type:"track",properties:null!=n?n:{},options:(0,e.Cl)({},i),integrations:(0,e.Cl)({},r)}))},t.prototype.page=function(t,n,i,r,o){var s;this.settings.onEventMethodCall({type:"page",options:r});var a={type:"page",properties:(0,e.Cl)({},i),options:(0,e.Cl)({},r),integrations:(0,e.Cl)({},o)};return null!==t&&(a.category=t,a.properties=null!==(s=a.properties)&&void 0!==s?s:{},a.properties.category=t),null!==n&&(a.name=n),this.normalize((0,e.Cl)((0,e.Cl)({},this.baseEvent()),a))},t.prototype.screen=function(t,n,i,r,o){this.settings.onEventMethodCall({type:"screen",options:r});var s={type:"screen",properties:(0,e.Cl)({},i),options:(0,e.Cl)({},r),integrations:(0,e.Cl)({},o)};return null!==t&&(s.category=t),null!==n&&(s.name=n),this.normalize((0,e.Cl)((0,e.Cl)({},this.baseEvent()),s))},t.prototype.identify=function(t,n,i,r,o){return this.settings.onEventMethodCall({type:"identify",options:r}),this.normalize((0,e.Cl)((0,e.Cl)({},this.baseEvent()),{type:"identify",userId:t,traits:null!=n?n:{},properties:null!=i?i:{},options:(0,e.Cl)({},r),integrations:o}))},t.prototype.group=function(t,n,i,r,o){return this.settings.onEventMethodCall({type:"group",options:r}),this.normalize((0,e.Cl)((0,e.Cl)({},this.baseEvent()),{type:"group",traits:null!=n?n:{},properties:null!=i?i:{},options:(0,e.Cl)({},r),integrations:(0,e.Cl)({},o),groupId:t}))},t.prototype.alias=function(t,n,i,r){this.settings.onEventMethodCall({type:"alias",options:i});var o={userId:t,type:"alias",options:(0,e.Cl)({},i),integrations:(0,e.Cl)({},r)};return null!==n&&(o.previousId=n),void 0===t?this.normalize((0,e.Cl)((0,e.Cl)({},o),this.baseEvent())):this.normalize((0,e.Cl)((0,e.Cl)({},this.baseEvent()),o))},t.prototype.delivery=function(t,n,i){this.settings.onEventMethodCall({type:"delivery",options:i});var r={type:"delivery",deliveryCode:t,deliverySecretKey:n,options:(0,e.Cl)({},i)};return this.normalize((0,e.Cl)({},r))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),r=null!==(t=e.context)&&void 0!==t?t:{},o={};return i.forEach((function(t){"context"!==t&&(n.includes(t)?(0,S.J)(o,t,e[t]):(0,S.J)(r,t,e[t]))})),[r,o]},t.prototype.normalize=function(t){var n,i,r,o,s=Object.keys(null!==(n=t.integrations)&&void 0!==n?n:{}).reduce((function(n,i){var r,o;return(0,e.Cl)((0,e.Cl)({},n),((r={})[i]=Boolean(null===(o=t.integrations)||void 0===o?void 0:o[i]),r))}),{});t.options=(r=t.options||{},o=function(e,t){return void 0!==t},Object.keys(r).filter((function(e){return o(e,r[e])})).reduce((function(e,t){return e[t]=r[t],e}),{}));var a=(0,e.Cl)((0,e.Cl)({},s),null===(i=t.options)||void 0===i?void 0:i.integrations),l=t.options?this.context(t.options):[],c=l[0],u=l[1],d=t.options,p=(0,e.Tt)(t,["options"]),h=(0,e.Cl)((0,e.Cl)((0,e.Cl)((0,e.Cl)({timestamp:new Date},p),{context:c,integrations:a}),u),{messageId:d.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(h),P(h),h},t}(),T=function(t){function n(e){var n=t.call(this,{createMessageId:function(){return"aic-".concat(Date.now(),"-").concat((0,m.v4)())},onEventMethodCall:function(e){var t=e.options;n.maybeUpdateAnonId(t)},onFinishedEvent:function(e){return n.addIdentity(e),e}})||this;return n.user=e,n}return(0,e.C6)(n,t),n.prototype.maybeUpdateAnonId=function(e){(null==e?void 0:e.anonymousId)&&this.user.anonymousId(e.anonymousId)},n.prototype.addIdentity=function(e){this.user.id()&&(e.userId=this.user.id()),this.user.anonymousId()&&(e.anonymousId=this.user.anonymousId())},n.prototype.track=function(e,n,i,r,o){var s=t.prototype.track.call(this,e,n,i,r);return I(s,o),s},n.prototype.page=function(e,n,i,r,o,s){var a=t.prototype.page.call(this,e,n,i,r,o);return I(a,s),a},n.prototype.screen=function(e,n,i,r,o,s){var a=t.prototype.screen.call(this,e,n,i,r,o);return I(a,s),a},n.prototype.identify=function(e,n,i,r,o,s){var a=t.prototype.identify.call(this,e,n,i,r,o);return I(a,s),a},n.prototype.group=function(e,n,i,r,o,s){var a=t.prototype.group.call(this,e,n,i,r,o);return I(a,s),a},n.prototype.alias=function(e,n,i,r,o){var s=t.prototype.alias.call(this,e,n,i,r);return I(s,o),s},n.prototype.delivery=function(e,n,i,r){var o=t.prototype.delivery.call(this,e,n,i);return I(o,r),o},n}(B),N=function(e){return"addMiddleware"in e&&"destination"===e.type},L=s(9732);var D=s(2939),O=s(9752),M=s(2620),H=function(t){function n(e){var n,i,r,o=t.call(this)||this;return o.criticalTasks=(r=0,{done:function(){return n},run:function(e){var t,o=e();return"object"==typeof(t=o)&&null!==t&&"then"in t&&"function"==typeof t.then&&(1==++r&&(n=new Promise((function(e){return i=e}))),o.finally((function(){return 0==--r&&i()}))),o}}),o.plugins=[],o.failedInitializations=[],o.flushing=!1,o.queue=e,o.queue.on(D.g,(function(){o.scheduleFlush(0)})),o}return(0,e.C6)(n,t),n.prototype.register=function(t,n,i){return(0,e.sH)(this,void 0,void 0,(function(){var r,o,s=this;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return this.plugins.push(n),r=function(e){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,e),t.log("warn","Failed to load destination",{plugin:n.name,error:e}),s.plugins=s.plugins.filter((function(e){return e!==n}))},"destination"!==n.type||"Segment.io"===n.name?[3,1]:(n.load(t,i).catch(r),[3,4]);case 1:return e.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return e.sent(),[3,4];case 3:return o=e.sent(),r(o),[3,4];case 4:return[2]}}))}))},n.prototype.deregister=function(t,n,i){return(0,e.sH)(this,void 0,void 0,(function(){var r;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.plugins=this.plugins.filter((function(e){return e.name!==n.name})),[3,4];case 3:return r=e.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:r}),[3,4];case 4:return[2]}}))}))},n.prototype.dispatch=function(t){return(0,e.sH)(this,void 0,void 0,(function(){var n;return(0,e.YH)(this,(function(e){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]}))}))},n.prototype.subscribeToDelivery=function(t){return(0,e.sH)(this,void 0,void 0,(function(){var n=this;return(0,e.YH)(this,(function(e){return[2,new Promise((function(e){var i=function(r,o){r.isSame(t)&&(n.off("flush",i),e(r))};n.on("flush",i)}))]}))}))},n.prototype.dispatchSingle=function(t){return(0,e.sH)(this,void 0,void 0,(function(){var n=this;return(0,e.YH)(this,(function(e){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch((function(e){return n.enqueuRetry(e,t)?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:e}),t)}))]}))}))},n.prototype.isEmpty=function(){return 0===this.queue.length},n.prototype.scheduleFlush=function(e){var t=this;void 0===e&&(e=500),this.flushing||(this.flushing=!0,setTimeout((function(){t.flush().then((function(){setTimeout((function(){t.flushing=!1,t.queue.length&&t.scheduleFlush(0)}),0)}))}),e))},n.prototype.deliver=function(t){return(0,e.sH)(this,void 0,void 0,(function(){var n,i,r,o;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,this.criticalTasks.done()];case 1:e.sent(),n=Date.now(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=e.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw r=e.sent(),o=r,t.log("error","Failed to deliver",o),this.emit("delivery_failure",t,o),t.stats.increment("delivery_failed"),r;case 5:return[2]}}))}))},n.prototype.enqueuRetry=function(e,t){return!(e instanceof O.d&&!e.retry)&&this.queue.pushWithBackoff(t)},n.prototype.flush=function(){return(0,e.sH)(this,void 0,void 0,(function(){var t,n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(0===this.queue.length)return[2,[]];if(!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=e.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=e.sent(),this.enqueuRetry(n,t)||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}}))}))},n.prototype.isReady=function(){return!0},n.prototype.availableExtensions=function(t){var n,i,r=this.plugins.filter((function(e){var n,i,r;if("destination"!==e.type&&"Segment.io"!==e.name)return!0;var o=void 0;return null===(n=e.alternativeNames)||void 0===n||n.forEach((function(e){void 0!==t[e]&&(o=t[e])})),null!==(r=null!==(i=t[e.name])&&void 0!==i?i:o)&&void 0!==r?r:!1!==("Segment.io"===e.name||t.All)})),o=(n="type",i={},r.forEach((function(t){var r,o=void 0;if("string"==typeof n){var s=t[n];o="string"!=typeof s?JSON.stringify(s):s}else n instanceof Function&&(o=n(t));void 0!==o&&(i[o]=(0,e.fX)((0,e.fX)([],null!==(r=i[o])&&void 0!==r?r:[],!0),[t],!1))})),i),s=o.before,a=void 0===s?[]:s,l=o.enrichment,c=void 0===l?[]:l,u=o.destination,d=void 0===u?[]:u,p=o.after;return{before:a,enrichment:c,destinations:d,after:void 0===p?[]:p}},n.prototype.flushOne=function(t){return(0,e.sH)(this,void 0,void 0,(function(){var n,i,r,o,s,a,l,c,u,d,p,h,f,v,y,m;return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),n=this.availableExtensions(null!==(y=t.event.integrations)&&void 0!==y?y:{}),i=n.before,r=n.enrichment,o=0,s=i,e.label=1;case 1:return o<s.length?(a=s[o],[4,(0,M.D)(t,a)]):[3,4];case 2:(d=e.sent())instanceof O.j&&(t=d),this.emit("message_enriched",t,a),e.label=3;case 3:return o++,[3,1];case 4:l=0,c=r,e.label=5;case 5:return l<c.length?(u=c[l],[4,(0,M.C)(t,u)]):[3,8];case 6:(d=e.sent())instanceof O.j&&(t=d),this.emit("message_enriched",t,u),e.label=7;case 7:return l++,[3,5];case 8:return p=this.availableExtensions(null!==(m=t.event.integrations)&&void 0!==m?m:{}),h=p.destinations,f=p.after,[4,new Promise((function(e,n){setTimeout((function(){var i=h.map((function(e){return(0,M.C)(t,e)}));Promise.all(i).then(e).catch(n)}),0)}))];case 9:return e.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),v=f.map((function(e){return(0,M.C)(t,e)})),[4,Promise.all(v)];case 10:return e.sent(),[2,t]}}))}))},n}(y.v),G=function(t){function n(e){return t.call(this,"string"==typeof e?new L.x(4,e):e)||this}return(0,e.C6)(n,t),n.prototype.flush=function(){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){return(0,p.a)()?[2,[]]:[2,t.prototype.flush.call(this)]}))}))},n}(H);function R(e){for(var t=e.constructor.prototype,n=0,i=Object.getOwnPropertyNames(t);n<i.length;n++){var r=i[n];if("constructor"!==r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);o&&"function"==typeof o.value&&(e[r]=e[r].bind(e))}}return e}var F={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},U=function(e,t,n,i){console.warn("".concat(e.constructor.name,": Can't ").concat(t,' key "').concat(n,'" | Err: ').concat(i))},j=function(){function e(e){this.stores=e}return e.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var r=i[n];try{if(null!=(t=r.get(e)))return t}catch(t){U(r,"get",e,t)}}return null},e.prototype.set=function(e,t){this.stores.forEach((function(n){try{n.set(e,t)}catch(t){U(n,"set",e,t)}}))},e.prototype.clear=function(e){this.stores.forEach((function(t){try{t.remove(e)}catch(n){U(t,"remove",e,n)}}))},e.prototype.getAndSync=function(e){var t=this.get(e),n="number"==typeof t?t.toString():t;return this.set(e,n),n},e}(),V=function(){function e(){this.cache={}}return e.prototype.get=function(e){var t;return null!==(t=this.cache[e])&&void 0!==t?t:null},e.prototype.set=function(e,t){this.cache[e]=t},e.prototype.remove=function(e){delete this.cache[e]},e}();function K(e){return e&&e.stores&&Array.isArray(e.stores)&&e.stores.every((function(e){return Object.values(F).includes(e)}))}function z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var Y=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=z({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in r)r[s]&&(o+="; "+s,!0!==r[s]&&(o+="="+r[s].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+o}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var o=n[r].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(i[a]=t.read(s,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",z({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,z({},this.attributes,t))},withConverter:function(t){return e(z({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function q(e){var t=function(e){try{return new URL(e)}catch(e){return}}(e);if(t)for(var n=function(e){var t=e.hostname.split("."),n=t[t.length-1],i=[];if(4===t.length&&parseInt(n,10)>0)return i;if(t.length<=1)return i;for(var r=t.length-2;r>=0;--r)i.push(t.slice(r).join("."));return i}(t),i=0;i<n.length;++i){var r="__tld__",o=n[i],s={domain:"."+o};try{if(Y.set(r,"1",s),Y.get(r))return Y.remove(r,s),o}catch(e){return}}}var W=function(){function t(n){void 0===n&&(n=t.defaults),this.options=(0,e.Cl)((0,e.Cl)({},t.defaults),n)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:q(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(e){var t;try{var n=Y.get(e);if(null==n)return null;try{return null!==(t=JSON.parse(n))&&void 0!==t?t:null}catch(e){return null!=n?n:null}}catch(e){return null}},t.prototype.set=function(e,t){"string"==typeof t?Y.set(e,t,this.opts()):null===t?Y.remove(e,this.opts()):Y.set(e,JSON.stringify(t),this.opts())},t.prototype.remove=function(e){return Y.remove(e,this.opts())},t}(),J=function(){function e(){}return e.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(String(e),", localStorage may be ").concat(t))},e.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(null===n)return null;try{return null!==(t=JSON.parse(n))&&void 0!==t?t:null}catch(e){return null!=n?n:null}}catch(t){return this.localStorageWarning(e,"unavailable"),null}},e.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){this.localStorageWarning(e,"full")}},e.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch(t){this.localStorageWarning(e,"unavailable")}},e}();function Q(e){return e.map((function(e){var t,n;switch(!function(e){return"object"==typeof e&&void 0!==e.name}(e)?t=e:(t=e.name,n=e.settings),t){case F.Cookie:return new W(n);case F.LocalStorage:return new J;case F.Memory:return new V;default:throw new Error("Unknown Store Type: ".concat(e))}}))}function X(e,t){return e.map((function(e){return t&&e===F.Cookie?{name:e,settings:t}:e}))}var $={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},Z=function(){function t(t,n){void 0===t&&(t=$);var i,r,o,s,a=this;this.options={},this.id=function(e){if(a.options.disable)return null;var t=a.identityStore.getAndSync(a.idKey);void 0!==e&&(a.identityStore.set(a.idKey,e),e!==t&&null!==t&&null!==e&&a.anonymousId(null));var n=a.identityStore.getAndSync(a.idKey);if(n)return n;var i=a.legacyUserStore.get($.cookie.oldKey);return i?"object"==typeof i?i.id:i:null},this.anonymousId=function(e){var t,n;if(a.options.disable)return null;if(void 0===e){var i=null!==(t=a.identityStore.getAndSync(a.anonKey))&&void 0!==t?t:null===(n=a.legacySIO())||void 0===n?void 0:n[0];if(i)return i}return null===e?(a.identityStore.set(a.anonKey,null),a.identityStore.getAndSync(a.anonKey)):(a.identityStore.set(a.anonKey,null!=e?e:(0,m.v4)()),a.identityStore.getAndSync(a.anonKey))},this.traits=function(e){var t;if(!a.options.disable)return null===e&&(e={}),e&&a.traitsStore.set(a.traitsKey,null!=e?e:{}),null!==(t=a.traitsStore.get(a.traitsKey))&&void 0!==t?t:{}},this.options=(0,e.Cl)((0,e.Cl)({},$),t),this.cookieOptions=n,this.idKey=null!==(r=null===(i=t.cookie)||void 0===i?void 0:i.key)&&void 0!==r?r:$.cookie.key,this.traitsKey=null!==(s=null===(o=t.localStorage)||void 0===o?void 0:o.key)&&void 0!==s?s:$.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,n),this.legacyUserStore=this.createStorage(this.options,n,(function(e){return e===F.Cookie})),this.traitsStore=this.createStorage(this.options,n,(function(e){return e!==F.Cookie}));var l=this.legacyUserStore.get($.cookie.oldKey);l&&"object"==typeof l&&(l.id&&this.id(l.id),l.traits&&this.traits(l.traits)),R(this)}return t.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----");return[t[0],t[1]]},t.prototype.identify=function(t,n){if(!this.options.disable){n=null!=n?n:{};var i=this.id();null!==i&&i!==t||(n=(0,e.Cl)((0,e.Cl)({},this.traits()),n)),t&&this.id(t),this.traits(n)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(e,t,n){var i=[F.LocalStorage,F.Cookie,F.Memory];return e.disable?new j([]):e.persist?(void 0!==e.storage&&null!==e.storage&&K(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter((function(e){return e!==F.LocalStorage}))),n&&(i=i.filter(n)),new j(Q(X(i,t)))):new j([new V])},t.defaults=$,t}(),ee={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},te=function(t){function n(n,i){void 0===n&&(n=ee);var r=t.call(this,(0,e.Cl)((0,e.Cl)({},ee),n),i)||this;return r.anonymousId=function(e){},R(r),r}return(0,e.C6)(n,t),n}(Z),ne=s(6452),ie=s(5120),re=s(6091),oe=function(e,t,n){n.getAndRemove(e).forEach((function(e){fe(t,e).catch(console.error)}))},se=function(t,n){return(0,e.sH)(void 0,void 0,void 0,(function(){var i,r,o;return(0,e.YH)(this,(function(e){switch(e.label){case 0:i=0,r=n.getAndRemove("addSourceMiddleware"),e.label=1;case 1:return i<r.length?(o=r[i],[4,fe(t,o).catch(console.error)]):[3,4];case 2:e.sent(),e.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},ae=function(t,n){return(0,e.sH)(void 0,void 0,void 0,(function(){var i,r,o;return(0,e.YH)(this,(function(e){switch(e.label){case 0:i=0,r=n.getAndRemove("register"),e.label=1;case 1:return i<r.length?(o=r[i],[4,fe(t,o).catch(console.error)]):[3,4];case 2:e.sent(),e.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},le=oe.bind(void 0,"on"),ce=oe.bind(void 0,"setAnonymousId"),ue=function(e){if(de(e)){var t=e.pop();return C(t)}},de=function(e){return function(e){if(!(0,o.Qd)(e))return!1;if("bpc"!==e.__t)return!1;for(var t in e)if(!b.includes(t))return!1;return!0}(e[e.length-1])},pe=function(e,t,n,i){void 0===n&&(n=function(){}),void 0===i&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t},he=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),t.prototype.get=function(e){var t;return null!==(t=this.calls[e])&&void 0!==t?t:[]},t.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},t.prototype.add=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach((function(n){["track","screen","alias","group","page","identify"].includes(n.method)&&!de(n.args)&&(n.args=(0,e.fX)((0,e.fX)([],n.args,!0),[w()],!1)),t.calls[n.method]?t.calls[n.method].push(n):t.calls[n.method]=[n]}))},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){if("npm"!==(0,n.X)()){var e=(0,re.kJ)();if(Array.isArray(e)){var t=e.splice(0,e.length).map((function(e){var t=e[0],n=e.slice(1);return new pe(t,n)}));this.add.apply(this,t)}}},t}();function fe(t,n){return(0,e.sH)(this,void 0,Promise,(function(){var i,r;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),n.called?[2,void 0]:(n.called=!0,i=t[n.method].apply(t,n.args),"object"==typeof(o=i)&&null!==o&&"then"in o&&"function"==typeof o.then?[4,i]:[3,2]);case 1:e.sent(),e.label=2;case 2:return n.resolve(i),[3,4];case 3:return r=e.sent(),n.reject(r),[3,4];case 4:return[2]}var o}))}))}var ve=function(){function e(e){var t=this;this.handleAcceptAllConsent=this._createMethod("handleAcceptAllConsent"),this.handleAcceptNecessaryConsent=this._createMethod("handleAcceptNecessaryConsent"),this.handleConfirmCustomizeSettingConsent=this._createMethod("handleConfirmCustomizeSettingConsent"),this.getDataConsent=this._createMethod("getDataConsent"),this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.delivery=this._createMethod("delivery"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=ne.r,this._preInitBuffer=new he,this._promise=e(this._preInitBuffer),this._promise.then((function(e){var n=e[0],i=e[1];t.instance=n,t.ctx=i})).catch((function(){}))}return e.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},e.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},e.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},e.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(t.instance){var o=(n=t.instance)[e].apply(n,i);return Promise.resolve(o)}return new Promise((function(n,r){t._preInitBuffer.add(new pe(e,i,n,r))}))}},e.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new pe(e,i)),t)}},e}(),ye=s(8970),me=function(){function t(e,t){this.container=null,this.responseContext=e,this.deliveryOptions=t}return t.prototype.createContainer=function(){this.container||(this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.zIndex="9999",document.body.appendChild(this.container))},t.prototype.createNotificationElement=function(e,t,n,i){var r=document.createElement("div");r.style.position="relative",r.style.backgroundColor="white",r.style.borderRadius="4px",r.style.padding="16px",r.style.marginBottom="10px",r.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",r.style.transition="opacity 0.3s, transform 0.3s",r.style.opacity="0",r.style.transform="translateY(10px)",r.style.cursor=n?"pointer":"default",r.style.maxWidth="300px";var o=document.createElement("h3");o.textContent=e,o.style.margin="0",o.style.marginBottom="8px",o.style.fontSize="16px",o.style.fontWeight="bold";var s=document.createElement("p");if(s.textContent=t,s.style.margin="0",s.style.marginBottom="12px",s.style.fontSize="14px",r.appendChild(o),r.appendChild(s),i){var a=this.createProductElement(i);r.appendChild(a)}var l=document.createElement("button");return l.textContent="",l.style.position="absolute",l.style.top="8px",l.style.right="8px",l.style.border="none",l.style.background="none",l.style.fontSize="20px",l.style.cursor="pointer",l.style.color="#999",r.appendChild(l),n&&r.addEventListener("click",(function(e){e.target!==l&&n()})),r},t.prototype.createProductElement=function(e){var t,n,i,r,o,s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.marginTop="8px",s.style.paddingTop="8px",s.style.borderTop="1px solid #eee";var a=document.createElement("img");a.src=null!==(n=null===(t=e.image)||void 0===t?void 0:t.url)&&void 0!==n?n:"",a.alt=null!==(r=null===(i=e.image)||void 0===i?void 0:i.name)&&void 0!==r?r:"",a.style.width="50px",a.style.height="50px",a.style.objectFit="cover",a.style.borderRadius="4px",a.style.marginRight="12px";var l=document.createElement("div"),c=document.createElement("p");c.textContent=null!==(o=e.name)&&void 0!==o?o:"",c.style.margin="0",c.style.fontSize="14px",c.style.fontWeight="bold";var u=document.createElement("p");return u.textContent="ID: ".concat(e.external_product_id),u.style.margin="0",u.style.fontSize="12px",u.style.color="#666",l.appendChild(c),l.appendChild(u),s.appendChild(a),s.appendChild(l),s},t.prototype.setPosition=function(e){if(this.container){var t=e.split("-"),n=t[0],i=t[1];this.container.style.top="top"===n?"20px":"auto",this.container.style.bottom="bottom"===n?"20px":"auto",this.container.style.left="left"===i?"20px":"auto",this.container.style.right="right"===i?"20px":"auto","center"===i&&(this.container.style.left="50%",this.container.style.transform="translateX(-50%)")}},t.prototype.removeNotification=function(e,t){var n=this;e.style.opacity="0",e.style.transform="translateY(10px)",setTimeout((function(){e.parentNode&&e.parentNode.removeChild(e),n.container&&0===n.container.childNodes.length&&(document.body.removeChild(n.container),n.container=null),t&&t()}),300)},t.prototype.setupViewTracking=function(e,t){if(t){var n=null,i=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?n=window.setTimeout((function(){t(),i.disconnect()}),2e3):n&&(clearTimeout(n),n=null)}))}),{threshold:.5});i.observe(e)}},t.prototype.request=function(t){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,(0,ye.h)(t,{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return e.sent(),[2]}}))}))},t.prototype.show=function(e,t,n){var i=this,r=n.position,o=void 0===r?"top-right":r,s=n.duration,a=void 0===s?3e5:s,l=n.onClick,c=n.onClose,u=n.onView,d=n.onImpression,p=n.product;this.createContainer(),this.setPosition(o);var h=this.createNotificationElement(e,t,l,p);this.container&&(this.container.appendChild(h),d&&setTimeout(d,0)),h.offsetHeight,h.style.opacity="1",h.style.transform="translateY(0)",this.setupViewTracking(h,u);var f=h.querySelector("button");return f&&f.addEventListener("click",(function(e){e.stopPropagation(),i.removeNotification(h,c)})),a>0&&setTimeout((function(){return i.removeNotification(h,c)}),a),{close:function(){return i.removeNotification(h,c)}}},t.prototype.process=function(){var t,n,i=this;if(!this.responseContext.delivery_type)return console.warn("Delivery type is not defined"),null;if(!this.responseContext.item)return console.warn("Delivery item is not defined or delivery is not fully configured"),null;var r=this.responseContext.delivery_type;if("ab_testing"===r||"search"===r)return this.responseContext;var o,s=this.responseContext.item,a=this.responseContext.events,l=s,c=l.title,u=l.content,d=l.item_type;return"product"===d&&(o=s.product),null!==(n=null===(t=this.deliveryOptions.notification)||void 0===t?void 0:t.show)&&void 0!==n&&n&&c&&u&&this.show(c,u,(0,e.Cl)((0,e.Cl)((0,e.Cl)({},this.deliveryOptions),{onClick:function(){(null==a?void 0:a.click)&&window.open(a.click,"_blank")},onClose:function(){return(0,e.sH)(i,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(null==a?void 0:a.close)?[4,this.request(a.close)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},onView:function(){return(0,e.sH)(i,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(null==a?void 0:a.view)?[4,this.request(a.view)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},onImpression:function(){return(0,e.sH)(i,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(null==a?void 0:a.impression)?[4,this.request(a.impression)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}}),"product"===d&&{product:null!=o?o:{name:"",external_product_id:"",image:{name:"",url:""}}})),this.responseContext},t}();var ge={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let be;const Ce=new Uint8Array(16);const we=[];for(let e=0;e<256;++e)we.push((e+256).toString(16).slice(1));function Ie(e,t=0){return(we[e[t+0]]+we[e[t+1]]+we[e[t+2]]+we[e[t+3]]+"-"+we[e[t+4]]+we[e[t+5]]+"-"+we[e[t+6]]+we[e[t+7]]+"-"+we[e[t+8]]+we[e[t+9]]+"-"+we[e[t+10]]+we[e[t+11]]+we[e[t+12]]+we[e[t+13]]+we[e[t+14]]+we[e[t+15]]).toLowerCase()}var Se=function(e,t,n){if(ge.randomUUID&&!t&&!e)return ge.randomUUID();const i=(e=e||{}).random??e.rng?.()??function(){if(!be){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");be=crypto.getRandomValues.bind(crypto)}return be(Ce)}();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=i[e];return t}return Ie(i)},_e="".concat(r.BE,"_session_id"),xe="".concat(r.BE,"_session_startedAt");"".concat(r.BE,"_identified");function Ae(){return{id:sessionStorage.getItem(_e),startedAt:sessionStorage.getItem(xe)}}var Ee="This is being deprecated and will be not be available in future releases of Analytics JS",Pe=(0,ie.m)(),ke=null==Pe?void 0:Pe.analytics;var Be=function(){function e(e,t){var n;this.timeout=300,this.secretKey=e.secretKey,this.cdnSettings=null!==(n=e.cdnSettings)&&void 0!==n?n:{integrations:{},edgeFunction:{}},this.cdnURL=e.cdnURL}return Object.defineProperty(e.prototype,"apiHost",{get:function(){return r.m4},enumerable:!1,configurable:!0}),e}();function Te(){console.warn(Ee)}var Ne,Le=function(t){function n(n,i,r,o,s){var a,l,c=t.call(this)||this;c._debug=!1,c.initialized=!1,c.user=function(){return c._user},c.init=c.initialize.bind(c),c.log=Te,c.addIntegrationMiddleware=Te,c.listeners=Te,c.addEventListener=Te,c.removeAllListeners=Te,c.removeListener=Te,c.removeEventListener=Te,c.hasListeners=Te,c.add=Te,c.addIntegration=Te;var u=null==i?void 0:i.cookie,d=null!==(a=null==i?void 0:i.disableClientPersistence)&&void 0!==a&&a;c.queue=null!=r?r:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=t?10:1,r=n?new D.M(i,[]):new L.x(i,e);return new G(r)}("".concat(n.secretKey,":event-queue"),null==i?void 0:i.retryQueue,d),c.settings=new Be(n,c.queue);var p=null==i?void 0:i.storage;return c._universalStorage=c.createStore(d,p,u),c._user=null!=o?o:new Z((0,e.Cl)({persist:!d,storage:null==i?void 0:i.storage},null==i?void 0:i.user),u).load(),c._group=null!=s?s:new te((0,e.Cl)({persist:!d,storage:null==i?void 0:i.storage},null==i?void 0:i.group),u).load(),c.eventFactory=new T(c._user),c.integrations=null!==(l=null==i?void 0:i.integrations)&&void 0!==l?l:{},c.options=null!=i?i:{},R(c),c}return(0,e.C6)(n,t),n.prototype.createStore=function(e,t,n){return e?new j([new V]):t&&K(t)?new j(Q(X(t.stores,n))):new j(Q([F.LocalStorage,{name:F.Cookie,settings:n},F.Memory]))},Object.defineProperty(n.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),n.prototype.setAIID=function(e){this._aiid=e},n.prototype.setup=function(t,n){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return this._aiid?[4,this._aiid.setup(this.settings.secretKey,t,n)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,this]}}))}))},n.prototype.getDataConsent=function(t){return(0,e.sH)(this,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){return[2,{category:[{id:"necessary",name:"Strictly Necessary Cookies",description:"These cookies are necessary for the website to function and cannot be switched off in our systems.",isNecessary:!0,isEnabled:!0},{id:"performance",name:"Performance Cookies",description:"These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site.",isEnabled:!1},{id:"functional",name:"Functional Cookies",description:"These cookies enable the website to provide enhanced functionality and personalization.",isEnabled:!1},{id:"targeting",name:"Targeting Cookies",description:"These cookies may be set through our site by our advertising partners to build a profile of your interests.",isEnabled:!1}],title:"Your data, your choice.",description:"We use cookies to give you the best user experience on Aicactus, including when you return to our website and when you are logged in. We also analyze our website traffic and share information about your use of our platform with our analytics partners. Nothing more! Declining cookies limits us to necessary cookies only and prevents us from providing you with a better and personnalized experience.",policyLinkText:"Privacy Policy",policyUrl:"https://Aicactus/privacy-policy"}]}))}))},n.prototype.handleAcceptAllConsent=function(t){return(0,e.sH)(this,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){return[2,!0]}))}))},n.prototype.handleAcceptNecessaryConsent=function(t){return(0,e.sH)(this,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){return[2,!0]}))}))},n.prototype.handleConfirmCustomizeSettingConsent=function(t){return(0,e.sH)(this,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){return[2,!0]}))}))},n.prototype.reGenerateAnonymousId=function(){return(0,e.sH)(this,void 0,void 0,(function(){var t,n,i;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(null===(t=this._aiid)||void 0===t?void 0:t.ip)?[3,2]:[4,null===(n=this._aiid)||void 0===n?void 0:n.setup(this.settings.secretKey,"","")];case 1:e.sent(),e.label=2;case 2:return(null===(i=this._aiid)||void 0===i?void 0:i.unifiedId)&&this.setAnonymousId(this._aiid.unifiedId),[2]}}))}))},n.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r,o,s,l,c,u,d,p=this;return(0,e.YH)(this,(function(h){return(null===(d=this._aiid)||void 0===d?void 0:d.unifiedId)||this.reGenerateAnonymousId(),n=ue(t),i=Ae(),r=a.apply(void 0,t),o=r[0],s=r[1],l=r[2],c=r[3],u=this.eventFactory.track(o,s,(0,e.Cl)((0,e.Cl)({},l),{context:(0,e.Cl)((0,e.Cl)({},null==l?void 0:l.context),{session:i})}),this.integrations,n),[2,this._dispatch(u,c).then((function(e){return p.emit("track",o,e.event.properties,e.event.options),e}))]}))}))},n.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r,o,s,a,c,u,d,p,h=this;return(0,e.YH)(this,(function(f){return(null===(p=this._aiid)||void 0===p?void 0:p.unifiedId)||this.reGenerateAnonymousId(),n=ue(t),i=Ae(),r=l.apply(void 0,t),o=r[0],s=r[1],a=r[2],c=r[3],u=r[4],d=this.eventFactory.page(o,s,a,(0,e.Cl)((0,e.Cl)({},c),{context:(0,e.Cl)((0,e.Cl)({},null==c?void 0:c.context),{session:i})}),this.integrations,n),[2,this._dispatch(d,u).then((function(e){return h.emit("page",o,s,e.event.properties,e.event.options),e}))]}))}))},n.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,u,d,p,h=this;return(0,e.YH)(this,(function(f){return(null===(p=this._aiid)||void 0===p?void 0:p.unifiedId)||this.reGenerateAnonymousId(),n=ue(t),i=Ae(),r=c(this._user).apply(void 0,t),o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],this._user.identify(o,s),d=this.eventFactory.identify(this._user.id(),this._user.traits(),a,(0,e.Cl)((0,e.Cl)({},l),{context:(0,e.Cl)((0,e.Cl)({},null==l?void 0:l.context),{session:i})}),this.integrations,n),[2,this._dispatch(d,u).then((function(e){return h.emit("identify",e.event.userId,e.event.traits,e.event.properties,e.event.options),e}))]}))}))},n.prototype.group=function(){for(var t,n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];(null===(t=this._aiid)||void 0===t?void 0:t.unifiedId)||this.reGenerateAnonymousId();var o=ue(i),s=Ae();if(0===i.length)return this._group;var a=c(this._group).apply(void 0,i),l=a[0],u=a[1],d=a[2],p=a[3],h=a[4];this._group.identify(l,u);var f=this._group.id(),v=this._group.traits(),y=this.eventFactory.group(f,v,d,(0,e.Cl)((0,e.Cl)({},p),{context:(0,e.Cl)((0,e.Cl)({},null==p?void 0:p.context),{session:s})}),this.integrations,o);return this._dispatch(y,h).then((function(e){return n.emit("group",e.event.groupId,e.event.traits,e.event.properties,e.event.options),e}))},n.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,c,d,p=this;return(0,e.YH)(this,(function(h){return(null===(d=this._aiid)||void 0===d?void 0:d.unifiedId)||this.reGenerateAnonymousId(),n=ue(t),i=Ae(),r=u.apply(void 0,t),o=r[0],s=r[1],a=r[2],l=r[3],c=this.eventFactory.alias(o,s,(0,e.Cl)((0,e.Cl)({},a),{context:(0,e.Cl)((0,e.Cl)({},null==a?void 0:a.context),{session:i})}),this.integrations,n),[2,this._dispatch(c,l).then((function(e){return p.emit("alias",o,s,e.event.options),e}))]}))}))},n.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r,o,s,a,c,u,d,p,h=this;return(0,e.YH)(this,(function(f){return(null===(p=this._aiid)||void 0===p?void 0:p.unifiedId)||this.reGenerateAnonymousId(),n=ue(t),i=Ae(),r=l.apply(void 0,t),o=r[0],s=r[1],a=r[2],c=r[3],u=r[4],d=this.eventFactory.screen(o,s,a,(0,e.Cl)((0,e.Cl)({},c),{context:(0,e.Cl)((0,e.Cl)({},null==c?void 0:c.context),{session:i})}),this.integrations,n),[2,this._dispatch(d,u).then((function(e){return h.emit("screen",o,s,e.event.properties,e.event.options),e}))]}))}))},n.prototype.delivery=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,c,u,p,h,f=this;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(null===(h=this._aiid)||void 0===h?void 0:h.unifiedId)||this.reGenerateAnonymousId(),n=ue(t),i=d.apply(void 0,t),r=i[0],o=i[1],s=i[2],a=i[3],l=this.eventFactory.delivery(r,o,s,n),[4,this._dispatch(l,a).then((function(e){return f.emit("delivery",r,o,e.event.options),e}))];case 1:return c=e.sent(),u=c.response,p=new me(u,s),[2,p.process()]}}))}))},n.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r;return(0,e.YH)(this,(function(o){switch(o.label){case 0:return(null===(r=this._aiid)||void 0===r?void 0:r.unifiedId)||this.reGenerateAnonymousId(),[4,s.e(248).then(s.bind(s,4875))];case 1:return n=o.sent(),[2,(i=n.link).call.apply(i,(0,e.fX)([this],t,!1))]}}))}))},n.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r;return(0,e.YH)(this,(function(o){switch(o.label){case 0:return(null===(r=this._aiid)||void 0===r?void 0:r.unifiedId)||this.reGenerateAnonymousId(),[4,s.e(248).then(s.bind(s,4875))];case 1:return n=o.sent(),[2,(i=n.link).call.apply(i,(0,e.fX)([this],t,!1))]}}))}))},n.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r;return(0,e.YH)(this,(function(o){switch(o.label){case 0:return(null===(r=this._aiid)||void 0===r?void 0:r.unifiedId)||this.reGenerateAnonymousId(),[4,s.e(248).then(s.bind(s,4875))];case 1:return n=o.sent(),[2,(i=n.form).call.apply(i,(0,e.fX)([this],t,!1))]}}))}))},n.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r;return(0,e.YH)(this,(function(o){switch(o.label){case 0:return(null===(r=this._aiid)||void 0===r?void 0:r.unifiedId)||this.reGenerateAnonymousId(),[4,s.e(248).then(s.bind(s,4875))];case 1:return n=o.sent(),[2,(i=n.form).call.apply(i,(0,e.fX)([this],t,!1))]}}))}))},n.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r=this;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return n=h.o.system(),i=t.map((function(e){return r.queue.register(n,e,r)})),[4,Promise.all(i)];case 1:return e.sent(),[2,n]}}))}))},n.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.sH)(this,void 0,Promise,(function(){var n,i,r=this;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return n=h.o.system(),i=t.map((function(e){var t=r.queue.plugins.find((function(t){return t.name===e}));if(t)return r.queue.deregister(n,t,r);n.log("warn","plugin ".concat(e," not found"))})),[4,Promise.all(i)];case 1:return e.sent(),[2,n]}}))}))},n.prototype.debug=function(e){return!1===e&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=e,this},n.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},n.prototype.timeout=function(e){this.settings.timeout=e},n.prototype._dispatch=function(t,n){return(0,e.sH)(this,void 0,Promise,(function(){var i;return(0,e.YH)(this,(function(e){return i=new h.o(t),(0,p.a)()&&!this.options.retryQueue?[2,i]:[2,v(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]}))}))},n.prototype.addSourceMiddleware=function(t){return(0,e.sH)(this,void 0,Promise,(function(){var n=this;return(0,e.YH)(this,(function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run((function(){return(0,e.sH)(n,void 0,void 0,(function(){var n,i,r;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then(s.bind(s,1418))];case 1:return n=e.sent().sourceMiddlewarePlugin,i={},this.queue.plugins.forEach((function(e){if("destination"===e.type)return i[e.name]=!0})),r=n(t,i),[4,this.register(r)];case 2:return e.sent(),[2]}}))}))}))];case 1:return i.sent(),[2,this]}}))}))},n.prototype.addDestinationMiddleware=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.queue.plugins.filter(N).forEach((function(n){"*"!==e&&n.name.toLowerCase()!==e.toLowerCase()||n.addMiddleware.apply(n,t)})),Promise.resolve(this)},n.prototype.setAnonymousId=function(e){return this._user.anonymousId(e)},n.prototype.queryString=function(t){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return!1===this.options.useQueryString?[2,[]]:[4,s.e(538).then(s.bind(s,6346))];case 1:return[2,(0,e.sent().queryString)(this,t)]}}))}))},n.prototype.use=function(e){return e(this),this},n.prototype.ready=function(){return(0,e.sH)(this,arguments,Promise,(function(t){return void 0===t&&(t=function(e){return e}),(0,e.YH)(this,(function(e){return[2,Promise.all(this.queue.plugins.map((function(e){return e.ready?e.ready():Promise.resolve()}))).then((function(e){return t(e),e}))]}))}))},n.prototype.noConflict=function(){return console.warn(Ee),(0,re.Ud)(null!=ke?ke:this),this},n.prototype.normalize=function(e){return console.warn(Ee),this.eventFactory.normalize(e)},Object.defineProperty(n.prototype,"failedInitializations",{get:function(){return console.warn(Ee),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"VERSION",{get:function(){return ne.r},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,n){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){return console.warn(Ee),[2,Promise.resolve(this)]}))}))},n.prototype.pageview=function(t){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return console.warn(Ee),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}}))}))},Object.defineProperty(n.prototype,"plugins",{get:function(){var e;return console.warn(Ee),null!==(e=this._plugins)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Integrations",{get:function(){return console.warn(Ee),this.queue.plugins.filter((function(e){return"destination"===e.type})).reduce((function(e,t){var n="".concat(t.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),i=window[n];if(!i)return e;var r=i.Integration;return r?(e[t.name]=r,e):(e[t.name]=i,e)}),{})},enumerable:!1,configurable:!0}),n.prototype.push=function(e){var t=e.shift();t&&!this[t]||this[t].apply(this,e)},n}(y.v),De=function(t){function n(){var e=t.call(this,{secretKey:""},{disableClientPersistence:!0})||this;return e.initialized=!0,e}return(0,e.C6)(n,t),n}(Le),Oe=s(5835),Me=s(8115),He=s(9059);function Ge(t){return(0,e.sH)(this,void 0,Promise,(function(){var n;return(0,e.YH)(this,(function(e){return(n=navigator.userAgentData)?t?[2,n.getHighEntropyValues(t).catch((function(){return n.toJSON()}))]:[2,n.toJSON()]:[2,void 0]}))}))}function Re(){if(Ne)return Ne;var e=q(window.location.href);return Ne={expires:31536e6,secure:!1,path:"/"},e&&(Ne.domain=e),Ne}var Fe=function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(n,i){return(0,e.sH)(t,void 0,void 0,(function(){var t;return(0,e.YH)(this,(function(e){switch(e.label){case 0:this.instance=i,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,Ge(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}}))}))},this.enrich=function(i){var r,o,s=i.event.context,a=s.page.search||"",l="object"==typeof a?function(e){try{var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var n=e[0],i=e[1];Array.isArray(i)?i.forEach((function(e){return t.append(n,e)})):t.append(n,i)})),t.toString()}catch(e){return""}}(a):a;s.userAgent=navigator.userAgent,s.userAgentData=t.userAgentData;var c=navigator.userLanguage||navigator.language;void 0===s.locale&&void 0!==c&&(s.locale=c),null!==(r=s.library)&&void 0!==r||(s.library={name:"AicactusSDK.js",version:"".concat("web"===(0,n.X)()?"web":"npm:next","-").concat(ne.r)}),l&&!s.campaign&&(s.campaign=function(e){return e.startsWith("?")&&(e=e.substring(1)),(e=e.replace(/\?/g,"&")).split("&").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1],o=void 0===r?"":r;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);"campaign"===s&&(s="name"),e[s]=(0,He.p)(o)}return e}),{})}(l));var u=function(){var e=Y.get("_ga");if(e&&e.startsWith("amp"))return e}();u&&(s.amp={id:u}),function(t,n,i){var r,o=new j(i?[]:[new W(Re())]),s=o.get("s:context.referrer"),a=null!==(r=function(e){var t={btid:"dataxu",urid:"millennial-media"};e.startsWith("?")&&(e=e.substring(1));for(var n=0,i=(e=e.replace(/\?/g,"&")).split("&");n<i.length;n++){var r=i[n].split("="),o=r[0],s=r[1];if(t[o])return{id:s,type:t[o]}}}(t))&&void 0!==r?r:s;a&&(n&&(n.referrer=(0,e.Cl)((0,e.Cl)({},n.referrer),a)),o.set("s:context.referrer",a))}(l,s,null!==(o=t.instance.options.disableClientPersistence)&&void 0!==o&&o);try{s.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}return s.screen={width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth},i},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},Ue=new Fe,je=s(6238),Ve=s(1418),Ke=s(2822),ze=function(){function t(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,Me.u)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return t.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];"destination"===this.type&&(e=this.middleware).push.apply(e,t)},t.prototype.transform=function(t){return(0,e.sH)(this,void 0,Promise,(function(){var n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,(0,Ve.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(n=e.sent())&&t.cancel(new O.d({retry:!1,reason:"dropped by destination middleware"})),[2,new h.o(n)]}}))}))},t.prototype._createMethod=function(t){var n=this;return function(i){return(0,e.sH)(n,void 0,Promise,(function(){var n,r;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return this.action[t]?(n=i,"destination"!==this.type?[3,2]:[4,this.transform(i)]):[2,i];case 1:n=e.sent(),e.label=2;case 2:return e.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!e.sent())throw new Error("Something prevented the destination from getting ready");return(0,Ke.y)(i,{integrationName:this.action.name,methodName:t,type:"action"}),[4,this.action[t](n)];case 4:return e.sent(),[3,6];case 5:throw r=e.sent(),(0,Ke.y)(i,{integrationName:this.action.name,methodName:t,type:"action",didError:!0}),r;case 6:return[2,i]}}))}))}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))},t.prototype.load=function(t,n){return(0,e.sH)(this,void 0,Promise,(function(){var i,r,o,s;return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];e.label=1;case 1:return e.trys.push([1,3,,4]),(0,Ke.y)(t,{integrationName:this.action.name,methodName:"load",type:"action"}),i=this.action.load(t,n),o=(r=this.loadPromise).resolve,[4,i];case 2:return o.apply(r,[e.sent()]),[2,i];case 3:throw s=e.sent(),(0,Ke.y)(t,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(s),s;case 4:return[2]}}))}))},t.prototype.unload=function(e,t){var n,i;return null===(i=(n=this.action).unload)||void 0===i?void 0:i.call(n,e,t)},t}();function Ye(n,i){return(0,e.sH)(this,void 0,Promise,(function(){var r,o,s,a,l,c;return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(e.trys.push([0,9,,10]),r=new RegExp("https://cdn.segment.(com|build)"),o=(0,t.I2)(),!i)return[3,6];s=n.url.split("/"),a=s[s.length-2],l=n.url.replace(a,btoa(a).replace(/=/g,"")),e.label=1;case 1:return e.trys.push([1,3,,5]),[4,(0,je.k)(l.replace(r,o))];case 2:return e.sent(),[3,5];case 3:return e.sent(),[4,(0,je.k)(n.url.replace(r,o))];case 4:return e.sent(),[3,5];case 5:return[3,8];case 6:return[4,(0,je.k)(n.url.replace(r,o))];case 7:e.sent(),e.label=8;case 8:return"function"==typeof window[n.libraryName]?[2,window[n.libraryName]]:[3,10];case 9:throw c=e.sent(),console.error("Failed to create PluginFactory",n),c;case 10:return[2]}}))}))}function qe(t,n,i,r,o,s){return(0,e.sH)(this,void 0,Promise,(function(){var a,l,c,u,d,p,h=this;return(0,e.YH)(this,(function(f){switch(f.label){case 0:return a=[],l=null!==(d=null===(u=t.middlewareSettings)||void 0===u?void 0:u.routingRules)&&void 0!==d?d:[],c=(null!==(p=t.remotePlugins)&&void 0!==p?p:[]).map((function(t){return(0,e.sH)(h,void 0,void 0,(function(){var c,u,d,p,h,f;return(0,e.YH)(this,(function(v){switch(v.label){case 0:if(function(e,t){var n=e[t.creationName],i=e[t.name];return!1===e.All&&!n&&!i||!1===n||!1===i}(n,t))return[2];v.label=1;case 1:return v.trys.push([1,6,,7]),(u=null==s?void 0:s.find((function(e){return e.pluginName===t.name})))?[3,3]:[4,Ye(t,null==r?void 0:r.obfuscate)];case 2:u=v.sent(),v.label=3;case 3:return(c=u)?[4,c((0,e.Cl)((0,e.Cl)({},t.settings),i[t.name]))]:[3,5];case 4:d=v.sent(),function(e){if(!Array.isArray(e))throw new Error("Not a valid list of plugins");var t=["load","isLoaded","name","version","type"];e.forEach((function(e){t.forEach((function(t){var n;if(void 0===e[t])throw new Error("Plugin: ".concat(null!==(n=e.name)&&void 0!==n?n:"unknown"," missing required function ").concat(t))}))}))}(p=Array.isArray(d)?d:[d]),h=l.filter((function(e){return e.destinationName===t.creationName})),p.forEach((function(e){var n=new ze(t.creationName,e);h.length&&o&&n.addMiddleware(o),a.push(n)})),v.label=5;case 5:return[3,7];case 6:return f=v.sent(),console.warn("Failed to load Remote Plugin",f),[3,7];case 7:return[2]}}))}))})),[4,Promise.all(c)];case 1:return f.sent(),[2,a.filter(Boolean)]}}))}))}var We=s(7536),Je=function(t){function n(e,n){var i=t.call(this,e)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return(0,e.C6)(n,t),n}(Error);function Qe(e){return(encodeURI(JSON.stringify(e)).split(/%..|./).length-1)/1024}function Xe(t,n){var i,r,o,s,a,l=[],c=!1,u=null!==(i=null==n?void 0:n.size)&&void 0!==i?i:10,d=null!==(r=null==n?void 0:n.timeout)&&void 0!==r?r:5e3,p=0;function f(i){var r;if(0!==i.length){var o=null===(r=i[0])||void 0===r?void 0:r.secretKey,s=i.map((function(t){var n=t;n.sentAt;return(0,e.Tt)(n,["sentAt"])}));return(0,ye.h)("https://".concat(t,"/b"),{keepalive:(null==n?void 0:n.keepalive)||c,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({secretKey:o,batch:s,sentAt:(new Date).toISOString()})}).then((function(e){var t;if(e.status>=500)throw new Error("Bad response from server: ".concat(e.status));if(429===e.status){var n=null===(t=e.headers)||void 0===t?void 0:t.get("x-ratelimit-reset"),i="string"==typeof n?1e3*parseInt(n):d;throw new Je("Rate limit exceeded: ".concat(e.status),i)}return e}))}}function v(){return(0,e.sH)(this,arguments,Promise,(function(t){var i,r;return void 0===t&&(t=1),(0,e.YH)(this,(function(o){return l.length?(i=l,l=[],[2,null===(r=f(i))||void 0===r?void 0:r.catch((function(r){var o;h.o.system().log("error","Error sending batch",r),t<=(null!==(o=null==n?void 0:n.maxRetries)&&void 0!==o?o:10)&&("RateLimitError"===r.name&&(p=r.retryTimeout),l.push.apply(l,i),l.map((function(n){if("_metadata"in n){var i=n;i._metadata=(0,e.Cl)((0,e.Cl)({},i._metadata),{retryCount:t})}})),y(t+1))}))]):[2]}))}))}function y(e){void 0===e&&(e=1),o||(o=setTimeout((function(){o=void 0,v(e).catch(console.error)}),p||d),p=0)}return s=function(e){if((c=e)&&l.length){var t=(n=l,i=[],r=0,n.forEach((function(e){Qe(i[r])>=64&&r++,i[r]?i[r].push(e):i[r]=[e]})),i).map(f);Promise.all(t).catch(console.error)}var n,i,r},a=!1,window.addEventListener("pagehide",(function(){a||s(a=!0)})),document.addEventListener("visibilitychange",(function(){if("hidden"==document.visibilityState){if(a)return;a=!0}else a=!1;s(a)})),{dispatch:function(t,i){return(0,e.sH)(this,void 0,Promise,(function(){var t;return(0,e.YH)(this,(function(e){return l.push(i),t=l.length>=u||function(e){return Qe(e)>=450}(l)||(null==n?void 0:n.keepalive)&&function(e){return Qe(e)>=54}(l),[2,t||c?v():y()]}))}))}}}function $e(e){return{dispatch:function(t,n){return(0,ye.h)(t,{keepalive:null==e?void 0:e.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(n)}).then((function(e){var t;if(e.status>=500)throw new Error("Bad response from server: ".concat(e.status));if(429===e.status){var n=null===(t=e.headers)||void 0===t?void 0:t.get("x-ratelimit-reset"),i=n?1e3*parseInt(n):5e3;throw new Je("Rate limit exceeded: ".concat(e.status),i)}return e}))}}}function Ze(t,n,i,r){var o,s,a,l,c,u,d=t.user();delete n.options,delete n.integrations,n.secretKey=null==i?void 0:i.apiKey,n.userId=n.userId||d.id()||"",n.anonymousId=n.anonymousId||d.anonymousId(),n.sentAt=Math.floor(Date.now()/1e3),n.receivedAt=Math.floor(Date.now()/1e3),n.timestamp=Math.floor((n.timestamp||Date.now())/1e3),n.source="web",n.sdk="cip",n.userAgent=navigator.userAgent,"page"!==n.type||n.name||(n.name="/"===(null===(s=null===(o=n.context)||void 0===o?void 0:o.page)||void 0===s?void 0:s.path)?"home_page":"view_page");var p=t.queue.failedInitializations||[];p.length>0&&(n._metadata={failedInitializations:p}),null!=r&&(r.attempts>1&&(n._metadata=(0,e.Cl)((0,e.Cl)({},n._metadata),{retryCount:r.attempts})),r.attempts++);var h={};if("delivery"!==n.type){var f=n.anonymousId,v=n.ip,y=n.receivedAt,m=n.sdk,g=n.secretKey,b=n.source,C=n.type,w=n.userAgent,I=n.userId,S=(0,e.Tt)(n,["anonymousId","ip","receivedAt","sdk","secretKey","source","type","userAgent","userId"]);h={info:{anonymousId:f,ip:v,receivedAt:y,sdk:m,secretKey:g,source:b,type:C,userAgent:w,userId:I},originalData:(0,e.Cl)({},S)}}else h=(0,e.Cl)({secret_key:n.deliverySecretKey,channel:"web",anonymous_id:n.anonymousId,email:(null===(a=n.traits)||void 0===a?void 0:a.email)?[n.traits.email]:[],email_hashed:[],mobile:(null===(l=n.traits)||void 0===l?void 0:l.phone)?[n.traits.phone]:[],mobile_hashed:[],user_id:(null===(c=n.traits)||void 0===c?void 0:c.id)?[n.traits.id]:[]},(null===(u=n.context)||void 0===u?void 0:u.query)&&{query:n.context.query.trim()});return h}var et=s(7106);function tt(t,n){return(0,e.sH)(this,void 0,Promise,(function(){var i,r=this;return(0,e.YH)(this,(function(o){switch(o.label){case 0:return i=[],(0,p.a)()?[2,n]:[4,(0,et._)((function(){return n.length>0&&!(0,p.a)()}),(function(){return(0,e.sH)(r,void 0,void 0,(function(){var r,o;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(r=n.pop())?[4,(0,M.C)(r,t)]:[2];case 1:return o=e.sent(),o instanceof h.o||i.push(r),[2]}}))}))}))];case 1:return o.sent(),i.map((function(e){return n.pushWithBackoff(e)})),[2,n]}}))}))}function nt(t,n,i,r){var o=this;t||setTimeout((function(){return(0,e.sH)(o,void 0,void 0,(function(){var t,o;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return t=!0,[4,tt(i,n)];case 1:return o=e.sent(),t=!1,n.todo>0&&r(t,o,i,r),[2]}}))}))}),5e3*Math.random())}function it(t,n,i){var o,s;window.addEventListener("pagehide",(function(){l.push.apply(l,Array.from(c)),c.clear()}));var a=null!==(o=null==n?void 0:n.apiKey)&&void 0!==o?o:"",l=t.options.disableClientPersistence?new D.M(t.queue.queue.maxAttempts,[]):new L.x(t.queue.queue.maxAttempts,"".concat(a,":dest-aicactus")),c=new Set,u=!1,d=r.m4,h=null!==(s=null==n?void 0:n.protocol)&&void 0!==s?s:r.xL,f="".concat(h,"://").concat(d),v=null==n?void 0:n.deliveryStrategy,y="batching"===(null==v?void 0:v.strategy)?Xe(d,v.config):$e(null==v?void 0:v.config);function m(i){return(0,e.sH)(this,void 0,Promise,(function(){var r,o;return(0,e.YH)(this,(function(e){return(0,p.a)()?(l.push(i),nt(u,l,g,nt),[2,i]):(c.add(i),r=i.event.type.charAt(0),o=(0,We.W)(i.event).json(),"track"===i.event.type&&delete o.traits,"alias"===i.event.type&&(o=function(e,t){var n,i,r,o,s=e.user();return t.previousId=null!==(r=null!==(i=null!==(n=t.previousId)&&void 0!==n?n:t.from)&&void 0!==i?i:s.id())&&void 0!==r?r:s.anonymousId(),t.userId=null!==(o=t.userId)&&void 0!==o?o:t.to,delete t.from,delete t.to,t}(t,o)),[2,y.dispatch("".concat(f,"/").concat(r),Ze(t,o,n,i)).then((function(){return i})).catch((function(e){if(i.log("error","Error sending event",e),"RateLimitError"===e.name){var t=e.retryTimeout;l.pushWithBackoff(i,t)}else l.pushWithBackoff(i);return nt(u,l,g,nt),i})).finally((function(){c.delete(i)}))])}))}))}var g={metadata:{secretKey:a},name:"Aicactus",type:"destination",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:m,identify:m,page:m,alias:m,group:m,screen:m};return l.todo&&nt(u,l,g,nt),g}function rt(t,n,i){var o,s,a=null!==(o=null==n?void 0:n.apiKey)&&void 0!==o?o:"",l=t.options.disableClientPersistence?new D.M(t.queue.queue.maxAttempts,[]):new L.x(t.queue.queue.maxAttempts,"".concat(a,":dest-aicactus")),c=new Set,u=!1,d=r.Kz,h=null!==(s=null==n?void 0:n.protocol)&&void 0!==s?s:r.xL,f="".concat(h,"://").concat(d),v=null==n?void 0:n.deliveryStrategy,y="batching"===(null==v?void 0:v.strategy)?Xe(d,v.config):$e(null==v?void 0:v.config);var m={metadata:{secretKey:a},name:"AicactusDelivery",type:"destination",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},delivery:function(i){return(0,e.sH)(this,void 0,Promise,(function(){var r,o,s=this;return(0,e.YH)(this,(function(a){return(0,p.a)()?(l.push(i),nt(u,l,m,nt),[2,i]):(c.add(i),r="".concat(i.event.deliveryCode,"/sdk"),o=(0,We.W)(i.event).json(),[2,y.dispatch("".concat(f,"/").concat(r),Ze(t,o,n,i)).then((function(t){return(0,e.sH)(s,void 0,void 0,(function(){var n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return"application/json"!==t.headers.get("Content-Type")?[3,2]:(n=i,[4,t.json()]);case 1:n.response=e.sent(),e.label=2;case 2:return[2,i]}}))}))})).catch((function(e){if(i.log("error","Error sending event",e),"RateLimitError"===e.name){var t=e.retryTimeout;l.pushWithBackoff(i,t)}else l.pushWithBackoff(i);return nt(u,l,m,nt),i})).finally((function(){c.delete(i)}))])}))}))}};return l.todo&&nt(u,l,m,nt),m}var ot,st,at,lt,ct,ut,dt,pt,ht,ft,vt,yt,mt,gt,bt,Ct,wt,It,St={name:"Aicactus Utils",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},page:function(e){return e},track:function(e){return e}},_t=null!==(ot=(st=(0,ie.m)()).__SEGMENT_INSPECTOR__)&&void 0!==ot?ot:st.__SEGMENT_INSPECTOR__={},xt=s(8900),At={version:"1.0.1",authenticationKey:"",baseUrl:"https://identify.aicactus.io",xhrTimeoutInMs:3e3,ipFreshDifInMs:36e5,ipExpireInMs:864e5,_key_unified_id:"_$aic_uid",_key_expired_value:"_$aic_exp",_key_attr:"_$aic_attr",_key_fg1:"_$aic_fg1",_key_fg2:"_$aic_fg2",_key_mr:"_$aic_mr",_key_ip:"_$aic_ip",d:!0},Et=function(){function t(){this.config=At,this.initializeMode=0,this.unifiedId=null,this.attributeKey=null,this.fg1=null,this.fg2=null,this.mr=null,this.ip=null,this._initializeIframe(),this._fgDataFromLocal()}return t.prototype._isIframe=function(){return window.self!==window.top},t.prototype._initializeIframe=function(){var e=this;this._isIframe()&&window.addEventListener("message",(function(t){t.source===window.parent&&t.data&&"__AIID__SETUP"===t.data.type&&e.setup(t.data.key,t.data.attrType,t.data.attrValue).then((function(t){e._updateIframeData({type:"__AIID__UNIFIED_ID",id:t})})).catch((function(t){e._updateIframeData({type:"__AIID__ERROR",error:t.message})}))}))},t.prototype.version=function(){return this.config.version},t.prototype.setup=function(t,n,i){return(0,e.sH)(this,void 0,Promise,(function(){var r;return(0,e.YH)(this,(function(e){switch(e.label){case 0:this.config.authenticationKey=t;try{this.unifiedId=this.getUnifiedId()}catch(e){if("NO_TRACKING"===e.message)throw e;this.unifiedId=null}return this.attributeKey=this.getAttributeKey(),n&&i&&(this.attributeKey!=="".concat(n,":").concat(i)?(this.attributeKey="".concat(n,":").concat(i),this.initializeMode=2):this.initializeMode=1),0!==this.initializeMode?[3,2]:[4,this._getFgData()];case 1:if(!e.sent()[4]&&this.unifiedId)return this._initThirdParty(),this._updateIframeData({type:"__AIID__UNIFIED_ID",id:this.unifiedId,attr:this.attributeKey}),[2,this.unifiedId];this.initializeMode=2,e.label=2;case 2:return r=this,[4,this._requestUnifiedId()];case 3:return r.unifiedId=e.sent(),this.initializeMode=0,this._storeData(this.config._key_unified_id,this.unifiedId),this._storeData(this.config._key_attr,""!==this.attributeKey?this.attributeKey:null),this._initThirdParty(),this._updateIframeData({type:"__AIID__UNIFIED_ID",id:this.unifiedId,attr:this.attributeKey}),[2,this.unifiedId]}}))}))},t.prototype.noTracking=function(e){e?this._storeData(this.config._key_unified_id,"NO_TRACKING"):this._storeData(this.config._key_unified_id,this.unifiedId)},t.prototype.getUnifiedId=function(){if(this.unifiedId)return this.unifiedId;var e=this._getData(this.config._key_unified_id);if(null===e||""===e)return null;if("NO_TRACKING"===e)throw new Error("NO_TRACKING");return e},t.prototype.getAttributeKey=function(){if(this.attributeKey)return this.attributeKey;var e=this._getData(this.config._key_attr);return null===e||""===e?null:e},t.prototype._updateIframeData=function(e){this._isIframe()&&window.parent.postMessage(e,"*")},t.prototype._initThirdParty=function(){this._isIframe()},t.prototype._requestUnifiedId=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n,i,r,o,s,a,l,c,u,d,p,h;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),[4,this._getFgData()];case 1:return t=e.sent(),n=t[0],i=t[1],r=t[2],o=t[3],s=JSON.stringify({fu:this.initializeMode,uid:this.unifiedId,pt:this.config.authenticationKey,ua:null!==(c=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==c?c:"",lg:null!==(u=null===navigator||void 0===navigator?void 0:navigator.language)&&void 0!==u?u:"",sw:null!==(d=null===screen||void 0===screen?void 0:screen.width)&&void 0!==d?d:0,sh:null!==(p=null===screen||void 0===screen?void 0:screen.height)&&void 0!==p?p:0,dm:null!==(h=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==h?h:0,hc:window.devicePixelRatio?1:0,loc:window.location.href,ip:o,x:n,t:i,q:r,attr:this.attributeKey}),[4,fetch("".concat(this.config.baseUrl,"/v2/i"),{signal:AbortSignal.timeout(this.config.xhrTimeoutInMs),method:"POST",cache:"no-cache",body:s})];case 2:return(a=e.sent()).ok?[4,a.json()]:[3,4];case 3:return[2,e.sent().data];case 4:throw new Error("UNIFIED_ID_ERROR");case 5:return[3,7];case 6:if(l=e.sent(),!this.attributeKey)throw l;return[3,7];case 7:return[2,Promise.resolve("")]}}))}))},t.prototype._fgDataFromLocal=function(){this.fg1||(this.fg1=this._getData(this.config._key_fg1)),this.fg2||(this.fg2=this._getData(this.config._key_fg2)),this.mr||(this.mr=this._getData(this.config._key_mr)),this.ip||(this.ip=this._getData(this.config._key_ip))},t.prototype._updateFg1=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:t=!1,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._fg1()];case 2:return n=e.sent(),t=this.fg1!==n,this.fg1=n,[3,4];case 3:throw e.sent(),new Error("FG1_ERROR");case 4:return this._storeData(this.config._key_fg1,this.fg1),[2,Promise.resolve(t)]}}))}))},t.prototype._updateFg2=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:t=!1,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._fg2()];case 2:return n=e.sent(),t=this.fg2!==n,this.fg2=n,[3,4];case 3:throw e.sent(),new Error("FG2_ERROR");case 4:return this._storeData(this.config._key_fg2,this.fg2),[2,Promise.resolve(t)]}}))}))},t.prototype._updateMr=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:t=!1,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._mr()];case 2:return n=e.sent(),t=this.mr!==n,this.mr=n,[3,4];case 3:throw e.sent(),new Error("MR_ERROR");case 4:return this._storeData(this.config._key_mr,this.mr),[2,Promise.resolve(t)]}}))}))},t.prototype._updateIp=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:t=!1,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._info()];case 2:return n=e.sent(),t=this.ip!==n,this.ip=n,[3,4];case 3:throw e.sent(),new Error("IP_ERROR");case 4:return this._storeData(this.config._key_ip,this.ip),[2,Promise.resolve(t)]}}))}))},t.prototype._getFgData=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n,i,r,o,s,a,l,c,u,d;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return this._fgDataFromLocal(),t=!1,(n=this._getData(this.config._key_expired_value))&&parseInt(n)>(new Date).getTime()-this.config.ipFreshDifInMs?this.fg1?[3,3]:(i=t)?[3,2]:[4,this._updateFg1()]:[3,13];case 1:i=e.sent(),e.label=2;case 2:t=i,e.label=3;case 3:return this.fg2?[3,6]:(r=t)?[3,5]:[4,this._updateFg2()];case 4:r=e.sent(),e.label=5;case 5:t=r,e.label=6;case 6:return this.mr?[3,9]:(o=t)?[3,8]:[4,this._updateMr()];case 7:o=e.sent(),e.label=8;case 8:t=o,e.label=9;case 9:return this.ip&&("NO_IP"!==this.ip||this._dev())?[3,12]:(s=t)?[3,11]:[4,this._updateIp()];case 10:s=e.sent(),e.label=11;case 11:t=s,e.label=12;case 12:return[3,15];case 13:return[4,Promise.all([this._updateFg1(),this._updateFg2(),this._updateMr(),this._updateIp()])];case 14:a=e.sent(),l=a[0],c=a[1],u=a[2],d=a[3],this._storeData(this.config._key_expired_value,""+(new Date).getTime()+this.config.ipExpireInMs),t=l||c||u||d,e.label=15;case 15:return[2,Promise.resolve([this.fg1,this.fg2,this.mr,this.ip,t])]}}))}))},t.prototype._fg1=function(){var e=null,t=".Al Bayan PUA;.Al Nile PUA;.Al Tarikh PUA;.Apple Color Emoji UI;.Apple SD Gothic NeoI;.Aqua Kana;.Aqua Kana Bold;.Arabic UI Display;.Arabic UI Text;.Arial Hebrew Desk Interface;.Baghdad PUA;.Beirut PUA;.Damascus PUA;.DecoType Naskh PUA;.Diwan Kufi PUA;.Farah PUA;.Geeza Pro Interface;.Geeza Pro PUA;.HeitiUI GB18030PUA;.HeitiUI J;.HeitiUI K;.HeitiUI SC;.HeitiUI TC;.Helvetica LT MM;.Helvetica Neue Desk UI;.Helvetica Neue Desk UI Bold;.Helvetica Neue Desk UI Bold Italic;.Helvetica Neue Desk UI Italic;.Helvetica Neue DeskInterface;.Hiragino Kaku Gothic Interface;.Hiragino Sans GB Interface;.Keyboard;.KufiStandardGK PUA;.Lucida Grande UI;.Muna PUA;.Nadeem PUA;.New York;.Noto Nastaliq Urdu UI;.PingFang HK;.PingFang SC;.PingFang TC;.SF Compact Display;.SF Compact Rounded;.SF Compact Text;.SF NS;.SF NS Display;.SF NS Display Condensed;.SF NS Mono;.SF NS Rounded;.SF NS Symbols;.SF NS Text;.SF NS Text Condensed;.Sana PUA;.Savoye LET CC.;.Times LT MM;AIGDT;AMGDT;AR PL UKai CN;AR PL UKai HK;AR PL UKai TW;AR PL UKai TW MBE;AR PL UMing CN;AR PL UMing HK;AR PL UMing TW;AR PL UMing TW MBE;Abadi MT Condensed;Abyssinica SIL;AcadEref;Adobe Arabic;Adobe Caslon Pro;Adobe Caslon Pro Bold;Adobe Devanagari;Adobe Fan Heiti Std B;Adobe Fangsong Std R;Adobe Garamond Pro;Adobe Garamond Pro Bold;Adobe Gothic Std B;Adobe Hebrew;Adobe Heiti Std R;Adobe Kaiti Std R;Adobe Ming Std L;Adobe Myungjo Std M;Adobe Naskh Medium;Adobe Song Std L;Agency FB;Aharoni;Aharoni Bold;Aharoni CLM;Al Bayan;Al Bayan Bold;Al Bayan Plain;Al Nile;Al Nile Bold;Al Tarikh;Al Tarikh Regular;AlArabiya;AlBattar;AlHor;AlManzomah;AlYarmook;Aldhabi;Alexandra Script;Algerian;AlternateGothic2 BT;Amadeus;AmdtSymbols;American Typewriter;American Typewriter Bold;American Typewriter Condensed;American Typewriter Condensed Bold;American Typewriter Condensed Light;American Typewriter Light;American Typewriter Semibold;Amiri;Amiri Quran;Amiri Quran Colored;AnastasiaScript;Andale Mono;Andalus;Andika;Android Emoji;Angsana New;Angsana New Bold;Angsana New Bold Italic;Angsana New Italic;AngsanaUPC;AngsanaUPC Bold;AngsanaUPC Bold Italic;AngsanaUPC Italic;Ani;AnjaliOldLipi;Annabelle;Aparajita;Aparajita Bold;Aparajita Bold Italic;Aparajita Italic;Apple Braille;Apple Braille Outline 6 Dot;Apple Braille Outline 8 Dot;Apple Braille Pinpoint 6 Dot;Apple Braille Pinpoint 8 Dot;Apple Chancery;Apple Color Emoji;Apple LiGothic;Apple LiGothic Medium;Apple LiSung;Apple LiSung Light;Apple SD Gothic Neo;Apple SD Gothic Neo Bold;Apple SD Gothic Neo Heavy;Apple SD Gothic Neo Light;Apple SD Gothic Neo Medium;Apple SD Gothic Neo Regular;Apple SD Gothic Neo SemiBold;Apple SD Gothic Neo Thin;Apple SD Gothic Neo UltraLight;Apple SD GothicNeo ExtraBold;Apple Symbols;AppleGothic;AppleGothic Regular;AppleMyungjo;AppleMyungjo Regular;AquaKana;Arab;Arabic Transparent;Arabic Typesetting;Arial;Arial Baltic;Arial Black;Arial Bold;Arial Bold Italic;Arial CE;Arial CYR;Arial Cyr;Arial Greek;Arial Hebrew;Arial Hebrew Bold;Arial Hebrew Light;Arial Hebrew Scholar;Arial Hebrew Scholar Bold;Arial Hebrew Scholar Light;Arial Italic;Arial Narrow;Arial Narrow Bold;Arial Narrow Bold Italic;Arial Narrow Italic;Arial Nova;Arial Nova Bold;Arial Nova Bold Italic;Arial Nova Cond;Arial Nova Cond Bold;Arial Nova Cond Bold Italic;Arial Nova Cond Italic;Arial Nova Cond Light;Arial Nova Cond Light Italic;Arial Nova Italic;Arial Nova Light;Arial Nova Light Italic;Arial Rounded MT Bold;Arial TUR;Arial Unicode MS;Arimo;Ariston;Arno Pro;Arno Pro Caption;Arno Pro Display;Arno Pro Light Display;Arno Pro SmText;Arno Pro Smbd;Arno Pro Smbd Caption;Arno Pro Smbd Display;Arno Pro Smbd SmText;Arno Pro Smbd Subhead;Arno Pro Subhead;Arundina;Athelas;Athelas Bold;Athelas Bold Italic;Athelas Italic;Athelas Regular;Avenir;Avenir Black;Avenir Black Oblique;Avenir Book;Avenir Book Oblique;Avenir Heavy;Avenir Heavy Oblique;Avenir Light;Avenir Light Oblique;Avenir Medium;Avenir Medium Oblique;Avenir Next;Avenir Next Bold;Avenir Next Bold Italic;Avenir Next Condensed;Avenir Next Condensed Bold;Avenir Next Condensed Bold Italic;Avenir Next Condensed Demi Bold;Avenir Next Condensed Demi Bold Italic;Avenir Next Condensed Heavy;Avenir Next Condensed Heavy Italic;Avenir Next Condensed Italic;Avenir Next Condensed Medium;Avenir Next Condensed Medium Italic;Avenir Next Condensed Regular;Avenir Next Condensed Ultra Light;Avenir Next Condensed Ultra Light Italic;Avenir Next Demi Bold;Avenir Next Demi Bold Italic;Avenir Next Heavy;Avenir Next Heavy Italic;Avenir Next Italic;Avenir Next Medium;Avenir Next Medium Italic;Avenir Next Regular;Avenir Next Ultra Light;Avenir Next Ultra Light Italic;Avenir Oblique;Avenir Roman;Ayuthaya;BIZ UDGothic;BIZ UDGothic Bold;BIZ UDMincho;BIZ UDMincho Medium;BIZ UDPGothic;BIZ UDPGothic Bold;BIZ UDPMincho;BIZ UDPMincho Medium;BPG Algeti GPL&GNU;BPG Chveulebrivi GPL&GNU;BPG Courier GPL&GNU;BPG Courier S GPL&GNU;BPG DedaEna Block GPL&GNU;BPG DejaVu Sans 2011 GNU-GPL;BPG Elite GPL&GNU;BPG Excelsior Caps GPL&GNU;BPG Excelsior Condencerd GPL&GNU;BPG Excelsior GPL&GNU;BPG Glaho GPL&GNU;BPG Gorda GPL&GNU;BPG Ingiri GPL&GNU;BPG Mrgvlovani Caps GNU&GPL;BPG Mrgvlovani GPL&GNU;BPG Nateli Caps GPL&GNU;BPG Nateli Condenced GPL&GNU;BPG Nateli GPL&GNU;BPG Nino Medium Cond GPL&GNU;BPG Nino Medium GPL&GNU;BPG Sans GPL&GNU;BPG Sans Medium GPL&GNU;BPG Sans Modern GPL&GNU;BPG Sans Regular GPL&GNU;BPG Serif GPL&GNU;BPG Serif Modern GPL&GNU;Baghdad;Baghdad Regular;Bahnschrift;Bahnschrift Light;Bahnschrift SemiBold;Bahnschrift SemiLight;Bangla MN;Bangla MN Bold;Bangla Sangam MN;Bangla Sangam MN Bold;BankGothic Lt BT;BankGothic Md BT;Baoli SC;Baoli SC Regular;Baoli TC;Baoli TC Regular;Baskerville;Baskerville Bold;Baskerville Bold Italic;Baskerville Italic;Baskerville Old Face;Baskerville SemiBold;Baskerville SemiBold Italic;Batang;BatangChe;Bauhaus 93;Beirut;Beirut Regular;Bell Gothic Std Black;Bell Gothic Std Light;Bell MT;Berlin Sans FB;Berlin Sans FB Demi;Bernard MT Condensed;BiauKai;Bickham Script One;Bickham Script Pro Regular;Bickham Script Pro Semibold;Bickham Script Two;Big Caslon;Big Caslon Medium;Birch Std;Bitstream Charter;Blackadder ITC;Blackoak Std;Bodoni 72;Bodoni 72 Bold;Bodoni 72 Book;Bodoni 72 Book Italic;Bodoni 72 Oldstyle;Bodoni 72 Oldstyle Bold;Bodoni 72 Oldstyle Book;Bodoni 72 Oldstyle Book Italic;Bodoni 72 Smallcaps;Bodoni 72 Smallcaps Book;Bodoni MT;Bodoni MT Black;Bodoni MT Condensed;Bodoni MT Poster Compressed;Bodoni Ornaments;Book Antiqua;Bookman Old Style;Bookshelf Symbol 7;Bradley Hand;Bradley Hand Bold;Bradley Hand ITC;Britannic Bold;Broadway;Browallia New;Browallia New Bold;Browallia New Bold Italic;Browallia New Italic;BrowalliaUPC;BrowalliaUPC Bold;BrowalliaUPC Bold Italic;BrowalliaUPC Italic;Brush Script MT;Brush Script MT Italic;Brush Script Std;C059;Caladea;Caladings CLM;Calibri;Calibri Bold;Calibri Bold Italic;Calibri Italic;Calibri Light;Calibri Light Italic;Californian FB;Calisto MT;Calligraph;Cambria;Cambria Bold;Cambria Bold Italic;Cambria Italic;Cambria Math;Candara;Candara Bold;Candara Bold Italic;Candara Italic;Candara Light;Candara Light Italic;Cantarell;Cantarell Extra Bold;Cantarell Light;Cantarell Thin;Carlito;Carolina;Castellar;Centaur;Century;Century Gothic;Century Schoolbook;Century Schoolbook L;Ceremonious Two;Chalkboard;Chalkboard Bold;Chalkboard SE;Chalkboard SE Bold;Chalkboard SE Light;Chalkboard SE Regular;Chalkduster;Chandas;Chaparral Pro;Chaparral Pro Light;Charcoal CY;Charlemagne Std;Charter;Charter Black;Charter Black Italic;Charter Bold;Charter Bold Italic;Charter Italic;Charter Roman;Chilanka;Chiller;CityBlueprint;Clarendon BT;Clarendon Blk BT;Clarendon Lt BT;Clean;Cochin;Cochin Bold;Cochin Bold Italic;Cochin Italic;Colonna MT;Comfortaa;Comfortaa Light;Comic Sans MS;Comic Sans MS Bold;Comic Sans MS Bold Italic;Comic Sans MS Italic;CommercialPi BT;CommercialScript BT;Complex;Consolas;Consolas Bold;Consolas Bold Italic;Consolas Italic;Constantia;Constantia Bold;Constantia Bold Italic;Constantia Italic;Cooper Black;Cooper Std Black;Copperplate;Copperplate Bold;Copperplate Gothic;Copperplate Gothic Bold;Copperplate Gothic Light;Copperplate Light;Copyist;Corbel;Corbel Bold;Corbel Bold Italic;Corbel Italic;Corbel Light;Corbel Light Italic;Cordia New;Cordia New Bold;Cordia New Bold Italic;Cordia New Italic;CordiaUPC;CordiaUPC Bold;CordiaUPC Bold Italic;CordiaUPC Italic;Corsiva Hebrew;Corsiva Hebrew Bold;Cortoba;CountryBlueprint;Courier;Courier 10 Pitch;Courier Bold;Courier Bold Oblique;Courier New;Courier New Baltic;Courier New Bold;Courier New Bold Italic;Courier New CE;Courier New CYR;Courier New Cyr;Courier New Greek;Courier New Italic;Courier New TUR;Courier Oblique;Cousine;Curlz MT;Cursor;D050000L;DFKai-SB;DIN Alternate;DIN Alternate Bold;DIN Condensed;DIN Condensed Bold;Damascus;Damascus Bold;Damascus Light;Damascus Medium;Damascus Regular;Damascus Semi Bold;DaunPenh;David;David Bold;David CLM;DecoType Naskh;DecoType Naskh Regular;Decor;DejaVu Math TeX Gyre;DejaVu Sans;DejaVu Sans Condensed;DejaVu Sans Light;DejaVu Sans Mono;DejaVu Serif;DejaVu Serif Condensed;DengXian;DengXian Bold;DengXian Light;Devanagari MT;Devanagari MT Bold;Devanagari Sangam MN;Devanagari Sangam MN Bold;Didot;Didot Bold;Didot Italic;DilleniaUPC;DilleniaUPC Bold;DilleniaUPC Bold Italic;DilleniaUPC Italic;Dimnah;Dingbats;Diwan Kufi;Diwan Kufi Regular;Diwan Mishafi;Diwan Thuluth;Diwan Thuluth Regular;DokChampa;Dotum;DotumChe;Droid Arabic Kufi;Droid Arabic Naskh;Droid Naskh Shift Alt;Droid Sans;Droid Sans Arabic;Droid Sans Armenian;Droid Sans Devanagari;Droid Sans Ethiopic;Droid Sans Fallback;Droid Sans Georgian;Droid Sans Hebrew;Droid Sans Japanese;Droid Sans Mono;Droid Sans Tamil;Droid Sans Thai;Droid Serif;Drugulin CLM;Dutch801 Rm BT;Dutch801 XBd BT;Dyuthi;Ebrima;Ebrima Bold;Eccentric Std;Edwardian Script ITC;Eeyek Unicode;Electron;Elephant;Ellinia CLM;EmojiOne Mozilla;Engravers MT;Eras Bold ITC;Eras Demi ITC;Eras Light ITC;Eras Medium ITC;Estrangelo Edessa;EucrosiaUPC;EucrosiaUPC Bold;EucrosiaUPC Bold Italic;EucrosiaUPC Italic;Euphemia;Euphemia UCAS;Euphemia UCAS Bold;Euphemia UCAS Italic;EuroRoman;Eurostile;Ezra SIL;Ezra SIL SR;FangSong;Farah;Farah Regular;Farisi;Farisi Regular;Felix Titling;Fixed;Fixed Miriam Transparent;Fixedsys;FontAwesome;Footlight MT Light;Forte;Frank Ruehl CLM;FrankRuehl;Franklin Gothic Book;Franklin Gothic Demi;Franklin Gothic Demi Cond;Franklin Gothic Heavy;Franklin Gothic Medium;Franklin Gothic Medium Cond;Franklin Gothic Medium Italic;Free Avant Garde;Free Bookman;Free Chancery;Free Courier;Free Helvetian;Free Helvetian Condensed;Free Paladin;Free Schoolbook;Free Times;FreeMono;FreeSans;FreeSerif;Freehand521 BT;FreesiaUPC;FreesiaUPC Bold;FreesiaUPC Bold Italic;FreesiaUPC Italic;Freestyle Script;French Script MT;Furat;Futura;Futura Bold;Futura Condensed ExtraBold;Futura Condensed Medium;Futura Md BT;Futura Medium;Futura Medium Italic;GB18030 Bitmap;GDT;GENISO;Gabriola;Gadugi;Gadugi Bold;Galvji;Garamond;Garamond Premr Pro;Garamond Premr Pro Smbd;Gargi;Garuda;Gautami;Gautami Bold;Gayathri;Gayathri Thin;Geeza Pro;Geeza Pro Bold;Geeza Pro Regular;Geneva;Geneva CY;Gentium;Gentium Basic;Gentium Book Basic;GentiumAlt;Georgia;Georgia Bold;Georgia Bold Italic;Georgia Italic;Georgia Pro;Georgia Pro Black;Georgia Pro Black Italic;Georgia Pro Bold;Georgia Pro Bold Italic;Georgia Pro Cond;Georgia Pro Cond Black;Georgia Pro Cond Black Italic;Georgia Pro Cond Bold;Georgia Pro Cond Bold Italic;Georgia Pro Cond Italic;Georgia Pro Cond Light;Georgia Pro Cond Light Italic;Georgia Pro Cond Semibold;Georgia Pro Cond Semibold Italic;Georgia Pro Italic;Georgia Pro Light;Georgia Pro Light Italic;Georgia Pro Semibold;Georgia Pro Semibold Italic;Giddyup Std;Gigi;Gill Sans;Gill Sans Bold;Gill Sans Bold Italic;Gill Sans Italic;Gill Sans Light;Gill Sans Light Italic;Gill Sans MT;Gill Sans MT Condensed;Gill Sans MT Ext Condensed Bold;Gill Sans Nova;Gill Sans Nova Bold;Gill Sans Nova Bold Italic;Gill Sans Nova Cond;Gill Sans Nova Cond Bold;Gill Sans Nova Cond Bold Italic;Gill Sans Nova Cond Italic;Gill Sans Nova Cond Lt;Gill Sans Nova Cond Lt Italic;Gill Sans Nova Cond Ultra Bold;Gill Sans Nova Cond XBd;Gill Sans Nova Cond XBd Italic;Gill Sans Nova Italic;Gill Sans Nova Light;Gill Sans Nova Light Italic;Gill Sans Nova Ultra Bold;Gill Sans SemiBold;Gill Sans SemiBold Italic;Gill Sans Ultra Bold;Gill Sans Ultra Bold Condensed;Gill Sans UltraBold;Gisha;Gisha Bold;Gloucester MT Extra Condensed;GothicE;GothicG;GothicI;Goudy Old Style;Goudy Stout;Granada;Graph;GreekC;GreekS;Gubbi;Gujarati MT;Gujarati MT Bold;Gujarati Sangam MN;Gujarati Sangam MN Bold;Gulim;GulimChe;GungSeo;GungSeo Regular;Gungsuh;GungsuhChe;Gurmukhi MN;Gurmukhi MN Bold;Gurmukhi MT;Gurmukhi Sangam MN;Gurmukhi Sangam MN Bold;Hadasim CLM;Haettenschweiler;Hani;Hannotate SC;Hannotate SC Bold;Hannotate SC Regular;Hannotate TC;Hannotate TC Bold;Hannotate TC Regular;HanziPen SC;HanziPen SC Bold;HanziPen SC Regular;HanziPen TC;HanziPen TC Bold;HanziPen TC Regular;Haramain;Harlow Solid Italic;Harrington;HeadLineA Regular;HeadlineA;Heather Script One;Hei;Hei Regular;Heiti SC;Heiti SC Light;Heiti SC Medium;Heiti TC;Heiti TC Light;Heiti TC Medium;Helvetica;Helvetica Bold;Helvetica Bold Oblique;Helvetica CY;Helvetica CY Bold;Helvetica CY BoldOblique;Helvetica CY Oblique;Helvetica CY Plain;Helvetica Light;Helvetica Light Oblique;Helvetica Neue;Helvetica Neue Bold;Helvetica Neue Bold Italic;Helvetica Neue Condensed Black;Helvetica Neue Condensed Bold;Helvetica Neue Italic;Helvetica Neue Light;Helvetica Neue Light Italic;Helvetica Neue Medium;Helvetica Neue Medium Italic;Helvetica Neue Thin;Helvetica Neue Thin Italic;Helvetica Neue UltraLight;Helvetica Neue UltraLight Italic;Helvetica Oblique;Herculanum;Hershey-Gothic-English;Hershey-Gothic-German;Hershey-Gothic-Italian;Hershey-Plain-Duplex;Hershey-Plain-Duplex-Italic;Hershey-Plain-Triplex;Hershey-Plain-Triplex-Italic;Hershey-Script-Complex;Hershey-Script-Simplex;High Tower Text;Hiragino Kaku Gothic Pro;Hiragino Kaku Gothic Pro W3;Hiragino Kaku Gothic Pro W6;Hiragino Kaku Gothic ProN;Hiragino Kaku Gothic ProN W3;Hiragino Kaku Gothic ProN W6;Hiragino Kaku Gothic Std;Hiragino Kaku Gothic Std W8;Hiragino Kaku Gothic StdN;Hiragino Kaku Gothic StdN W8;Hiragino Maru Gothic Pro;Hiragino Maru Gothic Pro W4;Hiragino Maru Gothic ProN;Hiragino Maru Gothic ProN W4;Hiragino Mincho Pro;Hiragino Mincho Pro W3;Hiragino Mincho Pro W6;Hiragino Mincho ProN;Hiragino Mincho ProN W3;Hiragino Mincho ProN W6;Hiragino Sans;Hiragino Sans CNS;Hiragino Sans CNS W3;Hiragino Sans CNS W6;Hiragino Sans GB;Hiragino Sans GB W3;Hiragino Sans GB W6;Hiragino Sans W0;Hiragino Sans W1;Hiragino Sans W2;Hiragino Sans W3;Hiragino Sans W4;Hiragino Sans W5;Hiragino Sans W6;Hiragino Sans W7;Hiragino Sans W8;Hiragino Sans W9;Hobo Std;Hoefler Text;Hoefler Text Black;Hoefler Text Black Italic;Hoefler Text Italic;Hoefler Text Ornaments;HoloLens MDL2 Assets;Homa;Hor;IPAGothic;IPAMincho;IPAPGothic;IPAPMincho;ISOCP;ISOCP2;ISOCP3;ISOCPEUR;ISOCT;ISOCT2;ISOCT3;ISOCTEUR;ITF Devanagari;ITF Devanagari Bold;ITF Devanagari Book;ITF Devanagari Demi;ITF Devanagari Light;ITF Devanagari Marathi;ITF Devanagari Marathi Bold;ITF Devanagari Marathi Book;ITF Devanagari Marathi Demi;ITF Devanagari Marathi Light;ITF Devanagari Marathi Medium;ITF Devanagari Medium;Impact;Imprint MT Shadow;InaiMathi;InaiMathi Bold;Informal Roman;Ink Free;Iowan Old Style;Iowan Old Style Black;Iowan Old Style Black Italic;Iowan Old Style Bold;Iowan Old Style Bold Italic;Iowan Old Style Italic;Iowan Old Style Roman;Iowan Old Style Titling;IrisUPC;IrisUPC Bold;IrisUPC Bold Italic;IrisUPC Italic;Iskoola Pota;Iskoola Pota Bold;Italic;ItalicC;ItalicT;Jamrul;Japan;JasmineUPC;JasmineUPC Bold;JasmineUPC Bold Italic;JasmineUPC Italic;Javanese Text;Jet;Jokerman;Jomolhari;Juice ITC;KacstArt;KacstBook;KacstDecorative;KacstDigital;KacstFarsi;KacstLetter;KacstNaskh;KacstOffice;KacstOne;KacstPen;KacstPoster;KacstQurn;KacstScreen;KacstTitle;KacstTitleL;Kai;Kai Regular;KaiTi;Kailasa;Kailasa Bold;Kailasa Regular;Kaiti SC;Kaiti SC Black;Kaiti SC Bold;Kaiti SC Regular;Kaiti TC;Kaiti TC Black;Kaiti TC Bold;Kaiti TC Regular;Kalapi;Kalimati;Kalinga;Kalinga Bold;Kalyani;Kannada MN;Kannada MN Bold;Kannada Sangam MN;Kannada Sangam MN Bold;Kartika;Kartika Bold;Karumbi;Kayrawan;Kedage;Kefa;Kefa Bold;Kefa Regular;Keraleeyam;Keter YG;Keyboard;Khalid;Khmer MN;Khmer MN Bold;Khmer OS;Khmer OS Battambang;Khmer OS Bokor;Khmer OS Content;Khmer OS Fasthand;Khmer OS Freehand;Khmer OS Metal Chrieng;Khmer OS Muol;Khmer OS Muol Light;Khmer OS Muol Pali;Khmer OS Siemreap;Khmer OS System;Khmer Sangam MN;Khmer UI;Khmer UI Bold;Kinnari;Klee;Klee Demibold;Klee Medium;KodchiangUPC;KodchiangUPC Bold;KodchiangUPC Bold Italic;KodchiangUPC Italic;Kohinoor Bangla;Kohinoor Bangla Bold;".split(";");function n(e){return o.style.fontFamily=e,o.offsetWidth+","+o.offsetHeight}var i=t.length,r={},o=document.createElement("div");o.setAttribute("id","work"),o.setAttribute("styte","position: absolute;left: -9999px;top: -9999px"),o.innerHTML='<span style="font-size:128px">mmmMMMmw2mlllmmmLLLmmmiiimmmIIImzzmmwwwmmmWWW</span>';for(var s=["default","sans-serif","serif","monospace","cursive","fantasy","aria"],a={},l=0;l<s.length;l++)a[e=n(s[l])]||(a[e]=""),""!=a[e]&&(a[e]+=", "),a[e]+=s[l];for(l=0;l<i;l++)a[e=n(t[l])]||(r[e]||(r[e]=""),""!=r[e]&&(r[e]+=", "),r[e]+=t[l]);var c="";for(e in a)c+=e+a[e],a[e];for(e in r)c+=e+r[e],r[e];return o.remove(),this._encode(c)},t.prototype._fg2=function(){var e=document.body.appendChild(document.createElement("canvas"));e.setAttribute("styte","position: absolute;left: -9999px;top: -9999px");var t=e.getContext("webgl");if(!t)throw e.remove(),new Error("WEBGL_ERROR");t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight);for(var n=[-.25,0],i=128,r=0;r<i;r++){var o=t.createProgram(),s=t.createShader(t.VERTEX_SHADER);if(!s)throw e.remove(),new Error("VERTEX_SHADER_ERROR");t.shaderSource(s,"attribute vec2 attrVertex;attribute vec4 attrColor;varying vec4 varyinColor;uniform mat4 transform;void main(){varyinColor=attrColor;gl_Position=transform*vec4(attrVertex,0,1);}"),t.compileShader(s),t.attachShader(o,s);var a=t.createShader(t.FRAGMENT_SHADER);if(!a)throw e.remove(),new Error("FRAGMENT_SHADER_ERROR");t.shaderSource(a,"precision mediump float;varying vec4 varyinColor;void main(){gl_FragColor=varyinColor;}"),t.compileShader(a),t.attachShader(o,a),t.linkProgram(o),t.useProgram(o);var l=t.getAttribLocation(o,"attrVertex"),c=t.getAttribLocation(o,"attrColor"),u=t.getUniformLocation(o,"transform");t.enableVertexAttribArray(l),t.enableVertexAttribArray(c),t.uniformMatrix4fv(u,!1,[1.5,0,0,0,0,1.5,0,0,0,0,1,0,.5,0,0,1]);var d=[],p=(45+r/i*270)/360*2*Math.PI,h=(45+(r+1)/i*270)/360*2*Math.PI;d.push(n[0],n[1],1,.7,0,1),d.push(n[0]+.5*Math.cos(p),n[1]+.5*Math.sin(p),2,1-r/i,0,1),d.push(n[0]+.5*Math.cos(h),n[1]+.5*Math.sin(h),1,1-(r+1)/i,0,1);var f=new Float32Array(d),v=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,v),t.bufferData(t.ARRAY_BUFFER,f,t.STATIC_DRAW),t.vertexAttribPointer(l,2,t.FLOAT,!1,24,0),t.vertexAttribPointer(c,4,t.FLOAT,!1,24,8),t.drawArrays(t.LINE_STRIP,0,f.length/6)}var y=new Uint8Array(t.canvas.width*t.canvas.height*4),m=(t.readPixels(0,0,t.canvas.width,t.canvas.height,t.RGBA,t.UNSIGNED_BYTE,y),JSON.stringify(y).replace(/,?"[0-9]+":/g,""));return e.remove(),this._encode(m)},t.prototype._mr=function(){var e=new Date(15463008e5).getTimezoneOffset()+">"+new Date(15463008e5).toLocaleString()+new Date(15463008e5).toString();return this._encode(e)},t.prototype._encode=function(t){return(0,e.sH)(this,void 0,Promise,(function(){var n,i;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return n=new TextEncoder,[4,crypto.subtle.digest("SHA-384",n.encode(t))];case 1:return i=e.sent(),[2,this._hex(i)]}}))}))},t.prototype._hex=function(e){for(var t=[],n=new DataView(e),i=0;i<n.byteLength;i+=4){var r="00000000",o=(r+n.getUint32(i).toString(16)).slice(-8);t.push(o)}return t.join("")},t.prototype._info=function(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(this.config.baseUrl,"/v2/info"),{signal:AbortSignal.timeout(this.config.xhrTimeoutInMs)})];case 1:return(t=e.sent()).ok?[4,t.json()]:[3,3];case 2:if("ip"in(n=e.sent())){if("NO_IP"===n.ip){if(this._dev())return[2,n.ip];throw new Error("IP_ERROR")}return[2,n.ip]}e.label=3;case 3:return[2,""]}}))}))},t.prototype._dev=function(){return"d"in this.config},t.prototype._getData=function(e){var t=this._localStorage();return t?t.getItem(e):null},t.prototype._storeData=function(e,t){var n=this._localStorage();n&&e&&t&&n.setItem(e,t)},t.prototype._localStorage=function(){var e=void 0;try{e=window.localStorage}catch(t){e=void 0}return e},t}(),Pt=Et;class kt extends Error{constructor(e){super(e),this.name="DecodingError"}}class Bt extends Error{constructor(e){super(e),this.name="EncodingError"}}class Tt extends Error{constructor(e){super(e),this.name="GVLError"}}class Nt extends Error{constructor(e,t,n=""){super(`invalid value ${t} passed for ${e} ${n}`),this.name="TCModelError"}}class Lt{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(e){if(!/^[0-1]+$/.test(e))throw new Bt("Invalid bitField");const t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";let n="";for(let t=0;t<e.length;t+=this.BASIS)n+=this.DICT[parseInt(e.substr(t,this.BASIS),2)];return n}static decode(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new kt("Invalidly encoded Base64URL string");let t="";for(let n=0;n<e.length;n++){const i=this.REVERSE_DICT.get(e[n]).toString(2);t+="0".repeat(this.BASIS-i.length)+i}return t}}class Dt{static langSet=new Set(["AR","BG","BS","CA","CS","CY","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HE","HI","HR","HU","ID","IT","JA","KA","KO","LT","LV","MK","MS","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SQ","SR-LATN","SR-CYRL","SV","SW","TH","TL","TR","UK","VI","ZH","ZH-HANT"]);has(e){return Dt.langSet.has(e)}parseLanguage(e){const t=(e=e.toUpperCase()).split("-")[0];if(e.length>=2&&2==t.length){if(Dt.langSet.has(e))return e;if(Dt.langSet.has(t))return t;const n=t+"-"+t;if(Dt.langSet.has(n))return n;for(const n of Dt.langSet)if(-1!==n.indexOf(e)||-1!==n.indexOf(t))return n}throw new Error(`unsupported language ${e}`)}forEach(e){Dt.langSet.forEach(e)}get size(){return Dt.langSet.size}}class Ot{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardTexts="useNonStandardTexts";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class Mt{clone(){const e=new this.constructor;return Object.keys(this).forEach((t=>{const n=this.deepClone(this[t]);void 0!==n&&(e[t]=n)})),e}deepClone(e){const t=typeof e;if("number"===t||"string"===t||"boolean"===t)return e;if(null!==e&&"object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){const t=[];for(const n of e)t.push(this.deepClone(n));return e instanceof Array?t:new e.constructor(t)}{const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=this.deepClone(e[n]));return t}}}}(lt=at||(at={}))[lt.NOT_ALLOWED=0]="NOT_ALLOWED",lt[lt.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",lt[lt.REQUIRE_LI=2]="REQUIRE_LI";class Ht extends Mt{static hashSeparator="-";purposeId_;restrictionType;constructor(e,t){super(),void 0!==e&&(this.purposeId=e),void 0!==t&&(this.restrictionType=t)}static unHash(e){const t=e.split(this.hashSeparator),n=new Ht;if(2!==t.length)throw new Nt("hash",e);return n.purposeId=parseInt(t[0],10),n.restrictionType=parseInt(t[1],10),n}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${Ht.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===at.NOT_ALLOWED||this.restrictionType===at.REQUIRE_CONSENT||this.restrictionType===at.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}}class Gt extends Mt{bitLength=0;map=new Map;gvl_;has(e){return this.map.has(e)}isOkToHave(e,t,n){let i=!0;if(this.gvl?.vendors){const r=this.gvl.vendors[n];if(r)if(e===at.NOT_ALLOWED)i=r.legIntPurposes.includes(t)||r.purposes.includes(t);else if(r.flexiblePurposes.length)switch(e){case at.REQUIRE_CONSENT:i=r.flexiblePurposes.includes(t)&&r.legIntPurposes.includes(t);break;case at.REQUIRE_LI:i=r.flexiblePurposes.includes(t)&&r.purposes.includes(t)}else i=!1;else i=!1}return i}add(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){const n=t.hash;this.has(n)||(this.map.set(n,new Set),this.bitLength=0),this.map.get(n).add(e)}}restrictPurposeToLegalBasis(e){const t=Array.from(this.gvl.vendorIds),n=e.hash,i=t[t.length-1],r=[...Array(i).keys()].map((e=>e+1));if(this.has(n))for(let e=1;e<=i;e++)this.map.get(n).add(e);else this.map.set(n,new Set(r)),this.bitLength=0}getVendors(e){let t=[];if(e){const n=e.hash;this.has(n)&&(t=Array.from(this.map.get(n)))}else{const e=new Set;this.map.forEach((t=>{t.forEach((t=>{e.add(t)}))})),t=Array.from(e)}return t.sort(((e,t)=>e-t))}getRestrictionType(e,t){let n;return this.getRestrictions(e).forEach((e=>{e.purposeId===t&&(void 0===n||n>e.restrictionType)&&(n=e.restrictionType)})),n}vendorHasRestriction(e,t){let n=!1;const i=this.getRestrictions(e);for(let e=0;e<i.length&&!n;e++)n=t.isSameAs(i[e]);return n}getMaxVendorId(){let e=0;return this.map.forEach((t=>{e=Math.max(Array.from(t)[t.size-1],e)})),e}getRestrictions(e){const t=[];return this.map.forEach(((n,i)=>{e?n.has(e)&&t.push(Ht.unHash(i)):t.push(Ht.unHash(i))})),t}getPurposes(){const e=new Set;return this.map.forEach(((t,n)=>{e.add(Ht.unHash(n).purposeId)})),Array.from(e)}remove(e,t){const n=t.hash,i=this.map.get(n);i&&(i.delete(e),0==i.size&&(this.map.delete(n),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach(((e,t)=>{const n=Ht.unHash(t);Array.from(e).forEach((t=>{this.isOkToHave(n.restrictionType,n.purposeId,t)||e.delete(t)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}(ut=ct||(ct={})).COOKIE="cookie",ut.WEB="web",ut.APP="app",(pt=dt||(dt={})).CORE="core",pt.VENDORS_DISCLOSED="vendorsDisclosed",pt.VENDORS_ALLOWED="vendorsAllowed",pt.PUBLISHER_TC="publisherTC";class Rt{static ID_TO_KEY=[dt.CORE,dt.VENDORS_DISCLOSED,dt.VENDORS_ALLOWED,dt.PUBLISHER_TC];static KEY_TO_ID={[dt.CORE]:0,[dt.VENDORS_DISCLOSED]:1,[dt.VENDORS_ALLOWED]:2,[dt.PUBLISHER_TC]:3}}class Ft extends Mt{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach((e=>this.unset(e))):"object"==typeof e?this.unset(Object.keys(e).map((e=>Number(e)))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach((e=>{this.maxId_=Math.max(this.maxId,e)}))))}isIntMap(e){let t="object"==typeof e;return t=t&&Object.keys(e).every((t=>{let n=Number.isInteger(parseInt(t,10));return n=n&&this.isValidNumber(e[t].id),n=n&&void 0!==e[t].name,n})),t}isValidNumber(e){return"number"==typeof e||parseInt(e,10)>0}isSet(e){let t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t}set(e){if(Array.isArray(e))e.forEach((e=>this.set(e)));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map((e=>Number(e))));else{if(!this.isValidNumber(e))throw new Nt("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}}empty(){this.set_=new Set,this.maxId_=0}forEach(e){for(let t=1;t<=this.maxId;t++)e(this.has(t),t)}get size(){return this.set_.size}setAll(e){this.set(e)}}class Ut{static[Ot.cmpId]=12;static[Ot.cmpVersion]=12;static[Ot.consentLanguage]=12;static[Ot.consentScreen]=6;static[Ot.created]=36;static[Ot.isServiceSpecific]=1;static[Ot.lastUpdated]=36;static[Ot.policyVersion]=6;static[Ot.publisherCountryCode]=12;static[Ot.publisherLegitimateInterests]=24;static[Ot.publisherConsents]=24;static[Ot.purposeConsents]=24;static[Ot.purposeLegitimateInterests]=24;static[Ot.purposeOneTreatment]=1;static[Ot.specialFeatureOptins]=12;static[Ot.useNonStandardTexts]=1;static[Ot.vendorListVersion]=12;static[Ot.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class jt{static encode(e,t){let n;if("string"==typeof e&&(e=parseInt(e,10)),n=e.toString(2),n.length>t||e<0)throw new Bt(`${e} too large to encode into ${t}`);return n.length<t&&(n="0".repeat(t-n.length)+n),n}static decode(e,t){if(t!==e.length)throw new kt("invalid bit length");return parseInt(e,2)}}class Vt{static encode(e,t){return jt.encode(Math.round(e.getTime()/100),t)}static decode(e,t){if(t!==e.length)throw new kt("invalid bit length");const n=new Date;return n.setTime(100*jt.decode(e,t)),n}}class Kt{static encode(e){return String(Number(e))}static decode(e){return"1"===e}}class zt{static encode(e,t){let n="";for(let i=1;i<=t;i++)n+=Kt.encode(e.has(i));return n}static decode(e,t){if(e.length!==t)throw new kt("bitfield encoding length mismatch");const n=new Ft;for(let i=1;i<=t;i++)Kt.decode(e[i-1])&&n.set(i);return n.bitLength=e.length,n}}class Yt{static encode(e,t){const n=(e=e.toUpperCase()).charCodeAt(0)-65,i=e.charCodeAt(1)-65;if(n<0||n>25||i<0||i>25)throw new Bt(`invalid language code: ${e}`);if(t%2==1)throw new Bt(`numBits must be even, ${t} is not valid`);t/=2;return jt.encode(n,t)+jt.encode(i,t)}static decode(e,t){let n;if(t!==e.length||e.length%2)throw new kt("invalid bit length for language");{const t=65,i=e.length/2,r=jt.decode(e.slice(0,i),i)+t,o=jt.decode(e.slice(i),i)+t;n=String.fromCharCode(r)+String.fromCharCode(o)}return n}}class qt{static encode(e){let t=jt.encode(e.numRestrictions,Ut.numRestrictions);if(!e.isEmpty()){const n=(t,n)=>{for(let i=t+1;i<=n;i++)if(e.gvl.vendorIds.has(i))return i;return t};e.getRestrictions().forEach((i=>{t+=jt.encode(i.purposeId,Ut.purposeId),t+=jt.encode(i.restrictionType,Ut.restrictionType);const r=e.getVendors(i),o=r.length;let s=0,a=0,l="";for(let e=0;e<o;e++){const t=r[e];if(0===a&&(s++,a=t),e===o-1||r[e+1]>n(t,r[o-1])){const e=!(t===a);l+=Kt.encode(e),l+=jt.encode(a,Ut.vendorId),e&&(l+=jt.encode(t,Ut.vendorId)),a=0}}t+=jt.encode(s,Ut.numEntries),t+=l}))}return t}static decode(e){let t=0;const n=new Gt,i=jt.decode(e.substr(t,Ut.numRestrictions),Ut.numRestrictions);t+=Ut.numRestrictions;for(let r=0;r<i;r++){const i=jt.decode(e.substr(t,Ut.purposeId),Ut.purposeId);t+=Ut.purposeId;const r=jt.decode(e.substr(t,Ut.restrictionType),Ut.restrictionType);t+=Ut.restrictionType;const o=new Ht(i,r),s=jt.decode(e.substr(t,Ut.numEntries),Ut.numEntries);t+=Ut.numEntries;for(let i=0;i<s;i++){const i=Kt.decode(e.substr(t,Ut.anyBoolean));t+=Ut.anyBoolean;const r=jt.decode(e.substr(t,Ut.vendorId),Ut.vendorId);if(t+=Ut.vendorId,i){const i=jt.decode(e.substr(t,Ut.vendorId),Ut.vendorId);if(t+=Ut.vendorId,i<r)throw new kt(`Invalid RangeEntry: endVendorId ${i} is less than ${r}`);for(let e=r;e<=i;e++)n.add(e,o)}else n.add(r,o)}}return n.bitLength=t,n}}(ft=ht||(ht={}))[ft.FIELD=0]="FIELD",ft[ft.RANGE=1]="RANGE";class Wt{static encode(e){const t=[];let n,i=[],r=jt.encode(e.maxId,Ut.maxId),o="";const s=Ut.maxId+Ut.encodingType,a=s+e.maxId,l=2*Ut.vendorId+Ut.singleOrRange+Ut.numEntries;let c=s+Ut.numEntries;return e.forEach(((r,s)=>{if(o+=Kt.encode(r),n=e.maxId>l&&c<a,n&&r){e.has(s+1)?0===i.length&&(i.push(s),c+=Ut.singleOrRange,c+=Ut.vendorId):(i.push(s),c+=Ut.vendorId,t.push(i),i=[])}})),n?(r+=String(ht.RANGE),r+=this.buildRangeEncoding(t)):(r+=String(ht.FIELD),r+=o),r}static decode(e,t){let n,i=0;const r=jt.decode(e.substr(i,Ut.maxId),Ut.maxId);i+=Ut.maxId;const o=jt.decode(e.charAt(i),Ut.encodingType);if(i+=Ut.encodingType,o===ht.RANGE){if(n=new Ft,1===t){if("1"===e.substr(i,1))throw new kt("Unable to decode default consent=1");i++}const r=jt.decode(e.substr(i,Ut.numEntries),Ut.numEntries);i+=Ut.numEntries;for(let t=0;t<r;t++){const t=Kt.decode(e.charAt(i));i+=Ut.singleOrRange;const r=jt.decode(e.substr(i,Ut.vendorId),Ut.vendorId);if(i+=Ut.vendorId,t){const t=jt.decode(e.substr(i,Ut.vendorId),Ut.vendorId);i+=Ut.vendorId;for(let e=r;e<=t;e++)n.set(e)}else n.set(r)}}else{const t=e.substr(i,r);i+=r,n=zt.decode(t,r)}return n.bitLength=i,n}static buildRangeEncoding(e){const t=e.length;let n=jt.encode(t,Ut.numEntries);return e.forEach((e=>{const t=1===e.length;n+=Kt.encode(!t),n+=jt.encode(e[0],Ut.vendorId),t||(n+=jt.encode(e[1],Ut.vendorId))})),n}}function Jt(){return{[Ot.version]:jt,[Ot.created]:Vt,[Ot.lastUpdated]:Vt,[Ot.cmpId]:jt,[Ot.cmpVersion]:jt,[Ot.consentScreen]:jt,[Ot.consentLanguage]:Yt,[Ot.vendorListVersion]:jt,[Ot.policyVersion]:jt,[Ot.isServiceSpecific]:Kt,[Ot.useNonStandardTexts]:Kt,[Ot.specialFeatureOptins]:zt,[Ot.purposeConsents]:zt,[Ot.purposeLegitimateInterests]:zt,[Ot.purposeOneTreatment]:Kt,[Ot.publisherCountryCode]:Yt,[Ot.vendorConsents]:Wt,[Ot.vendorLegitimateInterests]:Wt,[Ot.publisherRestrictions]:qt,segmentType:jt,[Ot.vendorsDisclosed]:Wt,[Ot.vendorsAllowed]:Wt,[Ot.publisherConsents]:zt,[Ot.publisherLegitimateInterests]:zt,[Ot.numCustomPurposes]:jt,[Ot.publisherCustomConsents]:zt,[Ot.publisherCustomLegitimateInterests]:zt}}class Qt{1={[dt.CORE]:[Ot.version,Ot.created,Ot.lastUpdated,Ot.cmpId,Ot.cmpVersion,Ot.consentScreen,Ot.consentLanguage,Ot.vendorListVersion,Ot.purposeConsents,Ot.vendorConsents]};2={[dt.CORE]:[Ot.version,Ot.created,Ot.lastUpdated,Ot.cmpId,Ot.cmpVersion,Ot.consentScreen,Ot.consentLanguage,Ot.vendorListVersion,Ot.policyVersion,Ot.isServiceSpecific,Ot.useNonStandardTexts,Ot.specialFeatureOptins,Ot.purposeConsents,Ot.purposeLegitimateInterests,Ot.purposeOneTreatment,Ot.publisherCountryCode,Ot.vendorConsents,Ot.vendorLegitimateInterests,Ot.publisherRestrictions],[dt.PUBLISHER_TC]:[Ot.publisherConsents,Ot.publisherLegitimateInterests,Ot.numCustomPurposes,Ot.publisherCustomConsents,Ot.publisherCustomLegitimateInterests],[dt.VENDORS_ALLOWED]:[Ot.vendorsAllowed],[dt.VENDORS_DISCLOSED]:[Ot.vendorsDisclosed]}}class Xt{1=[dt.CORE];2=[dt.CORE];constructor(e,t){if(2===e.version)if(e.isServiceSpecific)this[2].push(dt.PUBLISHER_TC);else{const n=!(!t||!t.isForVendors);n&&!0!==e[Ot.supportOOB]||this[2].push(dt.VENDORS_DISCLOSED),n&&(e[Ot.supportOOB]&&e[Ot.vendorsAllowed].size>0&&this[2].push(dt.VENDORS_ALLOWED),this[2].push(dt.PUBLISHER_TC))}}}class $t{static fieldSequence=new Qt;static encode(e,t){let n;try{n=this.fieldSequence[String(e.version)][t]}catch(n){throw new Bt(`Unable to encode version: ${e.version}, segment: ${t}`)}let i="";t!==dt.CORE&&(i=jt.encode(Rt.KEY_TO_ID[t],Ut.segmentType));const r=Jt();return n.forEach((n=>{const o=e[n],s=r[n];let a=Ut[n];void 0===a&&this.isPublisherCustom(n)&&(a=Number(e[Ot.numCustomPurposes]));try{i+=s.encode(o,a)}catch(e){throw new Bt(`Error encoding ${t}->${n}: ${e.message}`)}})),Lt.encode(i)}static decode(e,t,n){const i=Lt.decode(e);let r=0;n===dt.CORE&&(t.version=jt.decode(i.substr(r,Ut[Ot.version]),Ut[Ot.version])),n!==dt.CORE&&(r+=Ut.segmentType);const o=this.fieldSequence[String(t.version)][n],s=Jt();return o.forEach((e=>{const n=s[e];let o=Ut[e];if(void 0===o&&this.isPublisherCustom(e)&&(o=Number(t[Ot.numCustomPurposes])),0!==o){const s=i.substr(r,o);if(t[e]=n===Wt?n.decode(s,t.version):n.decode(s,o),Number.isInteger(o))r+=o;else{if(!Number.isInteger(t[e].bitLength))throw new kt(e);r+=t[e].bitLength}}})),t}static isPublisherCustom(e){return 0===e.indexOf("publisherCustom")}}class Zt{static processor=[e=>e,(e,t)=>{e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset([1,3,4,5,6]);const n=new Map;return n.set("legIntPurposes",e.vendorLegitimateInterests),n.set("purposes",e.vendorConsents),n.forEach(((n,i)=>{n.forEach(((r,o)=>{if(r){const r=t.vendors[o];if(!r||r.deletedDate)n.unset(o);else if(0===r[i].length)if("legIntPurposes"===i&&0===r.purposes.length&&0===r.legIntPurposes.length&&r.specialPurposes.length>0)n.set(o);else if("legIntPurposes"===i&&r.purposes.length>0&&0===r.legIntPurposes.length&&r.specialPurposes.length>0)n.set(o);else if(e.isServiceSpecific)if(0===r.flexiblePurposes.length)n.unset(o);else{const t=e.publisherRestrictions.getRestrictions(o);let r=!1;for(let e=0,n=t.length;e<n&&!r;e++)r=t[e].restrictionType===at.REQUIRE_CONSENT&&"purposes"===i||t[e].restrictionType===at.REQUIRE_LI&&"legIntPurposes"===i;r||n.unset(o)}else n.unset(o)}}))})),e.vendorsDisclosed.set(t.vendors),e}];static process(e,t){const n=e.gvl;if(!n)throw new Bt("Unable to encode TCModel without a GVL");if(!n.isReady)throw new Bt("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=n.language.slice(0,2).toUpperCase(),t?.version>0&&t?.version<=this.processor.length?e.version=t.version:e.version=this.processor.length;const i=e.version-1;if(!this.processor[i])throw new Bt(`Invalid version: ${e.version}`);return this.processor[i](e,n)}}class en{static absCall(e,t,n,i){return new Promise(((r,o)=>{const s=new XMLHttpRequest;s.withCredentials=n,s.addEventListener("load",(()=>{if(s.readyState==XMLHttpRequest.DONE)if(s.status>=200&&s.status<300){let e=s.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}r(e)}else o(new Error(`HTTP Status: ${s.status} response type: ${s.responseType}`))})),s.addEventListener("error",(()=>{o(new Error("error"))})),s.addEventListener("abort",(()=>{o(new Error("aborted"))})),null===t?s.open("GET",e,!0):s.open("POST",e,!0),s.responseType="json",s.timeout=i,s.ontimeout=()=>{o(new Error("Timeout "+i+"ms "+e))},s.send(t)}))}static post(e,t,n=!1,i=0){return this.absCall(e,JSON.stringify(t),n,i)}static fetch(e,t=!1,n=0){return this.absCall(e,null,t,n)}}class tn extends Mt{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new Dt;static baseUrl_;static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new Tt("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;dataCategories;lang_;cacheLang_;isLatest=!1;constructor(e,t){super();let n=tn.baseUrl,i=t?.language;if(i)try{i=tn.consentLanguages.parseLanguage(i)}catch(e){throw new Tt("Error during parsing the language: "+e.message)}if(this.lang_=i||tn.DEFAULT_LANGUAGE,this.cacheLang_=i||tn.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!n)throw new Tt("must specify GVL.baseUrl before loading GVL json");if(e>0){const t=e;tn.CACHE.has(t)?(this.populate(tn.CACHE.get(t)),this.readyPromise=Promise.resolve()):(n+=tn.versionedFilename.replace("[VERSION]",String(t)),this.readyPromise=this.fetchJson(n))}else tn.CACHE.has(tn.LATEST_CACHE_KEY)?(this.populate(tn.CACHE.get(tn.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(n+tn.latestFilename))}}static emptyLanguageCache(e){let t=!1;return null==e&&tn.LANGUAGE_CACHE.size>0?(tn.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(tn.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(tn.CACHE.delete(e),t=!0):void 0===e&&(tn.CACHE=new Map,t=!0),t}cacheLanguage(){tn.LANGUAGE_CACHE.has(this.cacheLang_)||tn.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}async fetchJson(e){try{this.populate(await en.fetch(e))}catch(e){throw new Tt(e.message)}}getJson(){return{gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.clonePurposes(),specialPurposes:this.cloneSpecialPurposes(),features:this.cloneFeatures(),specialFeatures:this.cloneSpecialFeatures(),stacks:this.cloneStacks(),...this.dataCategories?{dataCategories:this.cloneDataCategories()}:{},vendors:this.cloneVendors()}}cloneSpecialFeatures(){const e={};for(const t of Object.keys(this.specialFeatures))e[t]=tn.cloneFeature(this.specialFeatures[t]);return e}cloneFeatures(){const e={};for(const t of Object.keys(this.features))e[t]=tn.cloneFeature(this.features[t]);return e}cloneStacks(){const e={};for(const t of Object.keys(this.stacks))e[t]=tn.cloneStack(this.stacks[t]);return e}cloneDataCategories(){const e={};for(const t of Object.keys(this.dataCategories))e[t]=tn.cloneDataCategory(this.dataCategories[t]);return e}cloneSpecialPurposes(){const e={};for(const t of Object.keys(this.specialPurposes))e[t]=tn.clonePurpose(this.specialPurposes[t]);return e}clonePurposes(){const e={};for(const t of Object.keys(this.purposes))e[t]=tn.clonePurpose(this.purposes[t]);return e}static clonePurpose(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneFeature(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneDataCategory(e){return{id:e.id,name:e.name,description:e.description}}static cloneStack(e){return{id:e.id,name:e.name,description:e.description,purposes:Array.from(e.purposes),specialFeatures:Array.from(e.specialFeatures)}}static cloneDataRetention(e){return{..."number"==typeof e.stdRetention?{stdRetention:e.stdRetention}:{},purposes:{...e.purposes},specialPurposes:{...e.specialPurposes}}}static cloneVendorUrls(e){return e.map((e=>({langId:e.langId,privacy:e.privacy,...e.legIntClaim?{legIntClaim:e.legIntClaim}:{}})))}static cloneVendor(e){return{id:e.id,name:e.name,purposes:Array.from(e.purposes),legIntPurposes:Array.from(e.legIntPurposes),flexiblePurposes:Array.from(e.flexiblePurposes),specialPurposes:Array.from(e.specialPurposes),features:Array.from(e.features),specialFeatures:Array.from(e.specialFeatures),...e.overflow?{overflow:{httpGetLimit:e.overflow.httpGetLimit}}:{},..."number"==typeof e.cookieMaxAgeSeconds||null===e.cookieMaxAgeSeconds?{cookieMaxAgeSeconds:e.cookieMaxAgeSeconds}:{},...void 0!==e.usesCookies?{usesCookies:e.usesCookies}:{},...e.policyUrl?{policyUrl:e.policyUrl}:{},...void 0!==e.cookieRefresh?{cookieRefresh:e.cookieRefresh}:{},...void 0!==e.usesNonCookieAccess?{usesNonCookieAccess:e.usesNonCookieAccess}:{},...e.dataRetention?{dataRetention:this.cloneDataRetention(e.dataRetention)}:{},...e.urls?{urls:this.cloneVendorUrls(e.urls)}:{},...e.dataDeclaration?{dataDeclaration:Array.from(e.dataDeclaration)}:{},...e.deviceStorageDisclosureUrl?{deviceStorageDisclosureUrl:e.deviceStorageDisclosureUrl}:{},...e.deletedDate?{deletedDate:e.deletedDate}:{}}}cloneVendors(){const e={};for(const t of Object.keys(this.fullVendorList))e[t]=tn.cloneVendor(this.fullVendorList[t]);return e}async changeLanguage(e){let t=e;try{t=tn.consentLanguages.parseLanguage(e)}catch(e){throw new Tt("Error during parsing the language: "+e.message)}const n=e.toUpperCase();if((t.toLowerCase()!==tn.DEFAULT_LANGUAGE.toLowerCase()||tn.LANGUAGE_CACHE.has(n))&&t!==this.lang_)if(this.lang_=t,tn.LANGUAGE_CACHE.has(n)){const e=tn.LANGUAGE_CACHE.get(n);for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}else{const e=tn.baseUrl+tn.languageFilename.replace("[LANG]",this.lang_.toLowerCase());try{await this.fetchJson(e),this.cacheLang_=n,this.cacheLanguage()}catch(e){throw new Tt("unable to load language: "+e.message)}}}get language(){return this.lang_}isVendorList(e){return void 0!==e&&void 0!==e.vendors}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&tn.CACHE.set(tn.LATEST_CACHE_KEY,this.getJson()),tn.CACHE.has(this.vendorListVersion)||tn.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((e=>{this.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((e=>{this.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((e=>{this.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((e=>{this.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((e=>+e))),this.vendorIds=new Set(e),this.vendors_=e.reduce(((e,t)=>{const n=this.vendors_[String(t)];return n&&void 0===n.deletedDate&&(n.purposes.forEach((e=>{this.byPurposeVendorMap[String(e)].consent.add(t)})),n.specialPurposes.forEach((e=>{this.bySpecialPurposeVendorMap[String(e)].add(t)})),n.legIntPurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].legInt.add(t)})),n.flexiblePurposes&&n.flexiblePurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].flexible.add(t)})),n.features.forEach((e=>{this.byFeatureVendorMap[String(e)].add(t)})),n.specialFeatures.forEach((e=>{this.bySpecialFeatureVendorMap[String(e)].add(t)})),e[t]=n),e}),{})}getFilteredVendors(e,t,n,i){const r=e.charAt(0).toUpperCase()+e.slice(1);let o;const s={};return o="purpose"===e&&n?this["by"+r+"VendorMap"][String(t)][n]:this["by"+(i?"Special":"")+r+"VendorMap"][String(t)],o.forEach((e=>{s[String(e)]=this.vendors[String(e)]})),s}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new tn(this.getJson());return this.lang_!==tn.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo}}class nn extends Mt{static consentLanguages=tn.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardTexts_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=5;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new Ft;purposeConsents=new Ft;purposeLegitimateInterests=new Ft;publisherConsents=new Ft;publisherLegitimateInterests=new Ft;publisherCustomConsents=new Ft;publisherCustomLegitimateInterests=new Ft;customPurposes;vendorConsents=new Ft;vendorLegitimateInterests=new Ft;vendorsDisclosed=new Ft;vendorsAllowed=new Ft;publisherRestrictions=new Gt;constructor(e){super(),e&&(this.gvl=e),this.updated()}set gvl(e){tn.isInstanceOf(e)||(e=new tn(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),!(Number.isInteger(e)&&e>1))throw new Nt("cmpId",e);this.cmpId_=e}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new Nt("cmpVersion",e);this.cmpVersion_=e}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new Nt("consentScreen",e);this.consentScreen_=e}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(!/^([A-z]){2}$/.test(e))throw new Nt("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if((e=Number(e)|0)<0)throw new Nt("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new Nt("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardTexts(e){this.useNonStandardTexts_=e}get useNonStandardTexts(){return this.useNonStandardTexts_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const t=Object.keys(this.customPurposes).sort(((e,t)=>Number(e)-Number(t)));e=parseInt(t.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new Nt("numCustomPurposes",e)}updated(){const e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=t,this.lastUpdated=t}}class rn{static encode(e,t){let n,i="";return e=Zt.process(e,t),n=Array.isArray(t?.segments)?t.segments:new Xt(e,t)[""+e.version],n.forEach(((t,r)=>{let o="";r<n.length-1&&(o="."),i+=$t.encode(e,t)+o})),i}static decode(e,t){const n=e.split("."),i=n.length;t||(t=new nn);for(let e=0;e<i;e++){const i=n[e],r=Lt.decode(i.charAt(0)).substr(0,Ut.segmentType),o=Rt.ID_TO_KEY[jt.decode(r,Ut.segmentType).toString()];$t.decode(i,t,o)}return t}}(yt=vt||(vt={})).PING="ping",yt.GET_TC_DATA="getTCData",yt.GET_IN_APP_TC_DATA="getInAppTCData",yt.GET_VENDOR_LIST="getVendorList",yt.ADD_EVENT_LISTENER="addEventListener",yt.REMOVE_EVENT_LISTENER="removeEventListener",(gt=mt||(mt={})).STUB="stub",gt.LOADING="loading",gt.LOADED="loaded",gt.ERROR="error",(Ct=bt||(bt={})).VISIBLE="visible",Ct.HIDDEN="hidden",Ct.DISABLED="disabled",(It=wt||(wt={})).TC_LOADED="tcloaded",It.CMP_UI_SHOWN="cmpuishown",It.USER_ACTION_COMPLETE="useractioncomplete";class on{listenerId;callback;next;param;success=!0;constructor(e,t,n,i){Object.assign(this,{callback:e,listenerId:n,param:t,next:i});try{this.respond()}catch(e){this.invokeCallback(null)}}invokeCallback(e){const t=null!==e;"function"==typeof this.next?this.callback(this.next,e,t):this.callback(e,t)}}class sn extends on{respond(){this.throwIfParamInvalid(),this.invokeCallback(new dn(this.param,this.listenerId))}throwIfParamInvalid(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}class an{eventQueue=new Map;queueNumber=0;add(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}remove(e){return this.eventQueue.delete(e)}exec(){this.eventQueue.forEach(((e,t)=>{new sn(e.callback,e.param,t,e.next)}))}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class ln{static apiVersion="2";static tcfPolicyVersion;static eventQueue=new an;static cmpStatus=mt.LOADING;static disabled=!1;static displayStatus=bt.HIDDEN;static cmpId;static cmpVersion;static eventStatus;static gdprApplies;static tcModel;static tcString;static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=mt.LOADING,this.disabled=!1,this.displayStatus=bt.HIDDEN,this.eventQueue.clear()}}class cn{cmpId=ln.cmpId;cmpVersion=ln.cmpVersion;gdprApplies=ln.gdprApplies;tcfPolicyVersion=ln.tcfPolicyVersion}class un extends cn{cmpStatus=mt.ERROR}class dn extends cn{tcString;listenerId;eventStatus;cmpStatus;isServiceSpecific;useNonStandardTexts;publisherCC;purposeOneTreatment;outOfBand;purpose;vendor;specialFeatureOptins;publisher;constructor(e,t){if(super(),this.eventStatus=ln.eventStatus,this.cmpStatus=ln.cmpStatus,this.listenerId=t,ln.gdprApplies){const t=ln.tcModel;this.tcString=ln.tcString,this.isServiceSpecific=t.isServiceSpecific,this.useNonStandardTexts=t.useNonStandardTexts,this.purposeOneTreatment=t.purposeOneTreatment,this.publisherCC=t.publisherCountryCode,this.outOfBand={allowedVendors:this.createVectorField(t.vendorsAllowed,e),disclosedVendors:this.createVectorField(t.vendorsDisclosed,e)},this.purpose={consents:this.createVectorField(t.purposeConsents),legitimateInterests:this.createVectorField(t.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(t.vendorConsents,e),legitimateInterests:this.createVectorField(t.vendorLegitimateInterests,e)},this.specialFeatureOptins=this.createVectorField(t.specialFeatureOptins),this.publisher={consents:this.createVectorField(t.publisherConsents),legitimateInterests:this.createVectorField(t.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(t.publisherCustomConsents),legitimateInterests:this.createVectorField(t.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(t.publisherRestrictions)}}}createRestrictions(e){const t={};if(e.numRestrictions>0){const n=e.getMaxVendorId();for(let i=1;i<=n;i++){const n=i.toString();e.getRestrictions(i).forEach((e=>{const i=e.purposeId.toString();t[i]||(t[i]={}),t[i][n]=e.restrictionType}))}}return t}createVectorField(e,t){return t?t.reduce(((t,n)=>(t[String(n)]=e.has(Number(n)),t)),{}):[...e].reduce(((e,t)=>(e[t[0].toString(10)]=t[1],e)),{})}}class pn extends dn{constructor(e){super(e),delete this.outOfBand}createVectorField(e){return[...e].reduce(((e,t)=>e+=t[1]?"1":"0"),"")}createRestrictions(e){const t={};if(e.numRestrictions>0){const n=e.getMaxVendorId();e.getRestrictions().forEach((e=>{t[e.purposeId.toString()]="_".repeat(n)}));for(let i=0;i<n;i++){const n=i+1;e.getRestrictions(n).forEach((e=>{const n=e.restrictionType.toString(),r=e.purposeId.toString(),o=t[r].substr(0,i),s=t[r].substr(i+1);t[r]=o+n+s}))}}return t}}class hn extends cn{cmpLoaded=!0;cmpStatus=ln.cmpStatus;displayStatus=ln.displayStatus;apiVersion=String(ln.apiVersion);gvlVersion;constructor(){super(),ln.tcModel&&ln.tcModel.vendorListVersion&&(this.gvlVersion=+ln.tcModel.vendorListVersion)}}class fn extends on{respond(){this.invokeCallback(new hn)}}class vn extends sn{respond(){this.throwIfParamInvalid(),this.invokeCallback(new pn(this.param))}}class yn extends on{respond(){const e=ln.tcModel,t=e.vendorListVersion;let n;void 0===this.param&&(this.param=t),n=this.param===t&&e.gvl?e.gvl:new tn(this.param),n.readyPromise.then((()=>{this.invokeCallback(n.getJson())}))}}class mn extends sn{respond(){this.listenerId=ln.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}}class gn extends on{respond(){this.invokeCallback(ln.eventQueue.remove(this.param))}}class bn{static[vt.PING]=fn;static[vt.GET_TC_DATA]=sn;static[vt.GET_IN_APP_TC_DATA]=vn;static[vt.GET_VENDOR_LIST]=yn;static[vt.ADD_EVENT_LISTENER]=mn;static[vt.REMOVE_EVENT_LISTENER]=gn}class Cn{static set_=new Set([0,2,void 0,null]);static has(e){return"string"==typeof e&&(e=Number(e)),this.set_.has(e)}}const wn="__tcfapi";class In{callQueue;customCommands;constructor(e){if(e){let t=vt.ADD_EVENT_LISTENER;if(e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed: Use ${vt.GET_TC_DATA} instead`);if(t=vt.REMOVE_EVENT_LISTENER,e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed`);e?.[vt.GET_TC_DATA]&&(e[vt.ADD_EVENT_LISTENER]=e[vt.GET_TC_DATA],e[vt.REMOVE_EVENT_LISTENER]=e[vt.GET_TC_DATA]),this.customCommands=e}try{this.callQueue=window[wn]()||[]}catch(e){this.callQueue=[]}finally{window[wn]=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(e,t,n,...i){if("string"!=typeof e)n(null,!1);else if(Cn.has(t)){if("function"!=typeof n)throw new Error("invalid callback function");ln.disabled?n(new un,!1):this.isCustomCommand(e)||this.isBuiltInCommand(e)?this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?this.customCommands[e](n,...i):e===vt.PING?this.isCustomCommand(e)?new bn[e](this.customCommands[e],i[0],null,n):new bn[e](n,i[0]):void 0===ln.tcModel?this.callQueue.push([e,t,n,...i]):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new bn[e](this.customCommands[e],i[0],null,n):new bn[e](n,i[0]):n(null,!1)}else n(null,!1)}purgeQueuedCalls(){const e=this.callQueue;this.callQueue=[],e.forEach((e=>{window[wn](...e)}))}isCustomCommand(e){return this.customCommands&&"function"==typeof this.customCommands[e]}isBuiltInCommand(e){return void 0!==bn[e]}}class Sn{callResponder;isServiceSpecific;numUpdates=0;constructor(e,t,n=!1,i){this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),ln.cmpId=e,ln.cmpVersion=t,ln.tcfPolicyVersion=5,this.isServiceSpecific=!!n,this.callResponder=new In(i)}throwIfInvalidInt(e,t,n){if(!("number"==typeof e&&Number.isInteger(e)&&e>=n))throw new Error(`Invalid ${t}: ${e}`)}update(e,t=!1){if(ln.disabled)throw new Error("CmpApi Disabled");ln.cmpStatus=mt.LOADED,t?(ln.displayStatus=bt.VISIBLE,ln.eventStatus=wt.CMP_UI_SHOWN):void 0===ln.tcModel?(ln.displayStatus=bt.DISABLED,ln.eventStatus=wt.TC_LOADED):(ln.displayStatus=bt.HIDDEN,ln.eventStatus=wt.USER_ACTION_COMPLETE),ln.gdprApplies=null!==e,ln.gdprApplies?(""===e?(ln.tcModel=new nn,ln.tcModel.cmpId=ln.cmpId,ln.tcModel.cmpVersion=ln.cmpVersion):ln.tcModel=rn.decode(e),ln.tcModel.isServiceSpecific=this.isServiceSpecific,ln.tcfPolicyVersion=Number(ln.tcModel.policyVersion),ln.tcString=e):ln.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():ln.eventQueue.exec(),this.numUpdates++}disable(){ln.disabled=!0,ln.cmpStatus=mt.ERROR}}var _n=function(e){return e.reduce((function(e,t){return e[t.purpose_id]=t.isEnabled,e}),{})};function xn(e){return Object.entries(e).filter((function(e){e[0];return e[1]})).map((function(e){var t=e[0];return Number("necessary"===t?24:t)}))}function An(t){return(0,e.sH)(this,void 0,Promise,(function(){var n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(!t)throw new Error("Secret key is required");return[4,fetch("".concat(r.C1,"/public/consent/").concat(t))];case 1:if(!(n=e.sent()).ok)throw new Error("Failed to fetch cookie categories");return[4,n.json()];case 2:return[2,e.sent()]}}))}))}function En(t,n){return(0,e.sH)(this,void 0,Promise,(function(){var i;return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(!t)throw new Error("Secret key is required");if(!n)throw new Error("identifier is required");return[4,fetch("".concat(r.C1,"/public/consent/").concat(t,"/f/").concat(n))];case 1:if(!(i=e.sent()).ok)throw new Error("Failed to fetchUserAcceptConsentData");return 204===(null==i?void 0:i.status)?[2,void 0]:[4,i.text()];case 2:return[2,e.sent()]}}))}))}function Pn(e){return btoa(e)}var kn=function(t,n){return(0,e.sH)(void 0,void 0,void 0,(function(){var i,r,o,s,a,l;return(0,e.YH)(this,(function(c){switch(c.label){case 0:return(i=(new W).get("consent"))?[3,2]:(r=Pn(n),[4,En(t,r)]);case 1:i=c.sent(),c.label=2;case 2:return o=function(e){try{var t=new nn;return rn.decode(e,t),t}catch(e){return void console.error("Failed to decode TC string:",e)}}(i),s=function(e){var t={};return e?(e.purposeConsents.forEach((function(e,n){t[n]=e})),t):void 0}(o),a=function(e){var t={};return e?(e.specialFeatureOptins.forEach((function(e,n){t[n]=e})),t):void 0}(o),[4,An(t)];case 3:return l=c.sent(),d=null==(u=l)?void 0:u.purpose_configs.filter((function(e){return null==e?void 0:e.active})),p=null==u?void 0:u.feature_configs.filter((function(e){return null==e?void 0:e.active})),[2,{categories:(0,e.Cl)((0,e.Cl)({},u),{purpose_configs:d,feature_configs:p}),currentPurposeConsents:s,currentFeatureConsents:a}]}var u,d,p}))}))},Bn=function(t,n,i,o){return(0,e.sH)(void 0,void 0,void 0,(function(){var s;return(0,e.YH)(this,(function(a){return tn.baseUrl="https://sdk.aicactus.io/cip",(s=new tn).readyPromise.then((function(){var a=new nn(s);o.necessary=!0,i.necessary=!0;var l=xn(o),c=xn(i);a.cmpId=983,a.cmpVersion=2,a.consentScreen=0,a.consentLanguage="EN",a.policyVersion=s.tcfPolicyVersion,a.purposeConsents.set(l),a.specialFeatureOptins.set(c);var u,d=rn.encode(a);u=d,(0,e.sH)(void 0,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){return(new W).set("consent",JSON.stringify(u)),[2]}))}));try{!function(t,n,i){(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:if(!t)throw new Error("Secret key is required");if(!n)throw new Error("identifier is required");if(!i)throw new Error("tcfString is required");return[4,fetch("".concat(r.C1,"/public/consent/").concat(t,"/u/").concat(n,"/").concat(i))];case 1:if(!e.sent().ok)throw new Error("Failed to updateUserAcceptConsent");return[2]}}))}))}(t,Pn(n),d)}catch(e){}})).catch((function(e){})),[2]}))}))},Tn=function(){function t(t){void 0===t&&(t={}),this.modal=null,this.overlay=null,this.defautCategories={purpose_id:"necessary",title:"Strictly Necessary Cookies",description:"These cookies are necessary for the website to function and cannot be switched off in our systems.",isNecessary:!0,isEnabled:!0},this.purposeConfigItems=[],this.featureConfigItems=[],this.options=(0,e.Cl)({title:"Cookie Consent Preference Center",description:"When you visit any of our websites, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences, or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Click on the different category headings to find out more and manage your preferences. Please note, blocking some types of cookies may impact your experience of the site and the services we are able to offer.",theme:"light",confirmButtonText:"Confirm my choices",necessaryOnlyButtonText:"Necessary cookies only",policyLinkText:"Cookie Policy",policyUrl:"#"},t),this.categories=t.categories||{}}return t.prototype.createModal=function(){var t=this;if(!this.modal){var n=this.options,i=n.theme,r=n.title,o=n.description,s=n.policyLinkText,a=n.policyUrl,l="dark"===i||"auto"===i&&window.matchMedia("(prefers-color-scheme: dark)").matches;this.overlay=document.createElement("div"),this.overlay.style.position="fixed",this.overlay.style.top="0",this.overlay.style.left="0",this.overlay.style.width="100%",this.overlay.style.height="100%",this.overlay.style.backgroundColor="rgba(0, 0, 0, 0.5)",this.overlay.style.zIndex="9998",this.overlay.style.display="flex",this.overlay.style.alignItems="center",this.overlay.style.justifyContent="center",this.modal=document.createElement("div"),this.modal.style.backgroundColor=l?"#1f2937":"white",this.modal.style.color=l?"white":"#333",this.modal.style.borderRadius="8px",this.modal.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",this.modal.style.maxWidth="600px",this.modal.style.width="90%",this.modal.style.maxHeight="90vh",this.modal.style.display="flex",this.modal.style.flexDirection="column",this.modal.style.position="relative",this.modal.style.zIndex="9999";var c=document.createElement("div");c.style.padding="16px 20px",c.style.borderBottom=l?"1px solid #374151":"1px solid #e5e7eb",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="space-between";var u=document.createElement("button");u.innerHTML="&times;",u.style.border="none",u.style.background="none",u.style.fontSize="24px",u.style.cursor="pointer",u.style.color=l?"#9ca3af":"#6b7280",u.style.width="32px",u.style.height="32px",u.style.display="flex",u.style.alignItems="center",u.style.justifyContent="center",u.style.padding="0",u.addEventListener("click",(function(){t.close()}));var d=document.createElement("h1");d.textContent="Aicactus",d.style.fontWeight="bold",d.style.padding="0px",d.style.margin="0px",c.appendChild(d),c.appendChild(u);var p=document.createElement("div");p.style.padding="20px",p.style.overflowY="auto",p.style.maxHeight="calc(90vh - 140px)";var h=document.createElement("h2");h.textContent=r||"",h.style.margin="0 0 16px 0",h.style.fontSize="18px",h.style.fontWeight="bold";var f=document.createElement("p");if(f.textContent=o||"",f.style.margin="0 0 20px 0",f.style.fontSize="14px",f.style.lineHeight="1.5",f.style.color=l?"#d1d5db":"#4b5563",p.appendChild(h),p.appendChild(f),s&&a){var v=document.createElement("a");v.textContent=s,v.href=a,v.style.color="#3b82f6",v.style.textDecoration="none",v.style.fontSize="14px",v.style.display="inline-block",v.style.marginBottom="20px",p.appendChild(v)}var y=document.createElement("div");y.style.display="flex",y.style.flexDirection="column",y.style.gap="12px";var m=this.createCategoryElement(this.defautCategories,l);y.appendChild(m);var g=y.firstChild,b=document.createElement("div");b.style.marginTop="12px",b.style.display="flex",b.style.justifyContent="center",b.style.gap="4px",b.style.width="100%",b.style.marginBottom="12px";var C=document.createElement("button");C.textContent="Feature Configs",C.style.padding="8px 16px",C.style.backgroundColor=l?"#374151":"#f3f4f6",C.style.color=l?"white":"#4b5563",C.style.border="none",C.style.borderRadius="4px 4px 0 0",C.style.cursor="pointer",C.style.fontSize="14px",C.style.fontWeight="500",C.style.flex="1",C.style.maxWidth="180px",C.dataset.active="false",C.style.borderBottom="none";var w=document.createElement("button");w.textContent="Purpose Configs",w.style.padding="8px 16px",w.style.backgroundColor=l?"#1f2937":"white",w.style.color=l?"#d1d5db":"#6b7280",w.style.border=l?"1px solid #374151":"1px solid #e5e7eb",w.style.borderBottom="3px solid #3b82f6",w.style.borderRadius="4px 4px 0 0",w.style.cursor="pointer",w.style.fontSize="14px",w.style.fontWeight="500",w.style.flex="1",w.style.maxWidth="180px",w.dataset.active="true",b.appendChild(w),b.appendChild(C);var I=document.createElement("div");I.style.width="100%",I.style.display="none",I.style.marginBottom="12px";var S=document.createElement("div");S.style.width="100%",S.style.display="block",S.style.marginBottom="12px",this.featureConfigItems=this.categories.feature_configs||[],this.featureConfigItems.forEach((function(n){var i,r=t.createCategoryElement((0,e.Cl)((0,e.Cl)({},n),{isEnabled:null===(i=null==n?void 0:n.isEnabled)||void 0===i||i}),l);I.appendChild(r)})),this.purposeConfigItems=this.categories.purpose_configs||[],this.purposeConfigItems.forEach((function(n){var i,r=t.createCategoryElement((0,e.Cl)((0,e.Cl)({},n),{isEnabled:null===(i=null==n?void 0:n.isEnabled)||void 0===i||i}),l);S.appendChild(r)})),C.addEventListener("click",(function(){C.style.backgroundColor=l?"#374151":"#f3f4f6",C.style.color=l?"white":"#4b5563",C.style.border="none",C.style.borderBottom="3px solid #3b82f6",C.dataset.active="true",w.style.backgroundColor=l?"#1f2937":"white",w.style.color=l?"#d1d5db":"#6b7280",w.style.border=l?"1px solid #374151":"1px solid #e5e7eb",w.style.borderBottom="none",w.dataset.active="false",I.style.display="block",S.style.display="none"})),w.addEventListener("click",(function(){w.style.backgroundColor=l?"#374151":"#f3f4f6",w.style.color=l?"white":"#4b5563",w.style.border="none",w.style.borderBottom="3px solid #3b82f6",w.dataset.active="true",C.style.backgroundColor=l?"#1f2937":"white",C.style.color=l?"#d1d5db":"#6b7280",C.style.border=l?"1px solid #374151":"1px solid #e5e7eb",C.style.borderBottom="none",C.dataset.active="false",I.style.display="none",S.style.display="block"})),g&&g.parentNode&&(g.parentNode.insertBefore(b,g.nextSibling),g.parentNode.insertBefore(I,b.nextSibling),g.parentNode.insertBefore(S,I.nextSibling)),p.appendChild(y);var _=document.createElement("div");_.style.padding="16px 20px",_.style.borderTop=l?"1px solid #374151":"1px solid #e5e7eb",_.style.display="flex",_.style.justifyContent="flex-end",_.style.gap="12px";var x=document.createElement("button");x.textContent=this.options.necessaryOnlyButtonText||"Necessary cookies only",x.style.padding="8px 16px",x.style.backgroundColor=l?"#374151":"#f3f4f6",x.style.color=l?"white":"#4b5563",x.style.border="none",x.style.borderRadius="4px",x.style.cursor="pointer",x.style.fontSize="14px",x.style.fontWeight="500",x.addEventListener("click",(function(){t.options.onNecessaryOnly&&t.options.onNecessaryOnly();var e=Nn(t.categories,!1),n=(null==e?void 0:e.feature_configs)||[],i=(null==e?void 0:e.purpose_configs)||[];Bn(t.options.secretKey||"",t.options.attributeKey||"",_n(n),_n(i)),t.close(),t.options.removePopup&&t.options.removePopup(),setTimeout((function(){window.location.reload()}),1e3)}));var A=document.createElement("button");A.textContent=this.options.confirmButtonText||"Confirm my choices",A.style.padding="8px 16px",A.style.backgroundColor="#3b82f6",A.style.color="white",A.style.border="none",A.style.borderRadius="4px",A.style.cursor="pointer",A.style.fontSize="14px",A.style.fontWeight="500",A.addEventListener("click",(function(){var n=(0,e.fX)((0,e.fX)([],t.featureConfigItems,!0),t.purposeConfigItems,!0);t.options.onConfirm&&t.options.onConfirm(n),Bn(t.options.secretKey||"",t.options.attributeKey||"",_n(t.featureConfigItems),_n(t.purposeConfigItems)),t.close(),t.options.removePopup&&t.options.removePopup(),setTimeout((function(){window.location.reload()}),1e3)})),_.appendChild(x),_.appendChild(A),this.modal.appendChild(c),this.modal.appendChild(p),this.modal.appendChild(_),this.overlay.appendChild(this.modal),document.body.appendChild(this.overlay),document.body.style.overflow="hidden",this.overlay.addEventListener("click",(function(e){e.target===t.overlay&&t.close()}))}},t.prototype.createCategoryElement=function(e,t){var n=this,i=e.title,r=e.description,o=e.isNecessary,s=e.isEnabled,a=document.createElement("div");a.style.border=t?"1px solid #374151":"1px solid #e5e7eb",a.style.borderRadius="4px",a.style.overflow="hidden";var l=document.createElement("div");l.style.padding="12px 16px",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="space-between",l.style.cursor="pointer",l.style.backgroundColor=t?"#1f2937":"white";var c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.gap="12px";var u=document.createElement("span");u.innerHTML="+",u.style.fontSize="18px",u.style.fontWeight="bold",u.style.width="20px",u.style.height="20px",u.style.display="flex",u.style.alignItems="center",u.style.justifyContent="center";var d=document.createElement("span");d.textContent=i,d.style.fontWeight="600",d.style.fontSize="14px",c.appendChild(u),c.appendChild(d);var p=document.createElement("div");if(p.style.display="flex",p.style.alignItems="center",p.style.gap="8px",o){var h=document.createElement("span");h.textContent="Always Active",h.style.color="#3b82f6",h.style.fontSize="14px",p.appendChild(h)}else{var f=document.createElement("label");f.style.position="relative",f.style.display="inline-block",f.style.width="40px",f.style.height="20px";var v=document.createElement("input");v.type="checkbox",v.checked=s,v.style.opacity="0",v.style.width="0",v.style.height="0";var y=document.createElement("span");y.style.position="absolute",y.style.cursor="pointer",y.style.top="0",y.style.left="0",y.style.right="0",y.style.bottom="0",y.style.backgroundColor=s?"#3b82f6":t?"#4b5563":"#d1d5db",y.style.borderRadius="34px",y.style.transition=".4s";var m=document.createElement("span");m.style.position="absolute",m.style.content='""',m.style.height="16px",m.style.width="16px",m.style.left=s?"22px":"2px",m.style.bottom="2px",m.style.backgroundColor="white",m.style.borderRadius="50%",m.style.transition=".4s",y.appendChild(m),f.appendChild(v),f.appendChild(y),v.addEventListener("change",(function(){var i,r=v.checked;(y.style.backgroundColor=r?"#3b82f6":t?"#4b5563":"#d1d5db",m.style.left=r?"22px":"2px",e.isEnabled=r,n.featureConfigItems.some((function(t){return t.purpose_id===e.purpose_id})))&&(-1!==(i=n.featureConfigItems.findIndex((function(t){return t.purpose_id===e.purpose_id})))&&(n.featureConfigItems[i].isEnabled=r));n.purposeConfigItems.some((function(t){return t.purpose_id===e.purpose_id}))&&(-1!==(i=n.purposeConfigItems.findIndex((function(t){return t.purpose_id===e.purpose_id})))&&(n.purposeConfigItems[i].isEnabled=r))})),p.appendChild(f)}l.appendChild(c),l.appendChild(p);var g=document.createElement("div");g.style.padding="0 16px 16px 48px",g.style.display="none",g.style.borderTop=t?"1px solid #374151":"1px solid #e5e7eb",g.style.backgroundColor=t?"#1f2937":"white";var b=document.createElement("p");return b.innerText=r,b.style.margin="16px 0 0 0",b.style.fontSize="14px",b.style.lineHeight="1.5",b.style.color=t?"#d1d5db":"#4b5563",g.appendChild(b),l.addEventListener("click",(function(){var e="block"===g.style.display;g.style.display=e?"none":"block",u.innerHTML=e?"+":"-"})),a.appendChild(l),a.appendChild(g),a},t.prototype.close=function(){this.overlay&&this.overlay.parentNode&&(this.overlay.parentNode.removeChild(this.overlay),this.overlay=null,this.modal=null,document.body.style.overflow="",this.options.onClose&&this.options.onClose())},t.prototype.show=function(t){t&&(this.options=(0,e.Cl)((0,e.Cl)({},this.options),t),t.categories&&(this.categories=t.categories)),this.createModal()},t}();function Nn(e,t){return void 0===t&&(t=!0),e.purpose_configs.forEach((function(e){e.isEnabled=t})),e.feature_configs.forEach((function(e){e.isEnabled=t})),e}var Ln=function(){function t(t){void 0===t&&(t={});var n,i=this;this.container=null,this.viewTimeout=null,this.observer=null,this.modal=null,this.floatingIcon=null,this.options=(0,e.Cl)({position:"bottom-left",duration:0,theme:"light",showCloseButton:!0,showCustomizeButton:!0,customizeButtonText:"Customize settings",acceptButtonText:"Accept all cookies",necessaryOnlyButtonText:"Necessary cookies only",showFloatingIcon:!0,floatingIconPosition:"bottom-left"},t),this.categories=(null===(n=t.consentModal)||void 0===n?void 0:n.categories)||void 0,kn(t.secretKey||"",t.attributeKey||"").then((function(e){var t=e.categories,n=e.currentPurposeConsents,r=e.currentFeatureConsents;n&&Object.keys(n).length>0||r&&Object.keys(r).length>0?i.categories=function(e,t,n){var i=(null==t?void 0:t[24])||!1;return t&&Object.keys(t).length>0&&e.purpose_configs.forEach((function(e){t.hasOwnProperty(e.purpose_id.toString())&&(e.isEnabled=t[e.purpose_id.toString()])})),e.feature_configs.forEach((function(e){n.hasOwnProperty(e.purpose_id.toString())?e.isEnabled=n[e.purpose_id.toString()]:i&&(e.isEnabled=!1)})),e}(t,n,r):i.categories=Nn(t,!0)})).catch((function(e){console.error("Error handle consent data:",e)})),this.modal=new Tn((0,e.Cl)((0,e.Cl)({},t.consentModal),{categories:this.categories,onConfirm:function(e){var t,n;(null===(t=i.options.consentModal)||void 0===t?void 0:t.onConfirm)&&(null===(n=i.options.consentModal)||void 0===n||n.onConfirm(e))},onNecessaryOnly:function(){i.options.onNecessaryOnly&&i.options.onNecessaryOnly()},secretKey:this.options.secretKey||"",attributeKey:this.options.attributeKey||""})),this.options.showFloatingIcon&&this.createFloatingIcon()}return t.prototype.createFloatingIcon=function(){var e=this,t=this.options,n=t.theme,i=t.floatingIconPosition,r="dark"===n||"auto"===n&&window.matchMedia("(prefers-color-scheme: dark)").matches;this.floatingIcon=document.createElement("div"),this.floatingIcon.style.position="fixed",this.floatingIcon.style.zIndex="9997",this.floatingIcon.style.width="48px",this.floatingIcon.style.height="48px",this.floatingIcon.style.borderRadius="50%",this.floatingIcon.style.backgroundColor=r?"#1f2937":"white",this.floatingIcon.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.2)",this.floatingIcon.style.display="flex",this.floatingIcon.style.alignItems="center",this.floatingIcon.style.justifyContent="center",this.floatingIcon.style.cursor="pointer",this.floatingIcon.style.transition="transform 0.2s ease",this.floatingIcon.style.border=r?"1px solid #374151":"1px solid #e2e8f0";var o=i||"bottom-right";o.includes("bottom")?this.floatingIcon.style.bottom="20px":this.floatingIcon.style.top="20px",o.includes("right")?this.floatingIcon.style.right="20px":this.floatingIcon.style.left="20px",this.floatingIcon.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="'.concat(r?"#60a5fa":"#3b82f6",'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5" />\n        <path d="M8.5 8.5v.01" />\n        <path d="M16 15.5v.01" />\n        <path d="M12 12v.01" />\n      </svg>\n    '),this.floatingIcon.addEventListener("mouseenter",(function(){e.floatingIcon.style.transform="scale(1.1)"})),this.floatingIcon.addEventListener("mouseleave",(function(){e.floatingIcon.style.transform="scale(1)"})),this.floatingIcon.addEventListener("click",(function(){e.showDefaultPopup(),e.hideFloatingIcon()})),document.body.appendChild(this.floatingIcon)},t.prototype.showDefaultPopup=function(){this.show("Cookie Settings",'We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.')},t.prototype.hideFloatingIcon=function(){this.floatingIcon&&(this.floatingIcon.style.display="none")},t.prototype.showFloatingIcon=function(){this.floatingIcon?this.floatingIcon.style.display="flex":this.options.showFloatingIcon&&this.createFloatingIcon()},t.prototype.createContainer=function(){this.container||(this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.zIndex="9998",document.body.appendChild(this.container),this.setPosition(this.options.position||"bottom-left"))},t.prototype.setPosition=function(e){if(this.container){var t=e.split("-"),n=t[0],i=t[1];this.container.style.top="top"===n?"20px":"auto",this.container.style.bottom="bottom"===n?"20px":"auto",this.container.style.left="left"===i?"20px":"auto",this.container.style.right="right"===i?"20px":"auto","center"===i&&(this.container.style.left="50%",this.container.style.transform="translateX(-50%)")}},t.prototype.createPopupElement=function(e,t){var n=this,i=this.options,r=i.theme,o=i.showCloseButton,s=i.showCustomizeButton,a=i.product,l="dark"===r||"auto"===r&&window.matchMedia("(prefers-color-scheme: dark)").matches,c=document.createElement("div");c.style.position="relative",c.style.backgroundColor=l?"#1f2937":"white",c.style.color=l?"white":"#333",c.style.borderRadius="8px",c.style.padding="16px",c.style.marginBottom="10px",c.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",c.style.transition="opacity 0.3s, transform 0.3s",c.style.opacity="0",c.style.transform="translateY(10px)",c.style.maxWidth="400px",c.style.border=l?"1px solid #374151":"1px solid #e2e8f0";var u=document.createElement("div");u.style.display="flex",u.style.alignItems="flex-start",u.style.marginBottom="12px";var d=document.createElement("div");d.style.width="40px",d.style.height="40px",d.style.borderRadius="50%",d.style.backgroundColor=l?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.marginRight="12px",d.style.flexShrink="0",d.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="'.concat(l?"#60a5fa":"#3b82f6",'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5" />\n        <path d="M8.5 8.5v.01" />\n        <path d="M16 15.5v.01" />\n        <path d="M12 12v.01" />\n      </svg>\n    ');var p=document.createElement("div");p.style.flex="1";var h=document.createElement("h3");h.textContent=e,h.style.margin="0",h.style.marginBottom="8px",h.style.fontSize="16px",h.style.fontWeight="bold";var f=document.createElement("p");if(f.textContent=t,f.style.margin="0",f.style.fontSize="14px",f.style.lineHeight="1.5",f.style.color=l?"#d1d5db":"#4b5563",p.appendChild(h),p.appendChild(f),u.appendChild(d),u.appendChild(p),c.appendChild(u),a&&a.name){var v=this.createProductElement(a,l);c.appendChild(v)}var y=document.createElement("div");y.style.display="flex",y.style.flexWrap="wrap",y.style.gap="8px",y.style.marginTop="16px";var m=document.createElement("button");m.textContent=this.options.acceptButtonText||"Accept all cookies",m.style.padding="8px 16px",m.style.backgroundColor="#3b82f6",m.style.color="white",m.style.border="none",m.style.borderRadius="4px",m.style.cursor="pointer",m.style.fontSize="14px",m.style.fontWeight="500",m.addEventListener("click",(function(){n.options.onAccept&&n.options.onAccept();var e=Nn(n.categories,!0),t=(null==e?void 0:e.feature_configs)||[],i=(null==e?void 0:e.purpose_configs)||[];Bn(n.options.secretKey||"",n.options.attributeKey||"",_n(t),_n(i)),n.removePopup(c),setTimeout((function(){window.location.reload()}),1e3)}));var g=document.createElement("button");if(g.textContent=this.options.necessaryOnlyButtonText||"Necessary cookies only",g.style.padding="8px 16px",g.style.backgroundColor="transparent",g.style.color=l?"white":"#4b5563",g.style.border=l?"1px solid #4b5563":"1px solid #d1d5db",g.style.borderRadius="4px",g.style.cursor="pointer",g.style.fontSize="14px",g.style.fontWeight="500",g.addEventListener("click",(function(){n.options.onNecessaryOnly&&n.options.onNecessaryOnly();var e=Nn(n.categories,!1),t=(null==e?void 0:e.feature_configs)||[],i=(null==e?void 0:e.purpose_configs)||[];Bn(n.options.secretKey||"",n.options.attributeKey||"",_n(t),_n(i)),n.removePopup(c),setTimeout((function(){window.location.reload()}),1e3)})),y.appendChild(m),y.appendChild(g),s){var b=document.createElement("button");b.textContent=this.options.customizeButtonText||"Customize settings",b.style.padding="8px 16px",b.style.backgroundColor="transparent",b.style.color="#3b82f6",b.style.border="none",b.style.borderRadius="4px",b.style.cursor="pointer",b.style.fontSize="14px",b.style.fontWeight="500",b.style.textDecoration="underline",b.addEventListener("click",(function(){n.options.onCustomize?n.options.onCustomize():n.showModal((function(){n.removePopup(c)}))})),y.appendChild(b)}if(c.appendChild(y),o){var C=document.createElement("button");C.innerHTML="&times;",C.style.position="absolute",C.style.top="8px",C.style.right="8px",C.style.border="none",C.style.background="none",C.style.fontSize="20px",C.style.cursor="pointer",C.style.color="#9ca3af",C.style.width="24px",C.style.height="24px",C.style.display="flex",C.style.alignItems="center",C.style.justifyContent="center",C.style.padding="0",C.addEventListener("click",(function(e){e.stopPropagation(),n.removePopup(c),n.options.onClose&&n.options.onClose(),n.showFloatingIcon()})),c.appendChild(C)}return c},t.prototype.createProductElement=function(e,t){var n=document.createElement("div");if(n.style.display="flex",n.style.alignItems="center",n.style.marginTop="12px",n.style.paddingTop="12px",n.style.borderTop=t?"1px solid #374151":"1px solid #e5e7eb",e.image&&e.image.url){var i=document.createElement("img");i.src=e.image.url,i.alt=e.image.name||e.name||"Product image",i.style.width="50px",i.style.height="50px",i.style.objectFit="cover",i.style.borderRadius="4px",i.style.marginRight="12px",n.appendChild(i)}var r=document.createElement("div");if(e.name){var o=document.createElement("p");o.textContent=e.name,o.style.margin="0",o.style.fontSize="14px",o.style.fontWeight="bold",r.appendChild(o)}if(e.id){var s=document.createElement("p");s.textContent="ID: ".concat(e.id),s.style.margin="0",s.style.fontSize="12px",s.style.color=t?"#9ca3af":"#6b7280",r.appendChild(s)}return n.appendChild(r),n},t.prototype.removePopup=function(e){var t=this;e.style.opacity="0",e.style.transform="translateY(10px)",setTimeout((function(){e.parentNode&&e.parentNode.removeChild(e),t.container&&0===t.container.childNodes.length&&(document.body.removeChild(t.container),t.container=null),t.showFloatingIcon()}),300),this.observer&&(this.observer.disconnect(),this.observer=null),this.viewTimeout&&(clearTimeout(this.viewTimeout),this.viewTimeout=null)},t.prototype.showModal=function(e){this.modal&&this.modal.show({categories:this.categories,removePopup:e})},t.prototype.show=function(t,n,i){var r=this;this.hideFloatingIcon();var o=(0,e.Cl)((0,e.Cl)({},this.options),i);this.options=o,this.createContainer();var s=this.createPopupElement(t,n);return this.container&&(this.container.appendChild(s),this.options.onImpression&&setTimeout(this.options.onImpression,0)),s.offsetHeight,s.style.opacity="1",s.style.transform="translateY(0)",this.options.duration&&this.options.duration>0&&setTimeout((function(){r.removePopup(s),r.options.onClose&&r.options.onClose()}),this.options.duration),{close:function(){r.removePopup(s),r.options.onClose&&r.options.onClose()}}},t}();var Dn={integrations:{Aicactus:{unbundledIntegrations:[],addBundledMetadata:!1,maybeBundledConfigIds:{},versionSettings:{version:"1.0.0",componentTypes:["browser"]}}},plan:{track:{__default:{enabled:!0,integrations:{}}},identify:{__default:{enabled:!0}},group:{__default:{enabled:!0}}},edgeFunction:{},middlewareSettings:{routingRules:[]},enabledMiddleware:{},metrics:{sampleRate:.1,host:r.m4},legacyVideoPluginsEnabled:!1,remotePlugins:[],autoInstrumentationSettings:{sampleRate:0}};function On(t,n){return(0,e.sH)(this,void 0,Promise,(function(){return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,se(t,n)];case 1:return e.sent(),function(e,t){Object.keys(t.calls).forEach((function(n){t.getAndRemove(n).forEach((function(t){setTimeout((function(){fe(e,t).catch(console.error)}),0)}))}))}(t,n),[2]}}))}))}function Mn(t,n,r,o){return(0,e.sH)(this,arguments,Promise,(function(t,n,r,o,a,l,c){var u,d,p,h,f,v,y,m,g,b,C,w,I,S,_,x,A,E,P=this;return void 0===a&&(a=[]),(0,e.YH)(this,(function(k){switch(k.label){case 0:return function(e,t){ce(e,t),le(e,t)}(r,c),u=null==a?void 0:a.filter((function(e){return"object"==typeof e})),d=null==a?void 0:a.filter((function(e){return"function"==typeof e&&"string"==typeof e.pluginName})),function(e){var t,n,r;return"test"!==i().NODE_ENV&&(null!==(r=null===(n=null===(t=e.middlewareSettings)||void 0===t?void 0:t.routingRules)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>0}(n)?[4,s.e(10).then(s.bind(s,31)).then((function(e){return e.tsubMiddleware(n.middlewareSettings.routingRules)}))]:[3,2];case 1:return h=k.sent(),[3,3];case 2:h=void 0,k.label=3;case 3:return p=h,B=n,"test"!==i().NODE_ENV&&Object.keys(B.integrations).length>1||l.length>0?[4,s.e(50).then(s.bind(s,3771)).then((function(e){return e.ajsDestinations(t,n,r.integrations,o,p,l)}))]:[3,5];case 4:return v=k.sent(),[3,6];case 5:v=[],k.label=6;case 6:return f=v,n.legacyVideoPluginsEnabled?[4,s.e(694).then(s.bind(s,8162)).then((function(e){return e.loadLegacyVideoPlugins(r)}))]:[3,8];case 7:k.sent(),k.label=8;case 8:return(null===(A=o.plan)||void 0===A?void 0:A.track)?[4,s.e(104).then(s.bind(s,3542)).then((function(e){var t;return e.schemaFilter(null===(t=o.plan)||void 0===t?void 0:t.track,n)}))]:[3,10];case 9:return m=k.sent(),[3,11];case 10:m=void 0,k.label=11;case 11:return y=m,g=(0,Oe.J)(n,o),[4,qe(n,r.integrations,g,o,p,d).catch((function(){return[]}))];case 12:return b=k.sent(),C=(0,e.fX)((0,e.fX)([Ue,St],f,!0),b,!0),y&&C.push(y),I=(w=C).push,[4,it(r,(0,e.Cl)((0,e.Cl)({},g.Aicactus),{apiKey:t}),n.integrations)];case 13:return I.apply(w,[k.sent()]),_=(S=C).push,[4,rt(r,(0,e.Cl)((0,e.Cl)({},g.Aicactus),{apiKey:t}),n.integrations)];case 14:return _.apply(S,[k.sent()]),[4,r.register.apply(r,(0,e.fX)((0,e.fX)([],C,!1),u,!1))];case 15:return x=k.sent(),[4,ae(r,c)];case 16:return k.sent(),Object.entries(null!==(E=n.enabledMiddleware)&&void 0!==E?E:{}).some((function(e){return e[1]}))?[4,s.e(521).then(s.bind(s,9231)).then((function(t){return(0,e.sH)(P,[t],void 0,(function(t){var i,s,a=t.remoteMiddlewares;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return[4,a(x,n,o.obfuscate)];case 1:return i=e.sent(),s=i.map((function(e){return r.addSourceMiddleware(e)})),[2,Promise.all(s)]}}))}))}))]:[3,18];case 17:k.sent(),k.label=18;case 18:return[2,x]}var B}))}))}function Hn(t){return(0,e.sH)(this,arguments,Promise,(function(t,n,i){var r,o,s,a,l,c,u,d,p,f,v,y,m,g,b,C,w,I,S,_,x,A,E,P;return void 0===n&&(n={}),(0,e.YH)(this,(function(k){switch(k.label){case 0:return r=null==n?void 0:n.attributeType,o=null==n?void 0:n.attributeValue,tn.baseUrl="https://sdk.aicactus.io/cip",(new tn).readyPromise.then((function(){var e=new Sn(983,2,!0);return e.update("",!0),e})).catch((function(e){})),function(){var e=sessionStorage.getItem(_e);if(e){if(n=sessionStorage.getItem(xe))return{id:e,startedAt:n};var t=(new Date).toISOString();return sessionStorage.setItem(xe,t),{id:e,startedAt:t}}e=Se();var n=(new Date).toISOString();sessionStorage.setItem(_e,e||""),sessionStorage.setItem(xe,n)}(),!0===n.disable?[2,[new De,h.o.system()]]:(n.globalAnalyticsKey&&(0,re.rY)(n.globalAnalyticsKey),(void 0===n.initialPageview||n.initialPageview)&&i.add(new pe("page",[])),s=Dn,"function"!=typeof n.disable?[3,2]:[4,n.disable(s)]);case 1:if(k.sent())return[2,[new De,h.o.system()]];k.label=2;case 2:return a=null===(I=null===(w=s.integrations.Aicactus)||void 0===w?void 0:w.retryQueue)||void 0===I||I,n=(0,e.Cl)({retryQueue:a},n),function(e){var t;null===(t=_t.attach)||void 0===t||t.call(_t,e)}(l=new Le((0,e.Cl)({},t),n)),c=[],u=null!==(S=t.classicIntegrations)&&void 0!==S?S:[],d=null===(_=n.integrations)||void 0===_?void 0:_.Aicactus,xt.U.initRemoteMetrics({host:null==d?void 0:d.apiHost,protocol:null==d?void 0:d.protocol}),[4,Mn(t.secretKey,s,l,n,c,u,i)];case 3:return p=k.sent(),f=null!==(x=window.location.search)&&void 0!==x?x:"",v=null!==(A=window.location.hash)&&void 0!==A?A:"",(y=f.length?f:v.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,l.queryString(y).catch(console.error)]:[3,5];case 4:k.sent(),k.label=5;case 5:return l.initialized=!0,l.emit("initialize",t,n),(m=new Pt).ip?[3,7]:[4,m.setup(t.secretKey,r||"",o||"")];case 6:k.sent(),k.label=7;case 7:return m.unifiedId&&l.setAnonymousId(m.unifiedId),l.setAIID(m),g=new W,b=g.get("ajs_anonymous_id"),C=new Ln({onAccept:n.onAccept,onNecessaryOnly:n.onNecessaryOnly,onCustomize:n.onCustomize,onClose:n.onClose,onView:n.onView,showCloseButton:null===(E=n.showCloseButton)||void 0===E||E,showCustomizeButton:null===(P=n.showCustomizeButton)||void 0===P||P,acceptButtonText:n.acceptButtonText,customizeButtonText:n.customizeButtonText,necessaryOnlyButtonText:n.necessaryOnlyButtonText,consentModal:n.consentModal,secretKey:t.secretKey,attributeKey:o&&r?"".concat(r,":").concat(o):"anon_id:".concat(b)}),[4,(0,e.sH)(void 0,void 0,void 0,(function(){return(0,e.YH)(this,(function(e){return(new W).get("consent")?[2,!1]:[2,!0]}))}))];case 8:return k.sent()&&C.show((null==n?void 0:n.consentTitle)||"We value your privacy",(null==n?void 0:n.consentDescription)||"We use cookies to give you the best user experience on Aicactus, including when you return to our website and when you are logged in. We also analyze our website traffic and share information about your use of our platform with our analytics partners. Nothing more!"),[4,On(l,i)];case 9:return k.sent(),[2,[l,p]]}}))}))}var Gn=function(t){function n(){var e=this,n=(0,Me.u)(),i=n.promise,r=n.resolve;return e=t.call(this,(function(e){return i.then((function(t){return Hn(t[0],t[1],e)}))}))||this,e._resolveLoadStart=function(e,t){return r([e,t])},e}return(0,e.C6)(n,t),n.__tcfapi=function(e,t){("ping"===e&&t({pingReturn:"pong"}),"addEventListener"===e)&&t(function(){tn.baseUrl="https://sdk.aicactus.io/cip";var e=new tn;e.readyPromise.then((function(){var t=new nn(e);return t.cmpId=983,t.cmpVersion=2,t.consentScreen=0,t.consentLanguage="EN",t.policyVersion=e.tcfPolicyVersion,t.purposeConsents.set(1),rn.encode(t)})).catch((function(e){}))}())},n.prototype.load=function(e,t){return void 0===t&&(t={}),this._resolveLoadStart(e,t),this},n.load=function(e,t){return void 0===t&&(t={}),(new n).load(e,t)},n.standalone=function(e,t){return n.load({secretKey:e},t).then((function(e){return e[0]}))},n}(ve);function Rn(){return(0,e.sH)(this,void 0,Promise,(function(){var t,n=this;return(0,e.YH)(this,(function(i){return(t=(0,re.a5)())&&(t.initialize=function(t,i){return(0,e.sH)(n,void 0,Promise,(function(){var n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return(null==t?void 0:t.secretKey)?(n=re.Ud,[4,Gn.standalone(t.secretKey,i)]):(console.error("Failed to load Secret Key. Make sure to use the latest version of the Aicactus snippet, which can be found in your source settings."),[2]);case 1:return n.apply(void 0,[e.sent()]),[2]}}))}))},t.callMethodsFromContainer=function(){}),[2,Promise.resolve()]}))}))}var Fn=s(148);try{window.analyticsSecretKey="__SECRET_KEY__"}catch(e){}function Un(){if(void 0!==window.analyticsSecretKey)return window.analyticsSecretKey!==["__","SECRET","_","KEY","__"].join("")?window.analyticsSecretKey:void 0}var jn;var Vn=(0,t.I2)();(0,t.qQ)(Vn),s.p=Vn?Vn+"/analytics-next/bundles/":"https://cdn.segment.com/analytics-next/bundles/",(0,n.J)("web");var Kn=!1,zn=function(t){(new Fn.w).increment("analytics_js.invoke.error",(0,e.fX)((0,e.fX)([],t,!0),["wk:".concat(Un())],!1))};function Yn(t){return(0,e.sH)(this,void 0,void 0,(function(){var n;return(0,e.YH)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return[2,i.sent()];case 2:return n=i.sent(),r=n,console.error("[AicactusSDK.js]","Failed to load AicactusSDK.js",r),zn((0,e.fX)(["type:initialization"],r instanceof Error?["message:".concat(null==r?void 0:r.message),"name:".concat(null==r?void 0:r.name)]:[],!0)),[3,3];case 3:return[2]}var r}))}))}document.addEventListener("securitypolicyviolation",(function(n){!Kn&&function(e){return"report"!==e.disposition&&e.blockedURI.includes("cdn.segment")}(n)&&(Kn=!0,zn(["type:csp"]),function(){return(0,e.sH)(this,void 0,Promise,(function(){var n;return(0,e.YH)(this,(function(e){switch(e.label){case 0:return console.warn("Your CSP policy is missing permissions required in order to run Analytics.js 2.0","https://segment.com/docs/connections/sources/catalog/libraries/website/javascript/upgrade-to-ajs2/#using-a-strict-content-security-policy-on-the-page"),console.warn("Reverting to Analytics.js 1.0"),n=(0,t.NH)(),[4,(0,je.k)(n)];case 1:return e.sent(),[2]}}))}))}().catch(console.error))}));var qn,Wn,Jn,Qn,Xn,$n,Zn=null===(jn=document.querySelector("script[data-global-segment-analytics-key]"))||void 0===jn?void 0:jn.dataset.globalSegmentAnalyticsKey;if(Zn&&(0,re.rY)(Zn),qn={Firefox:46,Edge:13},Wn=!!window.MSInputMethodContext&&!!document.documentMode,Jn=navigator.userAgent.split(" "),Qn=Jn[Jn.length-1].split("/"),Xn=Qn[0],$n=Qn[1],Wn||void 0!==qn[Xn]&&qn[Xn]>=parseInt($n)){var ei=document.createElement("script");ei.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.7.0/polyfill.min.js"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){return document.body.appendChild(ei)})):document.body.appendChild(ei),ei.onload=function(){Yn(Rn)}}else Yn(Rn)}(),window.AnalyticsNext={}}();
//# sourceMappingURL=standalone.js.map